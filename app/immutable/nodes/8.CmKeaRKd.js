var ss=Object.defineProperty;var rs=(yt,l,it)=>l in yt?ss(yt,l,{enumerable:!0,configurable:!0,writable:!0,value:it}):yt[l]=it;var ee=(yt,l,it)=>(rs(yt,typeof l!="symbol"?l+"":l,it),it),Ye=(yt,l,it)=>{if(!l.has(yt))throw TypeError("Cannot "+it)};var t=(yt,l,it)=>(Ye(yt,l,"read from private field"),it?it.call(yt):l.get(yt)),R=(yt,l,it)=>{if(l.has(yt))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(yt):l.set(yt,it)},Y=(yt,l,it,p)=>(Ye(yt,l,"write to private field"),p?p.call(yt,it):l.set(yt,it),it);var de=(yt,l,it,p)=>({set _(F){Y(yt,l,F,it)},get _(){return t(yt,l,p)}}),V=(yt,l,it)=>(Ye(yt,l,"access private method"),it);import{s as safe_not_equal,n as noop,j as binding_callbacks,B as onDestroy,t as tick,C as action_destroyer}from"../chunks/scheduler.94VNBIHN.js";import{S as SvelteComponent,i as init,B as svg_element,C as claim_svg_element,a as children,d as detach,o as attr,g as insert_hydration,h as append_hydration,e as element,m as create_component,t as text,s as space,c as claim_element,n as claim_component,b as claim_text,f as claim_space,D as get_svelte_dataset,p as mount_component,v as listen,k as transition_in,l as transition_out,q as destroy_component,z as group_outros,x as check_outros,u as destroy_each,w as empty,A as construct_svelte_component}from"../chunks/index.vJV2M5f0.js";import{e as ensure_array_like}from"../chunks/each.D6YF6ztN.js";import{a as axios,M as Menu}from"../chunks/Menu.B2JRD5N7.js";/* empty css                                                       */import{b as base}from"../chunks/entry.7x_RcZoY.js";function getAugmentedNamespace(yt){if(yt.__esModule)return yt;var l=yt.default;if(typeof l=="function"){var it=function p(){return this instanceof p?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};it.prototype=l.prototype}else it={};return Object.defineProperty(it,"__esModule",{value:!0}),Object.keys(yt).forEach(function(p){var F=Object.getOwnPropertyDescriptor(yt,p);Object.defineProperty(it,p,F.get?F:{enumerable:!0,get:function(){return yt[p]}})}),it}function commonjsRequire(yt){throw new Error('Could not dynamically require "'+yt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(l,it){module.exports=l.pdfjsLib=it()})(globalThis,()=>(()=>{var __webpack_modules__=[,(yt,l)=>{var Jt;Object.defineProperty(l,"__esModule",{value:!0}),l.VerbosityLevel=l.Util=l.UnknownErrorException=l.UnexpectedResponseException=l.TextRenderingMode=l.RenderingIntentFlag=l.PromiseCapability=l.PermissionFlag=l.PasswordResponses=l.PasswordException=l.PageActionEventType=l.OPS=l.MissingPDFException=l.MAX_IMAGE_SIZE_TO_CACHE=l.LINE_FACTOR=l.LINE_DESCENT_FACTOR=l.InvalidPDFException=l.ImageKind=l.IDENTITY_MATRIX=l.FormatError=l.FeatureTest=l.FONT_IDENTITY_MATRIX=l.DocumentActionEventType=l.CMapCompressionType=l.BaseException=l.BASELINE_FACTOR=l.AnnotationType=l.AnnotationReplyType=l.AnnotationPrefix=l.AnnotationMode=l.AnnotationFlag=l.AnnotationFieldFlag=l.AnnotationEditorType=l.AnnotationEditorPrefix=l.AnnotationEditorParamsType=l.AnnotationBorderStyleType=l.AnnotationActionEventType=l.AbortException=void 0,l.assert=at,l.bytesToString=tt,l.createValidAbsoluteUrl=wt,l.getModificationDate=Rt,l.getUuid=Kt,l.getVerbosityLevel=$,l.info=K,l.isArrayBuffer=gt,l.isArrayEqual=Tt,l.isNodeJS=void 0,l.normalizeUnicode=zt,l.objectFromMap=et,l.objectSize=St,l.setVerbosityLevel=P,l.shadow=Pt,l.string32=ft,l.stringToBytes=mt,l.stringToPDFString=rt,l.stringToUTF8String=J,l.unreachable=B,l.utf8StringToString=Q,l.warn=G;const it=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");l.isNodeJS=it;const p=[1,0,0,1,0,0];l.IDENTITY_MATRIX=p;const F=[.001,0,0,.001,0,0];l.FONT_IDENTITY_MATRIX=F;const lt=1e7;l.MAX_IMAGE_SIZE_TO_CACHE=lt;const H=1.35;l.LINE_FACTOR=H;const I=.35;l.LINE_DESCENT_FACTOR=I;const x=I/H;l.BASELINE_FACTOR=x;const u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};l.RenderingIntentFlag=u;const s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};l.AnnotationMode=s;const k="pdfjs_internal_editor_";l.AnnotationEditorPrefix=k;const v={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};l.AnnotationEditorType=v;const f={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};l.AnnotationEditorParamsType=f;const c={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};l.PermissionFlag=c;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};l.TextRenderingMode=g;const h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};l.ImageKind=h;const S={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};l.AnnotationType=S;const C={GROUP:"Group",REPLY:"R"};l.AnnotationReplyType=C;const _={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};l.AnnotationFlag=_;const y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};l.AnnotationFieldFlag=y;const i={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};l.AnnotationBorderStyleType=i;const e={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};l.AnnotationActionEventType=e;const E={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};l.DocumentActionEventType=E;const b={O:"PageOpen",C:"PageClose"};l.PageActionEventType=b;const o={ERRORS:0,WARNINGS:1,INFOS:5};l.VerbosityLevel=o;const M={NONE:0,BINARY:1};l.CMapCompressionType=M;const w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};l.OPS=w;const j={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};l.PasswordResponses=j;let Z=o.WARNINGS;function P(At){Number.isInteger(At)&&(Z=At)}function $(){return Z}function K(At){Z>=o.INFOS&&console.log(`Info: ${At}`)}function G(At){Z>=o.WARNINGS&&console.log(`Warning: ${At}`)}function B(At){throw new Error(At)}function at(At,m){At||B(m)}function W(At){switch(At==null?void 0:At.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wt(At,m=null,L=null){if(!At)return null;try{if(L&&typeof At=="string"){if(L.addDefaultProtocol&&At.startsWith("www.")){const st=At.match(/\./g);(st==null?void 0:st.length)>=2&&(At=`http://${At}`)}if(L.tryConvertEncoding)try{At=J(At)}catch{}}const ct=m?new URL(At,m):new URL(At);if(W(ct))return ct}catch{}return null}function Pt(At,m,L,ct=!1){return Object.defineProperty(At,m,{value:L,enumerable:!ct,configurable:!0,writable:!1}),L}const D=function(){function m(L,ct){this.constructor===m&&B("Cannot initialize BaseException."),this.message=L,this.name=ct}return m.prototype=new Error,m.constructor=m,m}();l.BaseException=D;class n extends D{constructor(m,L){super(m,"PasswordException"),this.code=L}}l.PasswordException=n;class d extends D{constructor(m,L){super(m,"UnknownErrorException"),this.details=L}}l.UnknownErrorException=d;class a extends D{constructor(m){super(m,"InvalidPDFException")}}l.InvalidPDFException=a;class A extends D{constructor(m){super(m,"MissingPDFException")}}l.MissingPDFException=A;class T extends D{constructor(m,L){super(m,"UnexpectedResponseException"),this.status=L}}l.UnexpectedResponseException=T;class N extends D{constructor(m){super(m,"FormatError")}}l.FormatError=N;class X extends D{constructor(m){super(m,"AbortException")}}l.AbortException=X;function tt(At){(typeof At!="object"||(At==null?void 0:At.length)===void 0)&&B("Invalid argument for bytesToString");const m=At.length,L=8192;if(m<L)return String.fromCharCode.apply(null,At);const ct=[];for(let st=0;st<m;st+=L){const dt=Math.min(st+L,m),_t=At.subarray(st,dt);ct.push(String.fromCharCode.apply(null,_t))}return ct.join("")}function mt(At){typeof At!="string"&&B("Invalid argument for stringToBytes");const m=At.length,L=new Uint8Array(m);for(let ct=0;ct<m;++ct)L[ct]=At.charCodeAt(ct)&255;return L}function ft(At){return String.fromCharCode(At>>24&255,At>>16&255,At>>8&255,At&255)}function St(At){return Object.keys(At).length}function et(At){const m=Object.create(null);for(const[L,ct]of At)m[L]=ct;return m}function bt(){const At=new Uint8Array(4);return At[0]=1,new Uint32Array(At.buffer,0,1)[0]===1}function pt(){try{return new Function(""),!0}catch{return!1}}class Lt{static get isLittleEndian(){return Pt(this,"isLittleEndian",bt())}static get isEvalSupported(){return Pt(this,"isEvalSupported",pt())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Pt(this,"platform",{isWin:!1,isMac:!1}):Pt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var m,L;return Pt(this,"isCSSRoundSupported",(L=(m=globalThis.CSS)==null?void 0:m.supports)==null?void 0:L.call(m,"width: round(1.5px, 1px)"))}}l.FeatureTest=Lt;const Ft=[...Array(256).keys()].map(At=>At.toString(16).padStart(2,"0"));class Mt{static makeHexColor(m,L,ct){return`#${Ft[m]}${Ft[L]}${Ft[ct]}`}static scaleMinMax(m,L){let ct;m[0]?(m[0]<0&&(ct=L[0],L[0]=L[1],L[1]=ct),L[0]*=m[0],L[1]*=m[0],m[3]<0&&(ct=L[2],L[2]=L[3],L[3]=ct),L[2]*=m[3],L[3]*=m[3]):(ct=L[0],L[0]=L[2],L[2]=ct,ct=L[1],L[1]=L[3],L[3]=ct,m[1]<0&&(ct=L[2],L[2]=L[3],L[3]=ct),L[2]*=m[1],L[3]*=m[1],m[2]<0&&(ct=L[0],L[0]=L[1],L[1]=ct),L[0]*=m[2],L[1]*=m[2]),L[0]+=m[4],L[1]+=m[4],L[2]+=m[5],L[3]+=m[5]}static transform(m,L){return[m[0]*L[0]+m[2]*L[1],m[1]*L[0]+m[3]*L[1],m[0]*L[2]+m[2]*L[3],m[1]*L[2]+m[3]*L[3],m[0]*L[4]+m[2]*L[5]+m[4],m[1]*L[4]+m[3]*L[5]+m[5]]}static applyTransform(m,L){const ct=m[0]*L[0]+m[1]*L[2]+L[4],st=m[0]*L[1]+m[1]*L[3]+L[5];return[ct,st]}static applyInverseTransform(m,L){const ct=L[0]*L[3]-L[1]*L[2],st=(m[0]*L[3]-m[1]*L[2]+L[2]*L[5]-L[4]*L[3])/ct,dt=(-m[0]*L[1]+m[1]*L[0]+L[4]*L[1]-L[5]*L[0])/ct;return[st,dt]}static getAxialAlignedBoundingBox(m,L){const ct=this.applyTransform(m,L),st=this.applyTransform(m.slice(2,4),L),dt=this.applyTransform([m[0],m[3]],L),_t=this.applyTransform([m[2],m[1]],L);return[Math.min(ct[0],st[0],dt[0],_t[0]),Math.min(ct[1],st[1],dt[1],_t[1]),Math.max(ct[0],st[0],dt[0],_t[0]),Math.max(ct[1],st[1],dt[1],_t[1])]}static inverseTransform(m){const L=m[0]*m[3]-m[1]*m[2];return[m[3]/L,-m[1]/L,-m[2]/L,m[0]/L,(m[2]*m[5]-m[4]*m[3])/L,(m[4]*m[1]-m[5]*m[0])/L]}static singularValueDecompose2dScale(m){const L=[m[0],m[2],m[1],m[3]],ct=m[0]*L[0]+m[1]*L[2],st=m[0]*L[1]+m[1]*L[3],dt=m[2]*L[0]+m[3]*L[2],_t=m[2]*L[1]+m[3]*L[3],U=(ct+_t)/2,ot=Math.sqrt((ct+_t)**2-4*(ct*_t-dt*st))/2,xt=U+ot||1,Et=U-ot||1;return[Math.sqrt(xt),Math.sqrt(Et)]}static normalizeRect(m){const L=m.slice(0);return m[0]>m[2]&&(L[0]=m[2],L[2]=m[0]),m[1]>m[3]&&(L[1]=m[3],L[3]=m[1]),L}static intersect(m,L){const ct=Math.max(Math.min(m[0],m[2]),Math.min(L[0],L[2])),st=Math.min(Math.max(m[0],m[2]),Math.max(L[0],L[2]));if(ct>st)return null;const dt=Math.max(Math.min(m[1],m[3]),Math.min(L[1],L[3])),_t=Math.min(Math.max(m[1],m[3]),Math.max(L[1],L[3]));return dt>_t?null:[ct,dt,st,_t]}static bezierBoundingBox(m,L,ct,st,dt,_t,U,ot){const xt=[],Et=[[],[]];let Dt,Ot,Wt,Ct,qt,Ut,q,r;for(let ut=0;ut<2;++ut){if(ut===0?(Ot=6*m-12*ct+6*dt,Dt=-3*m+9*ct-9*dt+3*U,Wt=3*ct-3*m):(Ot=6*L-12*st+6*_t,Dt=-3*L+9*st-9*_t+3*ot,Wt=3*st-3*L),Math.abs(Dt)<1e-12){if(Math.abs(Ot)<1e-12)continue;Ct=-Wt/Ot,0<Ct&&Ct<1&&xt.push(Ct);continue}q=Ot*Ot-4*Wt*Dt,r=Math.sqrt(q),!(q<0)&&(qt=(-Ot+r)/(2*Dt),0<qt&&qt<1&&xt.push(qt),Ut=(-Ot-r)/(2*Dt),0<Ut&&Ut<1&&xt.push(Ut))}let O=xt.length,z;const nt=O;for(;O--;)Ct=xt[O],z=1-Ct,Et[0][O]=z*z*z*m+3*z*z*Ct*ct+3*z*Ct*Ct*dt+Ct*Ct*Ct*U,Et[1][O]=z*z*z*L+3*z*z*Ct*st+3*z*Ct*Ct*_t+Ct*Ct*Ct*ot;return Et[0][nt]=m,Et[1][nt]=L,Et[0][nt+1]=U,Et[1][nt+1]=ot,Et[0].length=Et[1].length=nt+2,[Math.min(...Et[0]),Math.min(...Et[1]),Math.max(...Et[0]),Math.max(...Et[1])]}}l.Util=Mt;const ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function rt(At){if(At[0]>="ï"){let L;if(At[0]==="þ"&&At[1]==="ÿ"?L="utf-16be":At[0]==="ÿ"&&At[1]==="þ"?L="utf-16le":At[0]==="ï"&&At[1]==="»"&&At[2]==="¿"&&(L="utf-8"),L)try{const ct=new TextDecoder(L,{fatal:!0}),st=mt(At);return ct.decode(st)}catch(ct){G(`stringToPDFString: "${ct}".`)}}const m=[];for(let L=0,ct=At.length;L<ct;L++){const st=ht[At.charCodeAt(L)];m.push(st?String.fromCharCode(st):At.charAt(L))}return m.join("")}function J(At){return decodeURIComponent(escape(At))}function Q(At){return unescape(encodeURIComponent(At))}function gt(At){return typeof At=="object"&&(At==null?void 0:At.byteLength)!==void 0}function Tt(At,m){if(At.length!==m.length)return!1;for(let L=0,ct=At.length;L<ct;L++)if(At[L]!==m[L])return!1;return!0}function Rt(At=new Date){return[At.getUTCFullYear().toString(),(At.getUTCMonth()+1).toString().padStart(2,"0"),At.getUTCDate().toString().padStart(2,"0"),At.getUTCHours().toString().padStart(2,"0"),At.getUTCMinutes().toString().padStart(2,"0"),At.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bt{constructor(){R(this,Jt,!1);this.promise=new Promise((m,L)=>{this.resolve=ct=>{Y(this,Jt,!0),m(ct)},this.reject=ct=>{Y(this,Jt,!0),L(ct)}})}get settled(){return t(this,Jt)}}Jt=new WeakMap,l.PromiseCapability=Bt;let Vt=null,Gt=null;function zt(At){return Vt||(Vt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Gt=new Map([["ﬅ","ſt"]])),At.replaceAll(Vt,(m,L,ct)=>L?L.normalize("NFKC"):Gt.get(ct))}function Kt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const At=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(At);else for(let m=0;m<32;m++)At[m]=Math.floor(Math.random()*255);return tt(At)}const Xt="pdfjs_internal_id_";l.AnnotationPrefix=Xt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var yt,it,p,F,ue,H,Me,x,u,s,k,v,f,c,g,h,Le,C,_,Ke,i,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(b){if(typeof b=="string"||b instanceof URL?b={url:b}:(0,_util.isArrayBuffer)(b)&&(b={data:b}),typeof b!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:M}=o,w=b.url?getUrlProp(b.url):null,j=b.data?getDataProp(b.data):null,Z=b.httpHeaders||null,P=b.withCredentials===!0,$=b.password??null,K=b.range instanceof PDFDataRangeTransport?b.range:null,G=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let B=b.worker instanceof PDFWorker?b.worker:null;const at=b.verbosity,W=typeof b.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(b.docBaseUrl)?b.docBaseUrl:null,wt=typeof b.cMapUrl=="string"?b.cMapUrl:null,Pt=b.cMapPacked!==!1,D=b.CMapReaderFactory||DefaultCMapReaderFactory,n=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,d=b.StandardFontDataFactory||DefaultStandardFontDataFactory,a=b.stopAtErrors!==!0,A=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,T=b.isEvalSupported!==!1,N=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!_util.isNodeJS,X=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,tt=typeof b.disableFontFace=="boolean"?b.disableFontFace:_util.isNodeJS,mt=b.fontExtraProperties===!0,ft=b.enableXfa===!0,St=b.ownerDocument||globalThis.document,et=b.disableRange===!0,bt=b.disableStream===!0,pt=b.disableAutoFetch===!0,Lt=b.pdfBug===!0,Ft=K?K.length:b.length??NaN,Mt=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!_util.isNodeJS&&!tt,ht=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:D===_display_utils.DOMCMapReaderFactory&&d===_display_utils.DOMStandardFontDataFactory&&wt&&n&&(0,_display_utils.isValidFetchUrl)(wt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(n,document.baseURI),rt=b.canvasFactory||new DefaultCanvasFactory({ownerDocument:St}),J=b.filterFactory||new DefaultFilterFactory({docId:M,ownerDocument:St}),Q=null;(0,_util.setVerbosityLevel)(at);const gt={canvasFactory:rt,filterFactory:J};if(ht||(gt.cMapReaderFactory=new D({baseUrl:wt,isCompressed:Pt}),gt.standardFontDataFactory=new d({baseUrl:n})),!B){const Bt={verbosity:at,port:_worker_options.GlobalWorkerOptions.workerPort};B=Bt.port?PDFWorker.fromPort(Bt):new PDFWorker(Bt),o._worker=B}const Tt={docId:M,apiVersion:"3.11.174",data:j,password:$,disableAutoFetch:pt,rangeChunkSize:G,length:Ft,docBaseUrl:W,enableXfa:ft,evaluatorOptions:{maxImageSize:A,disableFontFace:tt,ignoreErrors:a,isEvalSupported:T,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:X,fontExtraProperties:mt,useSystemFonts:Mt,cMapUrl:ht?wt:null,standardFontDataUrl:ht?n:null}},Rt={ignoreErrors:a,isEvalSupported:T,disableFontFace:tt,fontExtraProperties:mt,enableXfa:ft,ownerDocument:St,disableAutoFetch:pt,pdfBug:Lt,styleElement:Q};return B.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const Bt=_fetchDocument(B,Tt),Vt=new Promise(function(Gt){let zt;K?zt=new _transport_stream.PDFDataTransportStream({length:Ft,initialData:K.initialData,progressiveDone:K.progressiveDone,contentDispositionFilename:K.contentDispositionFilename,disableRange:et,disableStream:bt},K):j||(zt=(Xt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Xt):(0,_display_utils.isValidFetchUrl)(Xt.url)?new _displayFetch_stream.PDFFetchStream(Xt):new _displayNetwork.PDFNetworkStream(Xt))({url:w,length:Ft,httpHeaders:Z,withCredentials:P,rangeChunkSize:G,disableRange:et,disableStream:bt})),Gt(zt)});return Promise.all([Bt,Vt]).then(function([Gt,zt]){if(o.destroyed)throw new Error("Loading aborted");const Kt=new _message_handler.MessageHandler(M,Gt,B.port),Xt=new WorkerTransport(Kt,o,zt,Rt,gt);o._transport=Xt,Kt.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(b,o){if(b.destroyed)throw new Error("Worker was destroyed");const M=await b.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(b.destroyed)throw new Error("Worker was destroyed");return M}function getUrlProp(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(_util.isNodeJS&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(b){if(_util.isNodeJS&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return(0,_util.stringToBytes)(b);if(typeof b=="object"&&!isNaN(b==null?void 0:b.length)||(0,_util.isArrayBuffer)(b))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const l=class l{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${de(l,yt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var o,M,w;this.destroyed=!0;try{(o=this._worker)!=null&&o.port&&(this._worker._pendingDestroy=!0),await((M=this._transport)==null?void 0:M.destroy())}catch(j){throw(w=this._worker)!=null&&w.port&&delete this._worker._pendingDestroy,j}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};yt=new WeakMap,R(l,yt,0);let PDFDocumentLoadingTask=l;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,M,w=!1,j=null){this.length=o,this.initialData=M,this.progressiveDone=w,this.contentDispositionFilename=j,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,M){for(const w of this._rangeListeners)w(o,M)}onDataProgress(o,M){this._readyCapability.promise.then(()=>{for(const w of this._progressListeners)w(o,M)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const M of this._progressiveReadListeners)M(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,M){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,M){this._pdfInfo=o,this._transport=M,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(w=>{if(!w)return w;const j=[];for(const Z in w)j.push(...w[Z]);return j}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,M,w,j=!1){R(this,F);R(this,H);R(this,it,null);R(this,p,!1);this._pageIndex=o,this._pageInfo=M,this._transport=w,this._stats=j?new _display_utils.StatTimer:null,this._pdfBug=j,this.commonObjs=w.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:M=this.rotate,offsetX:w=0,offsetY:j=0,dontFlip:Z=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:M,offsetX:w,offsetY:j,dontFlip:Z})}getAnnotations({intent:o="display"}={}){const M=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,M.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var o;return((o=this._transport._htmlForXfa)==null?void 0:o.children[this._pageIndex])||null}render({canvasContext:o,viewport:M,intent:w="display",annotationMode:j=_util.AnnotationMode.ENABLE,transform:Z=null,background:P=null,optionalContentConfigPromise:$=null,annotationCanvasMap:K=null,pageColors:G=null,printAnnotationStorage:B=null}){var d,a;(d=this._stats)==null||d.time("Overall");const at=this._transport.getRenderingIntent(w,j,B);Y(this,p,!1),V(this,H,Me).call(this),$||($=this._transport.getOptionalContentConfig());let W=this._intentStates.get(at.cacheKey);W||(W=Object.create(null),this._intentStates.set(at.cacheKey,W)),W.streamReaderCancelTimeout&&(clearTimeout(W.streamReaderCancelTimeout),W.streamReaderCancelTimeout=null);const wt=!!(at.renderingIntent&_util.RenderingIntentFlag.PRINT);W.displayReadyCapability||(W.displayReadyCapability=new _util.PromiseCapability,W.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(a=this._stats)==null||a.time("Page Request"),this._pumpOperatorList(at));const Pt=A=>{var T,N;W.renderTasks.delete(D),(this._maybeCleanupAfterRender||wt)&&Y(this,p,!0),V(this,F,ue).call(this,!wt),A?(D.capability.reject(A),this._abortOperatorList({intentState:W,reason:A instanceof Error?A:new Error(A)})):D.capability.resolve(),(T=this._stats)==null||T.timeEnd("Rendering"),(N=this._stats)==null||N.timeEnd("Overall")},D=new InternalRenderTask({callback:Pt,params:{canvasContext:o,viewport:M,transform:Z,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:K,operatorList:W.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!wt,pdfBug:this._pdfBug,pageColors:G});(W.renderTasks||(W.renderTasks=new Set)).add(D);const n=D.task;return Promise.all([W.displayReadyCapability.promise,$]).then(([A,T])=>{var N;if(this.destroyed){Pt();return}(N=this._stats)==null||N.time("Rendering"),D.initializeGraphics({transparency:A,optionalContentConfig:T}),D.operatorListChanged()}).catch(Pt),n}getOperatorList({intent:o="display",annotationMode:M=_util.AnnotationMode.ENABLE,printAnnotationStorage:w=null}={}){var K;function j(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete($))}const Z=this._transport.getRenderingIntent(o,M,w,!0);let P=this._intentStates.get(Z.cacheKey);P||(P=Object.create(null),this._intentStates.set(Z.cacheKey,P));let $;return P.opListReadCapability||($=Object.create(null),$.operatorListChanged=j,P.opListReadCapability=new _util.PromiseCapability,(P.renderTasks||(P.renderTasks=new Set)).add($),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(K=this._stats)==null||K.time("Page Request"),this._pumpOperatorList(Z)),P.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:M=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:M===!0},{highWaterMark:100,size(j){return j.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(w=>_xfa_text.XfaText.textContent(w));const M=this.streamTextContent(o);return new Promise(function(w,j){function Z(){P.read().then(function({value:K,done:G}){if(G){w($);return}Object.assign($.styles,K.styles),$.items.push(...K.items),Z()},j)}const P=M.getReader(),$={items:[],styles:Object.create(null)};Z()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const M of this._intentStates.values())if(this._abortOperatorList({intentState:M,reason:new Error("Page was destroyed."),force:!0}),!M.opListReadCapability)for(const w of M.renderTasks)o.push(w.completed),w.cancel();return this.objs.clear(),Y(this,p,!1),V(this,H,Me).call(this),Promise.all(o)}cleanup(o=!1){Y(this,p,!0);const M=V(this,F,ue).call(this,!1);return o&&M&&this._stats&&(this._stats=new _display_utils.StatTimer),M}_startRenderPage(o,M){var j,Z;const w=this._intentStates.get(M);w&&((j=this._stats)==null||j.timeEnd("Page Request"),(Z=w.displayReadyCapability)==null||Z.resolve(o))}_renderPageChunk(o,M){for(let w=0,j=o.length;w<j;w++)M.operatorList.fnArray.push(o.fnArray[w]),M.operatorList.argsArray.push(o.argsArray[w]);M.operatorList.lastChunk=o.lastChunk,M.operatorList.separateAnnots=o.separateAnnots;for(const w of M.renderTasks)w.operatorListChanged();o.lastChunk&&V(this,F,ue).call(this,!0)}_pumpOperatorList({renderingIntent:o,cacheKey:M,annotationStorageSerializable:w}){const{map:j,transfers:Z}=w,$=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:M,annotationStorage:j},Z).getReader(),K=this._intentStates.get(M);K.streamReader=$;const G=()=>{$.read().then(({value:B,done:at})=>{if(at){K.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(B,K),G())},B=>{if(K.streamReader=null,!this._transport.destroyed){if(K.operatorList){K.operatorList.lastChunk=!0;for(const at of K.renderTasks)at.operatorListChanged();V(this,F,ue).call(this,!0)}if(K.displayReadyCapability)K.displayReadyCapability.reject(B);else if(K.opListReadCapability)K.opListReadCapability.reject(B);else throw B}})};G()}_abortOperatorList({intentState:o,reason:M,force:w=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!w){if(o.renderTasks.size>0)return;if(M instanceof _display_utils.RenderingCancelledException){let j=RENDERING_CANCELLED_TIMEOUT;M.extraDelay>0&&M.extraDelay<1e3&&(j+=M.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:M,force:!0})},j);return}}if(o.streamReader.cancel(new _util.AbortException(M.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[j,Z]of this._intentStates)if(Z===o){this._intentStates.delete(j);break}this.cleanup()}}}get stats(){return this._stats}}it=new WeakMap,p=new WeakMap,F=new WeakSet,ue=function(o=!1){if(V(this,H,Me).call(this),!t(this,p)||this.destroyed)return!1;if(o)return Y(this,it,setTimeout(()=>{Y(this,it,null),V(this,F,ue).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:M,operatorList:w}of this._intentStates.values())if(M.size>0||!w.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Y(this,p,!1),!0},H=new WeakSet,Me=function(){t(this,it)&&(clearTimeout(t(this,it)),Y(this,it,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){R(this,x,new Set);R(this,u,Promise.resolve())}postMessage(o,M){const w={data:structuredClone(o,M?{transfer:M}:null)};t(this,u).then(()=>{for(const j of t(this,x))j.call(this,w)})}addEventListener(o,M){t(this,x).add(M)}removeEventListener(o,M){t(this,x).delete(M)}terminate(){t(this,x).clear()}}x=new WeakMap,u=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const b=(s=document==null?void 0:document.currentScript)==null?void 0:s.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(b,o){let M;try{if(M=new URL(b),!M.origin||M.origin==="null")return!1}catch{return!1}const w=new URL(o,M);return M.origin===w.origin},PDFWorkerUtil.createCDNWrapper=function(b){const o=`importScripts("${b}");`;return URL.createObjectURL(new Blob([o]))}}const _PDFWorker=class _PDFWorker{constructor({name:b=null,port:o=null,verbosity:M=(0,_util.getVerbosityLevel)()}={}){var w;if(this.name=b,this.destroyed=!1,this.verbosity=M,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){if((w=t(_PDFWorker,k))!=null&&w.has(o))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,k)||Y(_PDFWorker,k,new WeakMap)).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:b}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const o=new Worker(b),M=new _message_handler.MessageHandler("main","worker",o),w=()=>{o.removeEventListener("error",j),M.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},j=()=>{this._webWorker||w()};o.addEventListener("error",j),M.on("test",P=>{if(o.removeEventListener("error",j),this.destroyed){w();return}P?(this._messageHandler=M,this._port=o,this._webWorker=o,this._readyCapability.resolve(),M.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),M.destroy(),o.terminate())}),M.on("ready",P=>{if(o.removeEventListener("error",j),this.destroyed){w();return}try{Z()}catch{this._setupFakeWorker()}});const Z=()=>{const P=new Uint8Array;M.send("test",P,[P.buffer])};Z();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const M=`fake${PDFWorkerUtil.fakeWorkerId++}`,w=new _message_handler.MessageHandler(M+"_worker",M,o);b.setup(w,o);const j=new _message_handler.MessageHandler(M,M+"_worker",o);this._messageHandler=j,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){var b;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(b=t(_PDFWorker,k))==null||b.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){var M;if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const o=(M=t(this,k))==null?void 0:M.get(b.port);if(o){if(o._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return o}return new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};k=new WeakMap,R(_PDFWorker,k,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(o,M,w,j,Z){R(this,h);R(this,v,new Map);R(this,f,new Map);R(this,c,new Map);R(this,g,null);this.messageHandler=o,this.loadingTask=M,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:j.ownerDocument,styleElement:j.styleElement}),this._params=j,this.canvasFactory=Z.canvasFactory,this.filterFactory=Z.filterFactory,this.cMapReaderFactory=Z.cMapReaderFactory,this.standardFontDataFactory=Z.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=w,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,M=_util.AnnotationMode.ENABLE,w=null,j=!1){let Z=_util.RenderingIntentFlag.DISPLAY,P=_annotation_storage.SerializableEmpty;switch(o){case"any":Z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(M){case _util.AnnotationMode.DISABLE:Z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=(Z&_util.RenderingIntentFlag.PRINT&&w instanceof _annotation_storage.PrintAnnotationStorage?w:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${M}`)}return j&&(Z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Z,cacheKey:`${Z}_${P.hash}`,annotationStorageSerializable:P}}destroy(){var w;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(w=t(this,g))==null||w.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const j of t(this,f).values())o.push(j._destroy());t(this,f).clear(),t(this,c).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const M=this.messageHandler.sendWithPromise("Terminate",null);return o.push(M),Promise.all(o).then(()=>{var j;this.commonObjs.clear(),this.fontLoader.clear(),t(this,v).clear(),this.filterFactory.destroy(),(j=this._networkStream)==null||j.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:M}=this;o.on("GetReader",(w,j)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Z=>{this._lastProgress={loaded:Z.loaded,total:Z.total}},j.onPull=()=>{this._fullReader.read().then(function({value:Z,done:P}){if(P){j.close();return}(0,_util.assert)(Z instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),j.enqueue(new Uint8Array(Z),1,[Z])}).catch(Z=>{j.error(Z)})},j.onCancel=Z=>{this._fullReader.cancel(Z),j.ready.catch(P=>{if(!this.destroyed)throw P})}}),o.on("ReaderHeadersReady",w=>{const j=new _util.PromiseCapability,Z=this._fullReader;return Z.headersReady.then(()=>{var P;(!Z.isStreamingSupported||!Z.isRangeSupported)&&(this._lastProgress&&((P=M.onProgress)==null||P.call(M,this._lastProgress)),Z.onProgress=$=>{var K;(K=M.onProgress)==null||K.call(M,{loaded:$.loaded,total:$.total})}),j.resolve({isStreamingSupported:Z.isStreamingSupported,isRangeSupported:Z.isRangeSupported,contentLength:Z.contentLength})},j.reject),j.promise}),o.on("GetRangeReader",(w,j)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Z=this._networkStream.getRangeReader(w.begin,w.end);if(!Z){j.close();return}j.onPull=()=>{Z.read().then(function({value:P,done:$}){if($){j.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),j.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{j.error(P)})},j.onCancel=P=>{Z.cancel(P),j.ready.catch($=>{if(!this.destroyed)throw $})}}),o.on("GetDoc",({pdfInfo:w})=>{this._numPages=w.numPages,this._htmlForXfa=w.htmlForXfa,delete w.htmlForXfa,M._capability.resolve(new PDFDocumentProxy(w,this))}),o.on("DocException",function(w){let j;switch(w.name){case"PasswordException":j=new _util.PasswordException(w.message,w.code);break;case"InvalidPDFException":j=new _util.InvalidPDFException(w.message);break;case"MissingPDFException":j=new _util.MissingPDFException(w.message);break;case"UnexpectedResponseException":j=new _util.UnexpectedResponseException(w.message,w.status);break;case"UnknownErrorException":j=new _util.UnknownErrorException(w.message,w.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}M._capability.reject(j)}),o.on("PasswordRequest",w=>{if(Y(this,g,new _util.PromiseCapability),M.onPassword){const j=Z=>{Z instanceof Error?t(this,g).reject(Z):t(this,g).resolve({password:Z})};try{M.onPassword(j,w.code)}catch(Z){t(this,g).reject(Z)}}else t(this,g).reject(new _util.PasswordException(w.message,w.code));return t(this,g).promise}),o.on("DataLoaded",w=>{var j;(j=M.onProgress)==null||j.call(M,{loaded:w.length,total:w.length}),this.downloadInfoCapability.resolve(w)}),o.on("StartRenderPage",w=>{if(this.destroyed)return;t(this,f).get(w.pageIndex)._startRenderPage(w.transparency,w.cacheKey)}),o.on("commonobj",([w,j,Z])=>{var P;if(!this.destroyed&&!this.commonObjs.has(w))switch(j){case"Font":const $=this._params;if("error"in Z){const B=Z.error;(0,_util.warn)(`Error during font loading: ${B}`),this.commonObjs.resolve(w,B);break}const K=$.pdfBug&&((P=globalThis.FontInspector)!=null&&P.enabled)?(B,at)=>globalThis.FontInspector.fontAdded(B,at):null,G=new _font_loader.FontFaceObject(Z,{isEvalSupported:$.isEvalSupported,disableFontFace:$.disableFontFace,ignoreErrors:$.ignoreErrors,inspectFont:K});this.fontLoader.bind(G).catch(B=>o.sendWithPromise("FontFallback",{id:w})).finally(()=>{!$.fontExtraProperties&&G.data&&(G.data=null),this.commonObjs.resolve(w,G)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(w,Z);break;default:throw new Error(`Got unknown common object type ${j}`)}}),o.on("obj",([w,j,Z,P])=>{var K;if(this.destroyed)return;const $=t(this,f).get(j);if(!$.objs.has(w))switch(Z){case"Image":if($.objs.resolve(w,P),P){let G;if(P.bitmap){const{width:B,height:at}=P;G=B*at*4}else G=((K=P.data)==null?void 0:K.length)||0;G>_util.MAX_IMAGE_SIZE_TO_CACHE&&($._maybeCleanupAfterRender=!0)}break;case"Pattern":$.objs.resolve(w,P);break;default:throw new Error(`Got unknown object type ${Z}`)}}),o.on("DocProgress",w=>{var j;this.destroyed||(j=M.onProgress)==null||j.call(M,{loaded:w.loaded,total:w.total})}),o.on("FetchBuiltInCMap",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(w):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(w):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var w;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:M}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:((w=this._fullReader)==null?void 0:w.filename)??null},M).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const M=o-1,w=t(this,c).get(M);if(w)return w;const j=this.messageHandler.sendWithPromise("GetPage",{pageIndex:M}).then(Z=>{if(this.destroyed)throw new Error("Transport destroyed");const P=new PDFPageProxy(M,Z,this,this._params.pdfBug);return t(this,f).set(M,P),P});return t(this,c).set(M,j),j}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,M){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:M})}getFieldObjects(){return V(this,h,Le).call(this,"GetFieldObjects")}hasJSActions(){return V(this,h,Le).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return V(this,h,Le).call(this,"GetDocJSActions")}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",M=t(this,v).get(o);if(M)return M;const w=this.messageHandler.sendWithPromise(o,null).then(j=>{var Z,P;return{info:j[0],metadata:j[1]?new _metadata.Metadata(j[1]):null,contentDispositionFilename:((Z=this._fullReader)==null?void 0:Z.filename)??null,contentLength:((P=this._fullReader)==null?void 0:P.contentLength)??null}});return t(this,v).set(o,w),w}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const M of t(this,f).values())if(!M.cleanup())throw new Error(`startCleanup: Page ${M.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),t(this,v).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:M}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:M})}}v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakSet,Le=function(o,M=null){const w=t(this,v).get(o);if(w)return w;const j=this.messageHandler.sendWithPromise(o,M);return t(this,v).set(o,j),j};class PDFObjects{constructor(){R(this,_);R(this,C,Object.create(null))}get(o,M=null){if(M){const j=V(this,_,Ke).call(this,o);return j.capability.promise.then(()=>M(j.data)),null}const w=t(this,C)[o];if(!(w!=null&&w.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${o}.`);return w.data}has(o){const M=t(this,C)[o];return(M==null?void 0:M.capability.settled)||!1}resolve(o,M=null){const w=V(this,_,Ke).call(this,o);w.data=M,w.capability.resolve()}clear(){var o;for(const M in t(this,C)){const{data:w}=t(this,C)[M];(o=w==null?void 0:w.bitmap)==null||o.close()}Y(this,C,Object.create(null))}}C=new WeakMap,_=new WeakSet,Ke=function(o){var M;return(M=t(this,C))[o]||(M[o]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(o){R(this,i,null);Y(this,i,o),this.onContinue=null}get promise(){return t(this,i).capability.promise}cancel(o=0){t(this,i).cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=t(this,i).operatorList;if(!o)return!1;const{annotationCanvasMap:M}=t(this,i);return o.form||o.canvas&&(M==null?void 0:M.size)>0}}i=new WeakMap,exports.RenderTask=RenderTask;const E=class E{constructor({callback:o,params:M,objs:w,commonObjs:j,annotationCanvasMap:Z,operatorList:P,pageIndex:$,canvasFactory:K,filterFactory:G,useRequestAnimationFrame:B=!1,pdfBug:at=!1,pageColors:W=null}){this.callback=o,this.params=M,this.objs=w,this.commonObjs=j,this.annotationCanvasMap=Z,this.operatorListIdx=null,this.operatorList=P,this._pageIndex=$,this.canvasFactory=K,this.filterFactory=G,this._pdfBug=at,this.pageColors=W,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=B===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=M.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:M}){var $,K;if(this.cancelled)return;if(this._canvas){if(t(E,e).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(E,e).add(this._canvas)}this._pdfBug&&(($=globalThis.StepperManager)!=null&&$.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:w,viewport:j,transform:Z,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(w,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:M},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Z,viewport:j,transparency:o,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,(K=this.graphicsReadyCallback)==null||K.call(this)}cancel(o=null,M=0){var w;this.running=!1,this.cancelled=!0,(w=this.gfx)==null||w.endDrawing(),t(E,e).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,M))}operatorListChanged(){var o;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(o=this.stepper)==null||o.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(E,e).delete(this._canvas),this.callback())))}};e=new WeakMap,R(E,e,new WeakSet);let InternalRenderTask=E;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(yt,l,it)=>{var u,s,k,Zi,f;Object.defineProperty(l,"__esModule",{value:!0}),l.SerializableEmpty=l.PrintAnnotationStorage=l.AnnotationStorage=void 0;var p=it(1),F=it(4),lt=it(8);const H=Object.freeze({map:null,hash:"",transfers:void 0});l.SerializableEmpty=H;class I{constructor(){R(this,k);R(this,u,!1);R(this,s,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,h){const S=t(this,s).get(g);return S===void 0?h:Object.assign(h,S)}getRawValue(g){return t(this,s).get(g)}remove(g){if(t(this,s).delete(g),t(this,s).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const h of t(this,s).values())if(h instanceof F.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,h){const S=t(this,s).get(g);let C=!1;if(S!==void 0)for(const[_,y]of Object.entries(h))S[_]!==y&&(C=!0,S[_]=y);else C=!0,t(this,s).set(g,h);C&&V(this,k,Zi).call(this),h instanceof F.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(h.constructor._type)}has(g){return t(this,s).has(g)}getAll(){return t(this,s).size>0?(0,p.objectFromMap)(t(this,s)):null}setAll(g){for(const[h,S]of Object.entries(g))this.setValue(h,S)}get size(){return t(this,s).size}resetModified(){t(this,u)&&(Y(this,u,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new x(this)}get serializable(){if(t(this,s).size===0)return H;const g=new Map,h=new lt.MurmurHash3_64,S=[],C=Object.create(null);let _=!1;for(const[y,i]of t(this,s)){const e=i instanceof F.AnnotationEditor?i.serialize(!1,C):i;e&&(g.set(y,e),h.update(`${y}:${JSON.stringify(e)}`),_||(_=!!e.bitmap))}if(_)for(const y of g.values())y.bitmap&&S.push(y.bitmap);return g.size>0?{map:g,hash:h.hexdigest(),transfers:S}:H}}u=new WeakMap,s=new WeakMap,k=new WeakSet,Zi=function(){t(this,u)||(Y(this,u,!0),typeof this.onSetModified=="function"&&this.onSetModified())},l.AnnotationStorage=I;class x extends I{constructor(h){super();R(this,f,void 0);const{map:S,hash:C,transfers:_}=h.serializable,y=structuredClone(S,_?{transfer:_}:null);Y(this,f,{map:y,hash:C,transfers:_})}get print(){(0,p.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,f)}}f=new WeakMap,l.PrintAnnotationStorage=x},(yt,l,it)=>{var x,u,s,k,v,f,c,g,h,S,C,_,y,i,e,Qe,b,Je,M,Ze,j,ti,P,tn,K,en,B,nn,W,ei,Pt,sn;Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditor=void 0;var p=it(5),F=it(1),lt=it(6);const n=class n{constructor(a){R(this,e);R(this,b);R(this,j);R(this,P);R(this,K);R(this,B);R(this,W);R(this,Pt);R(this,x,"");R(this,u,!1);R(this,s,null);R(this,k,null);R(this,v,null);R(this,f,!1);R(this,c,null);R(this,g,this.focusin.bind(this));R(this,h,this.focusout.bind(this));R(this,S,!1);R(this,C,!1);R(this,_,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);R(this,y,!1);R(this,i,n._zIndex++);this.constructor===n&&(0,F.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:A,rawDims:{pageWidth:T,pageHeight:N,pageX:X,pageY:tt}}=this.parent.viewport;this.rotation=A,this.pageRotation=(360+A-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[T,N],this.pageTranslation=[X,tt];const[mt,ft]=this.parentDimensions;this.x=a.x/mt,this.y=a.y/ft,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,F.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){const A=new I({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});A.annotationElementId=a.annotationElementId,A.deleted=!0,A._uiManager.addToAnnotationStorage(A)}static initialize(a,A=null){if(n._l10nPromise||(n._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,a.get(N)]))),A!=null&&A.strings)for(const N of A.strings)n._l10nPromise.set(N,a.get(N));if(n._borderLineWidth!==-1)return;const T=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(T.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,A){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,A){(0,F.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,y)}set _isDraggable(a){var A;Y(this,y,a),(A=this.div)==null||A.classList.toggle("draggable",a)}center(){const[a,A]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*A/(a*2),this.y+=this.width*a/(A*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*A/(a*2),this.y-=this.width*a/(A*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,i)}setParent(a){a!==null&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this._focusEventsAllowed&&(t(this,S)?Y(this,S,!1):this.parent.setSelected(this))}focusout(a){var T;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const A=a.relatedTarget;A!=null&&A.closest(`#${this.id}`)||(a.preventDefault(),(T=this.parent)!=null&&T.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,A,T,N){const[X,tt]=this.parentDimensions;[T,N]=this.screenToPageTranslation(T,N),this.x=(a+T)/X,this.y=(A+N)/tt,this.fixAndSetPosition()}translate(a,A){V(this,e,Qe).call(this,this.parentDimensions,a,A)}translateInPage(a,A){V(this,e,Qe).call(this,this.pageDimensions,a,A),this.div.scrollIntoView({block:"nearest"})}drag(a,A){const[T,N]=this.parentDimensions;if(this.x+=a/T,this.y+=A/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:St,y:et}=this.div.getBoundingClientRect();this.parent.findNewParent(this,St,et)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:X,y:tt}=this;const[mt,ft]=V(this,b,Je).call(this);X+=mt,tt+=ft,this.div.style.left=`${(100*X).toFixed(2)}%`,this.div.style.top=`${(100*tt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[a,A]=this.pageDimensions;let{x:T,y:N,width:X,height:tt}=this;switch(X*=a,tt*=A,T*=a,N*=A,this.rotation){case 0:T=Math.max(0,Math.min(a-X,T)),N=Math.max(0,Math.min(A-tt,N));break;case 90:T=Math.max(0,Math.min(a-tt,T)),N=Math.min(A,Math.max(X,N));break;case 180:T=Math.min(a,Math.max(X,T)),N=Math.min(A,Math.max(tt,N));break;case 270:T=Math.min(a,Math.max(tt,T)),N=Math.max(0,Math.min(A-X,N));break}this.x=T/=a,this.y=N/=A;const[mt,ft]=V(this,b,Je).call(this);T+=mt,N+=ft;const{style:St}=this.div;St.left=`${(100*T).toFixed(2)}%`,St.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(a,A){var T;return V(T=n,M,Ze).call(T,a,A,this.parentRotation)}pageTranslationToScreen(a,A){var T;return V(T=n,M,Ze).call(T,a,A,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:a,pageDimensions:[A,T]}=this,N=A*a,X=T*a;return F.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(X)]:[N,X]}setDims(a,A){var X;const[T,N]=this.parentDimensions;this.div.style.width=`${(100*a/T).toFixed(2)}%`,t(this,f)||(this.div.style.height=`${(100*A/N).toFixed(2)}%`),(X=t(this,s))==null||X.classList.toggle("small",a<n.SMALL_EDITOR_SIZE||A<n.SMALL_EDITOR_SIZE)}fixDims(){const{style:a}=this.div,{height:A,width:T}=a,N=T.endsWith("%"),X=!t(this,f)&&A.endsWith("%");if(N&&X)return;const[tt,mt]=this.parentDimensions;N||(a.width=`${(100*parseFloat(T)/tt).toFixed(2)}%`),!t(this,f)&&!X&&(a.height=`${(100*parseFloat(A)/mt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,s))return;const a=Y(this,s,document.createElement("button"));a.className="altText";const A=await n._l10nPromise.get("editor_alt_text_button_label");a.textContent=A,a.setAttribute("aria-label",A),a.tabIndex="0",a.addEventListener("contextmenu",lt.noContextMenu),a.addEventListener("pointerdown",T=>T.stopPropagation()),a.addEventListener("click",T=>{T.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),a.addEventListener("keydown",T=>{T.target===a&&T.key==="Enter"&&(T.preventDefault(),this._uiManager.editAltText(this))}),V(this,W,ei).call(this),this.div.append(a),n.SMALL_EDITOR_SIZE||(n.SMALL_EDITOR_SIZE=Math.min(128,Math.round(a.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,x),decorative:t(this,u)}}set altTextData({altText:a,decorative:A}){t(this,x)===a&&t(this,u)===A||(Y(this,x,a),Y(this,u,A),V(this,W,ei).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,g)),this.div.addEventListener("focusout",t(this,h));const[a,A]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*A/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/A).toFixed(2)}%`);const[T,N]=this.getInitialTranslation();return this.translate(T,N),(0,p.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(a){const{isMac:A}=F.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&A){a.preventDefault();return}Y(this,S,!0),V(this,Pt,sn).call(this,a)}moveInDOM(){var a;(a=this.parent)==null||a.moveEditorInDOM(this)}_setParentAndPosition(a,A,T){a.changeParent(this),this.x=A,this.y=T,this.fixAndSetPosition()}getRect(a,A){const T=this.parentScale,[N,X]=this.pageDimensions,[tt,mt]=this.pageTranslation,ft=a/T,St=A/T,et=this.x*N,bt=this.y*X,pt=this.width*N,Lt=this.height*X;switch(this.rotation){case 0:return[et+ft+tt,X-bt-St-Lt+mt,et+ft+pt+tt,X-bt-St+mt];case 90:return[et+St+tt,X-bt+ft+mt,et+St+Lt+tt,X-bt+ft+pt+mt];case 180:return[et-ft-pt+tt,X-bt+St+mt,et-ft+tt,X-bt+St+Lt+mt];case 270:return[et-St-Lt+tt,X-bt-ft-pt+mt,et-St+tt,X-bt-ft+mt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,A){const[T,N,X,tt]=a,mt=X-T,ft=tt-N;switch(this.rotation){case 0:return[T,A-tt,mt,ft];case 90:return[T,A-N,ft,mt];case 180:return[X,A-N,mt,ft];case 270:return[X,A-tt,ft,mt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Y(this,_,!0)}disableEditMode(){Y(this,_,!1)}isInEditMode(){return t(this,_)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a,A;(a=this.div)==null||a.addEventListener("focusin",t(this,g)),(A=this.div)==null||A.addEventListener("focusout",t(this,h))}serialize(a=!1,A=null){(0,F.unreachable)("An editor must be serializable")}static deserialize(a,A,T){const N=new this.prototype.constructor({parent:A,id:A.getNextId(),uiManager:T});N.rotation=a.rotation;const[X,tt]=N.pageDimensions,[mt,ft,St,et]=N.getRectInCurrentCoords(a.rect,tt);return N.x=mt/X,N.y=ft/tt,N.width=St/X,N.height=et/tt,N}remove(){var a;this.div.removeEventListener("focusin",t(this,g)),this.div.removeEventListener("focusout",t(this,h)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(a=t(this,s))==null||a.remove(),Y(this,s,null),Y(this,k,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(V(this,P,tn).call(this),t(this,c).classList.remove("hidden"))}select(){var a;this.makeResizable(),(a=this.div)==null||a.classList.add("selectedEditor")}unselect(){var a,A,T;(a=t(this,c))==null||a.classList.add("hidden"),(A=this.div)==null||A.classList.remove("selectedEditor"),(T=this.div)!=null&&T.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(a,A){}disableEditing(){t(this,s)&&(t(this,s).hidden=!0)}enableEditing(){t(this,s)&&(t(this,s).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,C)}set isEditing(a){Y(this,C,a),this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,A){Y(this,f,!0);const T=a/A,{style:N}=this.div;N.aspectRatio=T,N.height="auto"}static get MIN_SIZE(){return 16}};x=new WeakMap,u=new WeakMap,s=new WeakMap,k=new WeakMap,v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakMap,S=new WeakMap,C=new WeakMap,_=new WeakMap,y=new WeakMap,i=new WeakMap,e=new WeakSet,Qe=function([a,A],T,N){[T,N]=this.screenToPageTranslation(T,N),this.x+=T/a,this.y+=N/A,this.fixAndSetPosition()},b=new WeakSet,Je=function(){const[a,A]=this.parentDimensions,{_borderLineWidth:T}=n,N=T/a,X=T/A;switch(this.rotation){case 90:return[-N,X];case 180:return[N,X];case 270:return[N,-X];default:return[-N,-X]}},M=new WeakSet,Ze=function(a,A,T){switch(T){case 90:return[A,-a];case 180:return[-a,-A];case 270:return[-A,a];default:return[a,A]}},j=new WeakSet,ti=function(a){switch(a){case 90:{const[A,T]=this.pageDimensions;return[0,-A/T,T/A,0]}case 180:return[-1,0,0,-1];case 270:{const[A,T]=this.pageDimensions;return[0,A/T,-T/A,0]}default:return[1,0,0,1]}},P=new WeakSet,tn=function(){if(t(this,c))return;Y(this,c,document.createElement("div")),t(this,c).classList.add("resizers");const a=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||a.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const A of a){const T=document.createElement("div");t(this,c).append(T),T.classList.add("resizer",A),T.addEventListener("pointerdown",V(this,K,en).bind(this,A)),T.addEventListener("contextmenu",lt.noContextMenu)}this.div.prepend(t(this,c))},K=new WeakSet,en=function(a,A){A.preventDefault();const{isMac:T}=F.FeatureTest.platform;if(A.button!==0||A.ctrlKey&&T)return;const N=V(this,B,nn).bind(this,a),X=this._isDraggable;this._isDraggable=!1;const tt={passive:!0,capture:!0};window.addEventListener("pointermove",N,tt);const mt=this.x,ft=this.y,St=this.width,et=this.height,bt=this.parent.div.style.cursor,pt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(A.target).cursor;const Lt=()=>{this._isDraggable=X,window.removeEventListener("pointerup",Lt),window.removeEventListener("blur",Lt),window.removeEventListener("pointermove",N,tt),this.parent.div.style.cursor=bt,this.div.style.cursor=pt;const Ft=this.x,Mt=this.y,ht=this.width,rt=this.height;Ft===mt&&Mt===ft&&ht===St&&rt===et||this.addCommands({cmd:()=>{this.width=ht,this.height=rt,this.x=Ft,this.y=Mt;const[J,Q]=this.parentDimensions;this.setDims(J*ht,Q*rt),this.fixAndSetPosition()},undo:()=>{this.width=St,this.height=et,this.x=mt,this.y=ft;const[J,Q]=this.parentDimensions;this.setDims(J*St,Q*et),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Lt),window.addEventListener("blur",Lt)},B=new WeakSet,nn=function(a,A){const[T,N]=this.parentDimensions,X=this.x,tt=this.y,mt=this.width,ft=this.height,St=n.MIN_SIZE/T,et=n.MIN_SIZE/N,bt=ct=>Math.round(ct*1e4)/1e4,pt=V(this,j,ti).call(this,this.rotation),Lt=(ct,st)=>[pt[0]*ct+pt[2]*st,pt[1]*ct+pt[3]*st],Ft=V(this,j,ti).call(this,360-this.rotation),Mt=(ct,st)=>[Ft[0]*ct+Ft[2]*st,Ft[1]*ct+Ft[3]*st];let ht,rt,J=!1,Q=!1;switch(a){case"topLeft":J=!0,ht=(ct,st)=>[0,0],rt=(ct,st)=>[ct,st];break;case"topMiddle":ht=(ct,st)=>[ct/2,0],rt=(ct,st)=>[ct/2,st];break;case"topRight":J=!0,ht=(ct,st)=>[ct,0],rt=(ct,st)=>[0,st];break;case"middleRight":Q=!0,ht=(ct,st)=>[ct,st/2],rt=(ct,st)=>[0,st/2];break;case"bottomRight":J=!0,ht=(ct,st)=>[ct,st],rt=(ct,st)=>[0,0];break;case"bottomMiddle":ht=(ct,st)=>[ct/2,st],rt=(ct,st)=>[ct/2,0];break;case"bottomLeft":J=!0,ht=(ct,st)=>[0,st],rt=(ct,st)=>[ct,0];break;case"middleLeft":Q=!0,ht=(ct,st)=>[0,st/2],rt=(ct,st)=>[ct,st/2];break}const gt=ht(mt,ft),Tt=rt(mt,ft);let Rt=Lt(...Tt);const Bt=bt(X+Rt[0]),Vt=bt(tt+Rt[1]);let Gt=1,zt=1,[Kt,Xt]=this.screenToPageTranslation(A.movementX,A.movementY);if([Kt,Xt]=Mt(Kt/T,Xt/N),J){const ct=Math.hypot(mt,ft);Gt=zt=Math.max(Math.min(Math.hypot(Tt[0]-gt[0]-Kt,Tt[1]-gt[1]-Xt)/ct,1/mt,1/ft),St/mt,et/ft)}else Q?Gt=Math.max(St,Math.min(1,Math.abs(Tt[0]-gt[0]-Kt)))/mt:zt=Math.max(et,Math.min(1,Math.abs(Tt[1]-gt[1]-Xt)))/ft;const Jt=bt(mt*Gt),At=bt(ft*zt);Rt=Lt(...rt(Jt,At));const m=Bt-Rt[0],L=Vt-Rt[1];this.width=Jt,this.height=At,this.x=m,this.y=L,this.setDims(T*Jt,N*At),this.fixAndSetPosition()},W=new WeakSet,ei=async function(){var T;const a=t(this,s);if(!a)return;if(!t(this,x)&&!t(this,u)){a.classList.remove("done"),(T=t(this,k))==null||T.remove();return}n._l10nPromise.get("editor_alt_text_edit_button_label").then(N=>{a.setAttribute("aria-label",N)});let A=t(this,k);if(!A){Y(this,k,A=document.createElement("span")),A.className="tooltip",A.setAttribute("role","tooltip");const N=A.id=`alt-text-tooltip-${this.id}`;a.setAttribute("aria-describedby",N);const X=100;a.addEventListener("mouseenter",()=>{Y(this,v,setTimeout(()=>{Y(this,v,null),t(this,k).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},X))}),a.addEventListener("mouseleave",()=>{var tt;clearTimeout(t(this,v)),Y(this,v,null),(tt=t(this,k))==null||tt.classList.remove("show")})}a.classList.add("done"),A.innerText=t(this,u)?await n._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,x),A.parentNode||a.append(A)},Pt=new WeakSet,sn=function(a){if(!this._isDraggable)return;const A=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let T,N;A&&(T={passive:!0,capture:!0},N=tt=>{const[mt,ft]=this.screenToPageTranslation(tt.movementX,tt.movementY);this._uiManager.dragSelectedEditors(mt,ft)},window.addEventListener("pointermove",N,T));const X=()=>{if(window.removeEventListener("pointerup",X),window.removeEventListener("blur",X),A&&window.removeEventListener("pointermove",N,T),Y(this,S,!1),!this._uiManager.endDragSession()){const{isMac:tt}=F.FeatureTest.platform;a.ctrlKey&&!tt||a.shiftKey||a.metaKey&&tt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",X),window.addEventListener("blur",X)},R(n,M),ee(n,"_borderLineWidth",-1),ee(n,"_colorManager",new p.ColorManager),ee(n,"_zIndex",1),ee(n,"SMALL_EDITOR_SIZE",0);let H=n;l.AnnotationEditor=H;class I extends H{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(yt,l,it)=>{var f,c,g,h,S,ii,y,i,e,E,b,rn,w,j,Z,P,$,K,G,B,at,W,wt,Pt,D,n,d,a,A,T,N,X,tt,mt,ft,St,et,bt,pt,Lt,Ft,Mt,ht,rt,J,Q,gt,an,Rt,ni,Vt,si,zt,Re,Xt,ri,At,ai,L,re,st,be,_t,on,ot,ln,Et,oi,Ot,ve,Ct,li;Object.defineProperty(l,"__esModule",{value:!0}),l.KeyboardManager=l.CommandManager=l.ColorManager=l.AnnotationEditorUIManager=void 0,l.bindEvents=lt,l.opacityToHex=H;var p=it(1),F=it(6);function lt(q,r,O){for(const z of O)r.addEventListener(z,q[z].bind(q))}function H(q){return Math.round(Math.min(255,Math.max(1,255*q))).toString(16).padStart(2,"0")}class I{constructor(){R(this,f,0)}getId(){return`${p.AnnotationEditorPrefix}${de(this,f)._++}`}}f=new WeakMap;const _=class _{constructor(){R(this,S);R(this,c,(0,p.getUuid)());R(this,g,0);R(this,h,null)}static get _isSVGFittingCanvas(){const r='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',z=new OffscreenCanvas(1,3).getContext("2d"),nt=new Image;nt.src=r;const ut=nt.decode().then(()=>(z.drawImage(nt,0,0,1,1,0,0,1,3),new Uint32Array(z.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,p.shadow)(this,"_isSVGFittingCanvas",ut)}async getFromFile(r){const{lastModified:O,name:z,size:nt,type:ut}=r;return V(this,S,ii).call(this,`${O}_${z}_${nt}_${ut}`,r)}async getFromUrl(r){return V(this,S,ii).call(this,r,r)}async getFromId(r){t(this,h)||Y(this,h,new Map);const O=t(this,h).get(r);return O?O.bitmap?(O.refCounter+=1,O):O.file?this.getFromFile(O.file):this.getFromUrl(O.url):null}getSvgUrl(r){const O=t(this,h).get(r);return O!=null&&O.isSvg?O.svgUrl:null}deleteId(r){t(this,h)||Y(this,h,new Map);const O=t(this,h).get(r);O&&(O.refCounter-=1,O.refCounter===0&&(O.bitmap=null))}isValidId(r){return r.startsWith(`image_${t(this,c)}_`)}};c=new WeakMap,g=new WeakMap,h=new WeakMap,S=new WeakSet,ii=async function(r,O){t(this,h)||Y(this,h,new Map);let z=t(this,h).get(r);if(z===null)return null;if(z!=null&&z.bitmap)return z.refCounter+=1,z;try{z||(z={bitmap:null,id:`image_${t(this,c)}_${de(this,g)._++}`,refCounter:0,isSvg:!1});let nt;if(typeof O=="string"){z.url=O;const ut=await fetch(O);if(!ut.ok)throw new Error(ut.statusText);nt=await ut.blob()}else nt=z.file=O;if(nt.type==="image/svg+xml"){const ut=_._isSVGFittingCanvas,vt=new FileReader,kt=new Image,Nt=new Promise((It,Qt)=>{kt.onload=()=>{z.bitmap=kt,z.isSvg=!0,It()},vt.onload=async()=>{const Ht=z.svgUrl=vt.result;kt.src=await ut?`${Ht}#svgView(preserveAspectRatio(none))`:Ht},kt.onerror=vt.onerror=Qt});vt.readAsDataURL(nt),await Nt}else z.bitmap=await createImageBitmap(nt);z.refCounter=1}catch(nt){console.error(nt),z=null}return t(this,h).set(r,z),z&&t(this,h).set(z.id,z),z};let x=_;class u{constructor(r=128){R(this,y,[]);R(this,i,!1);R(this,e,void 0);R(this,E,-1);Y(this,e,r)}add({cmd:r,undo:O,mustExec:z,type:nt=NaN,overwriteIfSameType:ut=!1,keepUndo:vt=!1}){if(z&&r(),t(this,i))return;const kt={cmd:r,undo:O,type:nt};if(t(this,E)===-1){t(this,y).length>0&&(t(this,y).length=0),Y(this,E,0),t(this,y).push(kt);return}if(ut&&t(this,y)[t(this,E)].type===nt){vt&&(kt.undo=t(this,y)[t(this,E)].undo),t(this,y)[t(this,E)]=kt;return}const Nt=t(this,E)+1;Nt===t(this,e)?t(this,y).splice(0,1):(Y(this,E,Nt),Nt<t(this,y).length&&t(this,y).splice(Nt)),t(this,y).push(kt)}undo(){t(this,E)!==-1&&(Y(this,i,!0),t(this,y)[t(this,E)].undo(),Y(this,i,!1),Y(this,E,t(this,E)-1))}redo(){t(this,E)<t(this,y).length-1&&(Y(this,E,t(this,E)+1),Y(this,i,!0),t(this,y)[t(this,E)].cmd(),Y(this,i,!1))}hasSomethingToUndo(){return t(this,E)!==-1}hasSomethingToRedo(){return t(this,E)<t(this,y).length-1}destroy(){Y(this,y,null)}}y=new WeakMap,i=new WeakMap,e=new WeakMap,E=new WeakMap,l.CommandManager=u;class s{constructor(r){R(this,b);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:O}=p.FeatureTest.platform;for(const[z,nt,ut={}]of r)for(const vt of z){const kt=vt.startsWith("mac+");O&&kt?(this.callbacks.set(vt.slice(4),{callback:nt,options:ut}),this.allKeys.add(vt.split("+").at(-1))):!O&&!kt&&(this.callbacks.set(vt,{callback:nt,options:ut}),this.allKeys.add(vt.split("+").at(-1)))}}exec(r,O){if(!this.allKeys.has(O.key))return;const z=this.callbacks.get(V(this,b,rn).call(this,O));if(!z)return;const{callback:nt,options:{bubbles:ut=!1,args:vt=[],checker:kt=null}}=z;kt&&!kt(r,O)||(nt.bind(r,...vt)(),ut||(O.stopPropagation(),O.preventDefault()))}}b=new WeakSet,rn=function(r){r.altKey&&this.buffer.push("alt"),r.ctrlKey&&this.buffer.push("ctrl"),r.metaKey&&this.buffer.push("meta"),r.shiftKey&&this.buffer.push("shift"),this.buffer.push(r.key);const O=this.buffer.join("+");return this.buffer.length=0,O},l.KeyboardManager=s;const M=class M{get _colors(){const r=new Map([["CanvasText",null],["Canvas",null]]);return(0,F.getColorValues)(r),(0,p.shadow)(this,"_colors",r)}convert(r){const O=(0,F.getRGB)(r);if(!window.matchMedia("(forced-colors: active)").matches)return O;for(const[z,nt]of this._colors)if(nt.every((ut,vt)=>ut===O[vt]))return M._colorsMapping.get(z);return O}getHexCode(r){const O=this._colors.get(r);return O?p.Util.makeHexColor(...O):r}};ee(M,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let k=M;l.ColorManager=k;const Ut=class Ut{constructor(r,O,z,nt,ut,vt){R(this,gt);R(this,Rt);R(this,Vt);R(this,zt);R(this,Xt);R(this,At);R(this,L);R(this,st);R(this,_t);R(this,ot);R(this,Et);R(this,Ot);R(this,Ct);R(this,w,null);R(this,j,new Map);R(this,Z,new Map);R(this,P,null);R(this,$,null);R(this,K,new u);R(this,G,0);R(this,B,new Set);R(this,at,null);R(this,W,null);R(this,wt,new Set);R(this,Pt,null);R(this,D,new I);R(this,n,!1);R(this,d,!1);R(this,a,null);R(this,A,p.AnnotationEditorType.NONE);R(this,T,new Set);R(this,N,null);R(this,X,this.blur.bind(this));R(this,tt,this.focus.bind(this));R(this,mt,this.copy.bind(this));R(this,ft,this.cut.bind(this));R(this,St,this.paste.bind(this));R(this,et,this.keydown.bind(this));R(this,bt,this.onEditingAction.bind(this));R(this,pt,this.onPageChanging.bind(this));R(this,Lt,this.onScaleChanging.bind(this));R(this,Ft,this.onRotationChanging.bind(this));R(this,Mt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});R(this,ht,[0,0]);R(this,rt,null);R(this,J,null);R(this,Q,null);Y(this,J,r),Y(this,Q,O),Y(this,P,z),this._eventBus=nt,this._eventBus._on("editingaction",t(this,bt)),this._eventBus._on("pagechanging",t(this,pt)),this._eventBus._on("scalechanging",t(this,Lt)),this._eventBus._on("rotationchanging",t(this,Ft)),Y(this,$,ut.annotationStorage),Y(this,Pt,ut.filterFactory),Y(this,N,vt),this.viewParameters={realScale:F.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const r=Ut.prototype,O=ut=>{const{activeElement:vt}=document;return vt&&t(ut,J).contains(vt)&&ut.hasSomethingToControl()},z=this.TRANSLATE_SMALL,nt=this.TRANSLATE_BIG;return(0,p.shadow)(this,"_keyboardManager",new s([[["ctrl+a","mac+meta+a"],r.selectAll],[["ctrl+z","mac+meta+z"],r.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],r.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],r.delete],[["Escape","mac+Escape"],r.unselectAll],[["ArrowLeft","mac+ArrowLeft"],r.translateSelectedEditors,{args:[-z,0],checker:O}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r.translateSelectedEditors,{args:[-nt,0],checker:O}],[["ArrowRight","mac+ArrowRight"],r.translateSelectedEditors,{args:[z,0],checker:O}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r.translateSelectedEditors,{args:[nt,0],checker:O}],[["ArrowUp","mac+ArrowUp"],r.translateSelectedEditors,{args:[0,-z],checker:O}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r.translateSelectedEditors,{args:[0,-nt],checker:O}],[["ArrowDown","mac+ArrowDown"],r.translateSelectedEditors,{args:[0,z],checker:O}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r.translateSelectedEditors,{args:[0,nt],checker:O}]]))}destroy(){V(this,zt,Re).call(this),V(this,Rt,ni).call(this),this._eventBus._off("editingaction",t(this,bt)),this._eventBus._off("pagechanging",t(this,pt)),this._eventBus._off("scalechanging",t(this,Lt)),this._eventBus._off("rotationchanging",t(this,Ft));for(const r of t(this,Z).values())r.destroy();t(this,Z).clear(),t(this,j).clear(),t(this,wt).clear(),Y(this,w,null),t(this,T).clear(),t(this,K).destroy(),t(this,P).destroy()}get hcmFilter(){return(0,p.shadow)(this,"hcmFilter",t(this,N)?t(this,Pt).addHCMFilter(t(this,N).foreground,t(this,N).background):"none")}get direction(){return(0,p.shadow)(this,"direction",getComputedStyle(t(this,J)).direction)}editAltText(r){var O;(O=t(this,P))==null||O.editAltText(this,r)}onPageChanging({pageNumber:r}){Y(this,G,r-1)}focusMainContainer(){t(this,J).focus()}findParent(r,O){for(const z of t(this,Z).values()){const{x:nt,y:ut,width:vt,height:kt}=z.div.getBoundingClientRect();if(r>=nt&&r<=nt+vt&&O>=ut&&O<=ut+kt)return z}return null}disableUserSelect(r=!1){t(this,Q).classList.toggle("noUserSelect",r)}addShouldRescale(r){t(this,wt).add(r)}removeShouldRescale(r){t(this,wt).delete(r)}onScaleChanging({scale:r}){this.commitOrRemove(),this.viewParameters.realScale=r*F.PixelsPerInch.PDF_TO_CSS_UNITS;for(const O of t(this,wt))O.onScaleChanging()}onRotationChanging({pagesRotation:r}){this.commitOrRemove(),this.viewParameters.rotation=r}addToAnnotationStorage(r){!r.isEmpty()&&t(this,$)&&!t(this,$).has(r.id)&&t(this,$).setValue(r.id,r)}blur(){if(!this.hasSelection)return;const{activeElement:r}=document;for(const O of t(this,T))if(O.div.contains(r)){Y(this,a,[O,r]),O._focusEventsAllowed=!1;break}}focus(){if(!t(this,a))return;const[r,O]=t(this,a);Y(this,a,null),O.addEventListener("focusin",()=>{r._focusEventsAllowed=!0},{once:!0}),O.focus()}addEditListeners(){V(this,Vt,si).call(this),V(this,Xt,ri).call(this)}removeEditListeners(){V(this,zt,Re).call(this),V(this,At,ai).call(this)}copy(r){var z;if(r.preventDefault(),(z=t(this,w))==null||z.commitOrRemove(),!this.hasSelection)return;const O=[];for(const nt of t(this,T)){const ut=nt.serialize(!0);ut&&O.push(ut)}O.length!==0&&r.clipboardData.setData("application/pdfjs",JSON.stringify(O))}cut(r){this.copy(r),this.delete()}paste(r){r.preventDefault();const{clipboardData:O}=r;for(const ut of O.items)for(const vt of t(this,W))if(vt.isHandlingMimeForPasting(ut.type)){vt.paste(ut,this.currentLayer);return}let z=O.getData("application/pdfjs");if(!z)return;try{z=JSON.parse(z)}catch(ut){(0,p.warn)(`paste: "${ut.message}".`);return}if(!Array.isArray(z))return;this.unselectAll();const nt=this.currentLayer;try{const ut=[];for(const Nt of z){const It=nt.deserialize(Nt);if(!It)return;ut.push(It)}const vt=()=>{for(const Nt of ut)V(this,Et,oi).call(this,Nt);V(this,Ct,li).call(this,ut)},kt=()=>{for(const Nt of ut)Nt.remove()};this.addCommands({cmd:vt,undo:kt,mustExec:!0})}catch(ut){(0,p.warn)(`paste: "${ut.message}".`)}}keydown(r){var O;(O=this.getActive())!=null&&O.shouldGetKeyboardEvents()||Ut._keyboardManager.exec(this,r)}onEditingAction(r){["undo","redo","delete","selectAll"].includes(r.name)&&this[r.name]()}setEditingState(r){r?(V(this,gt,an).call(this),V(this,Vt,si).call(this),V(this,Xt,ri).call(this),V(this,L,re).call(this,{isEditing:t(this,A)!==p.AnnotationEditorType.NONE,isEmpty:V(this,Ot,ve).call(this),hasSomethingToUndo:t(this,K).hasSomethingToUndo(),hasSomethingToRedo:t(this,K).hasSomethingToRedo(),hasSelectedEditor:!1})):(V(this,Rt,ni).call(this),V(this,zt,Re).call(this),V(this,At,ai).call(this),V(this,L,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(r){if(!t(this,W)){Y(this,W,r);for(const O of t(this,W))V(this,st,be).call(this,O.defaultPropertiesToUpdate)}}getId(){return t(this,D).getId()}get currentLayer(){return t(this,Z).get(t(this,G))}getLayer(r){return t(this,Z).get(r)}get currentPageIndex(){return t(this,G)}addLayer(r){t(this,Z).set(r.pageIndex,r),t(this,n)?r.enable():r.disable()}removeLayer(r){t(this,Z).delete(r.pageIndex)}updateMode(r,O=null){if(t(this,A)!==r){if(Y(this,A,r),r===p.AnnotationEditorType.NONE){this.setEditingState(!1),V(this,ot,ln).call(this);return}this.setEditingState(!0),V(this,_t,on).call(this),this.unselectAll();for(const z of t(this,Z).values())z.updateMode(r);if(O){for(const z of t(this,j).values())if(z.annotationElementId===O){this.setSelected(z),z.enterInEditMode();break}}}}updateToolbar(r){r!==t(this,A)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:r})}updateParams(r,O){if(t(this,W)){if(r===p.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(r);return}for(const z of t(this,T))z.updateParams(r,O);for(const z of t(this,W))z.updateDefaultParams(r,O)}}enableWaiting(r=!1){if(t(this,d)!==r){Y(this,d,r);for(const O of t(this,Z).values())r?O.disableClick():O.enableClick(),O.div.classList.toggle("waiting",r)}}getEditors(r){const O=[];for(const z of t(this,j).values())z.pageIndex===r&&O.push(z);return O}getEditor(r){return t(this,j).get(r)}addEditor(r){t(this,j).set(r.id,r)}removeEditor(r){var O;t(this,j).delete(r.id),this.unselect(r),(!r.annotationElementId||!t(this,B).has(r.annotationElementId))&&((O=t(this,$))==null||O.remove(r.id))}addDeletedAnnotationElement(r){t(this,B).add(r.annotationElementId),r.deleted=!0}isDeletedAnnotationElement(r){return t(this,B).has(r)}removeDeletedAnnotationElement(r){t(this,B).delete(r.annotationElementId),r.deleted=!1}setActiveEditor(r){t(this,w)!==r&&(Y(this,w,r),r&&V(this,st,be).call(this,r.propertiesToUpdate))}toggleSelected(r){if(t(this,T).has(r)){t(this,T).delete(r),r.unselect(),V(this,L,re).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,T).add(r),r.select(),V(this,st,be).call(this,r.propertiesToUpdate),V(this,L,re).call(this,{hasSelectedEditor:!0})}setSelected(r){for(const O of t(this,T))O!==r&&O.unselect();t(this,T).clear(),t(this,T).add(r),r.select(),V(this,st,be).call(this,r.propertiesToUpdate),V(this,L,re).call(this,{hasSelectedEditor:!0})}isSelected(r){return t(this,T).has(r)}unselect(r){r.unselect(),t(this,T).delete(r),V(this,L,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,T).size!==0}undo(){t(this,K).undo(),V(this,L,re).call(this,{hasSomethingToUndo:t(this,K).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:V(this,Ot,ve).call(this)})}redo(){t(this,K).redo(),V(this,L,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,K).hasSomethingToRedo(),isEmpty:V(this,Ot,ve).call(this)})}addCommands(r){t(this,K).add(r),V(this,L,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:V(this,Ot,ve).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const r=[...t(this,T)],O=()=>{for(const nt of r)nt.remove()},z=()=>{for(const nt of r)V(this,Et,oi).call(this,nt)};this.addCommands({cmd:O,undo:z,mustExec:!0})}commitOrRemove(){var r;(r=t(this,w))==null||r.commitOrRemove()}hasSomethingToControl(){return t(this,w)||this.hasSelection}selectAll(){for(const r of t(this,T))r.commit();V(this,Ct,li).call(this,t(this,j).values())}unselectAll(){if(t(this,w)){t(this,w).commitOrRemove();return}if(this.hasSelection){for(const r of t(this,T))r.unselect();t(this,T).clear(),V(this,L,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(r,O,z=!1){if(z||this.commitOrRemove(),!this.hasSelection)return;t(this,ht)[0]+=r,t(this,ht)[1]+=O;const[nt,ut]=t(this,ht),vt=[...t(this,T)],kt=1e3;t(this,rt)&&clearTimeout(t(this,rt)),Y(this,rt,setTimeout(()=>{Y(this,rt,null),t(this,ht)[0]=t(this,ht)[1]=0,this.addCommands({cmd:()=>{for(const Nt of vt)t(this,j).has(Nt.id)&&Nt.translateInPage(nt,ut)},undo:()=>{for(const Nt of vt)t(this,j).has(Nt.id)&&Nt.translateInPage(-nt,-ut)},mustExec:!1})},kt));for(const Nt of vt)Nt.translateInPage(r,O)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Y(this,at,new Map);for(const r of t(this,T))t(this,at).set(r,{savedX:r.x,savedY:r.y,savedPageIndex:r.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,at))return!1;this.disableUserSelect(!1);const r=t(this,at);Y(this,at,null);let O=!1;for(const[{x:nt,y:ut,pageIndex:vt},kt]of r)kt.newX=nt,kt.newY=ut,kt.newPageIndex=vt,O||(O=nt!==kt.savedX||ut!==kt.savedY||vt!==kt.savedPageIndex);if(!O)return!1;const z=(nt,ut,vt,kt)=>{if(t(this,j).has(nt.id)){const Nt=t(this,Z).get(kt);Nt?nt._setParentAndPosition(Nt,ut,vt):(nt.pageIndex=kt,nt.x=ut,nt.y=vt)}};return this.addCommands({cmd:()=>{for(const[nt,{newX:ut,newY:vt,newPageIndex:kt}]of r)z(nt,ut,vt,kt)},undo:()=>{for(const[nt,{savedX:ut,savedY:vt,savedPageIndex:kt}]of r)z(nt,ut,vt,kt)},mustExec:!0}),!0}dragSelectedEditors(r,O){if(t(this,at))for(const z of t(this,at).keys())z.drag(r,O)}rebuild(r){if(r.parent===null){const O=this.getLayer(r.pageIndex);O?(O.changeParent(r),O.addOrRebuild(r)):(this.addEditor(r),this.addToAnnotationStorage(r),r.rebuild())}else r.parent.addOrRebuild(r)}isActive(r){return t(this,w)===r}getActive(){return t(this,w)}getMode(){return t(this,A)}get imageManager(){return(0,p.shadow)(this,"imageManager",new x)}};w=new WeakMap,j=new WeakMap,Z=new WeakMap,P=new WeakMap,$=new WeakMap,K=new WeakMap,G=new WeakMap,B=new WeakMap,at=new WeakMap,W=new WeakMap,wt=new WeakMap,Pt=new WeakMap,D=new WeakMap,n=new WeakMap,d=new WeakMap,a=new WeakMap,A=new WeakMap,T=new WeakMap,N=new WeakMap,X=new WeakMap,tt=new WeakMap,mt=new WeakMap,ft=new WeakMap,St=new WeakMap,et=new WeakMap,bt=new WeakMap,pt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Mt=new WeakMap,ht=new WeakMap,rt=new WeakMap,J=new WeakMap,Q=new WeakMap,gt=new WeakSet,an=function(){window.addEventListener("focus",t(this,tt)),window.addEventListener("blur",t(this,X))},Rt=new WeakSet,ni=function(){window.removeEventListener("focus",t(this,tt)),window.removeEventListener("blur",t(this,X))},Vt=new WeakSet,si=function(){window.addEventListener("keydown",t(this,et),{capture:!0})},zt=new WeakSet,Re=function(){window.removeEventListener("keydown",t(this,et),{capture:!0})},Xt=new WeakSet,ri=function(){document.addEventListener("copy",t(this,mt)),document.addEventListener("cut",t(this,ft)),document.addEventListener("paste",t(this,St))},At=new WeakSet,ai=function(){document.removeEventListener("copy",t(this,mt)),document.removeEventListener("cut",t(this,ft)),document.removeEventListener("paste",t(this,St))},L=new WeakSet,re=function(r){Object.entries(r).some(([z,nt])=>t(this,Mt)[z]!==nt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,Mt),r)})},st=new WeakSet,be=function(r){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:r})},_t=new WeakSet,on=function(){if(!t(this,n)){Y(this,n,!0);for(const r of t(this,Z).values())r.enable()}},ot=new WeakSet,ln=function(){if(this.unselectAll(),t(this,n)){Y(this,n,!1);for(const r of t(this,Z).values())r.disable()}},Et=new WeakSet,oi=function(r){const O=t(this,Z).get(r.pageIndex);O?O.addOrRebuild(r):this.addEditor(r)},Ot=new WeakSet,ve=function(){if(t(this,j).size===0)return!0;if(t(this,j).size===1)for(const r of t(this,j).values())return r.isEmpty();return!1},Ct=new WeakSet,li=function(r){t(this,T).clear();for(const O of r)O.isEmpty()||(t(this,T).add(O),O.select());V(this,L,re).call(this,{hasSelectedEditor:!0})},ee(Ut,"TRANSLATE_SMALL",1),ee(Ut,"TRANSLATE_BIG",10);let v=Ut;l.AnnotationEditorUIManager=v},(yt,l,it)=>{var G,B,at,W,wt,Pt,D,n,d,a,A,T,fe,X,pe,mt,ci,St,ke,bt,Fe,Lt,ye,Mt,Ae;Object.defineProperty(l,"__esModule",{value:!0}),l.StatTimer=l.RenderingCancelledException=l.PixelsPerInch=l.PageViewport=l.PDFDateString=l.DOMStandardFontDataFactory=l.DOMSVGFactory=l.DOMFilterFactory=l.DOMCanvasFactory=l.DOMCMapReaderFactory=void 0,l.deprecated=E,l.getColorValues=j,l.getCurrentTransform=Z,l.getCurrentTransformInverse=P,l.getFilenameFromUrl=S,l.getPdfFilenameFromUrl=C,l.getRGB=w,l.getXfaPageViewport=M,l.isDataScheme=g,l.isPdfFile=h,l.isValidFetchUrl=y,l.loadScript=e,l.noContextMenu=i,l.setLayerDimensions=$;var p=it(7),F=it(1);const lt="http://www.w3.org/2000/svg",K=class K{};ee(K,"CSS",96),ee(K,"PDF",72),ee(K,"PDF_TO_CSS_UNITS",K.CSS/K.PDF);let H=K;l.PixelsPerInch=H;class I extends p.BaseFilterFactory{constructor({docId:Q,ownerDocument:gt=globalThis.document}={}){super();R(this,T);R(this,X);R(this,mt);R(this,St);R(this,bt);R(this,Lt);R(this,Mt);R(this,G,void 0);R(this,B,void 0);R(this,at,void 0);R(this,W,void 0);R(this,wt,void 0);R(this,Pt,void 0);R(this,D,void 0);R(this,n,void 0);R(this,d,void 0);R(this,a,void 0);R(this,A,0);Y(this,at,Q),Y(this,W,gt)}addFilter(Q){if(!Q)return"none";let gt=t(this,T,fe).get(Q);if(gt)return gt;let Tt,Rt,Bt,Vt;if(Q.length===1){const Xt=Q[0],Jt=new Array(256);for(let At=0;At<256;At++)Jt[At]=Xt[At]/255;Vt=Tt=Rt=Bt=Jt.join(",")}else{const[Xt,Jt,At]=Q,m=new Array(256),L=new Array(256),ct=new Array(256);for(let st=0;st<256;st++)m[st]=Xt[st]/255,L[st]=Jt[st]/255,ct[st]=At[st]/255;Tt=m.join(","),Rt=L.join(","),Bt=ct.join(","),Vt=`${Tt}${Rt}${Bt}`}if(gt=t(this,T,fe).get(Vt),gt)return t(this,T,fe).set(Q,gt),gt;const Gt=`g_${t(this,at)}_transfer_map_${de(this,A)._++}`,zt=`url(#${Gt})`;t(this,T,fe).set(Q,zt),t(this,T,fe).set(Vt,zt);const Kt=V(this,St,ke).call(this,Gt);return V(this,Lt,ye).call(this,Tt,Rt,Bt,Kt),zt}addHCMFilter(Q,gt){var Jt;const Tt=`${Q}-${gt}`;if(t(this,Pt)===Tt)return t(this,D);if(Y(this,Pt,Tt),Y(this,D,"none"),(Jt=t(this,wt))==null||Jt.remove(),!Q||!gt)return t(this,D);const Rt=V(this,Mt,Ae).call(this,Q);Q=F.Util.makeHexColor(...Rt);const Bt=V(this,Mt,Ae).call(this,gt);if(gt=F.Util.makeHexColor(...Bt),t(this,X,pe).style.color="",Q==="#000000"&&gt==="#ffffff"||Q===gt)return t(this,D);const Vt=new Array(256);for(let At=0;At<=255;At++){const m=At/255;Vt[At]=m<=.03928?m/12.92:((m+.055)/1.055)**2.4}const Gt=Vt.join(","),zt=`g_${t(this,at)}_hcm_filter`,Kt=Y(this,n,V(this,St,ke).call(this,zt));V(this,Lt,ye).call(this,Gt,Gt,Gt,Kt),V(this,mt,ci).call(this,Kt);const Xt=(At,m)=>{const L=Rt[At]/255,ct=Bt[At]/255,st=new Array(m+1);for(let dt=0;dt<=m;dt++)st[dt]=L+dt/m*(ct-L);return st.join(",")};return V(this,Lt,ye).call(this,Xt(0,5),Xt(1,5),Xt(2,5),Kt),Y(this,D,`url(#${zt})`),t(this,D)}addHighlightHCMFilter(Q,gt,Tt,Rt){var ct;const Bt=`${Q}-${gt}-${Tt}-${Rt}`;if(t(this,d)===Bt)return t(this,a);if(Y(this,d,Bt),Y(this,a,"none"),(ct=t(this,n))==null||ct.remove(),!Q||!gt)return t(this,a);const[Vt,Gt]=[Q,gt].map(V(this,Mt,Ae).bind(this));let zt=Math.round(.2126*Vt[0]+.7152*Vt[1]+.0722*Vt[2]),Kt=Math.round(.2126*Gt[0]+.7152*Gt[1]+.0722*Gt[2]),[Xt,Jt]=[Tt,Rt].map(V(this,Mt,Ae).bind(this));Kt<zt&&([zt,Kt,Xt,Jt]=[Kt,zt,Jt,Xt]),t(this,X,pe).style.color="";const At=(st,dt,_t)=>{const U=new Array(256),ot=(Kt-zt)/_t,xt=st/255,Et=(dt-st)/(255*_t);let Dt=0;for(let Ot=0;Ot<=_t;Ot++){const Wt=Math.round(zt+Ot*ot),Ct=xt+Ot*Et;for(let qt=Dt;qt<=Wt;qt++)U[qt]=Ct;Dt=Wt+1}for(let Ot=Dt;Ot<256;Ot++)U[Ot]=U[Dt-1];return U.join(",")},m=`g_${t(this,at)}_hcm_highlight_filter`,L=Y(this,n,V(this,St,ke).call(this,m));return V(this,mt,ci).call(this,L),V(this,Lt,ye).call(this,At(Xt[0],Jt[0],5),At(Xt[1],Jt[1],5),At(Xt[2],Jt[2],5),L),Y(this,a,`url(#${m})`),t(this,a)}destroy(Q=!1){Q&&(t(this,D)||t(this,a))||(t(this,B)&&(t(this,B).parentNode.parentNode.remove(),Y(this,B,null)),t(this,G)&&(t(this,G).clear(),Y(this,G,null)),Y(this,A,0))}}G=new WeakMap,B=new WeakMap,at=new WeakMap,W=new WeakMap,wt=new WeakMap,Pt=new WeakMap,D=new WeakMap,n=new WeakMap,d=new WeakMap,a=new WeakMap,A=new WeakMap,T=new WeakSet,fe=function(){return t(this,G)||Y(this,G,new Map)},X=new WeakSet,pe=function(){if(!t(this,B)){const Q=t(this,W).createElement("div"),{style:gt}=Q;gt.visibility="hidden",gt.contain="strict",gt.width=gt.height=0,gt.position="absolute",gt.top=gt.left=0,gt.zIndex=-1;const Tt=t(this,W).createElementNS(lt,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),Y(this,B,t(this,W).createElementNS(lt,"defs")),Q.append(Tt),Tt.append(t(this,B)),t(this,W).body.append(Q)}return t(this,B)},mt=new WeakSet,ci=function(Q){const gt=t(this,W).createElementNS(lt,"feColorMatrix");gt.setAttribute("type","matrix"),gt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Q.append(gt)},St=new WeakSet,ke=function(Q){const gt=t(this,W).createElementNS(lt,"filter");return gt.setAttribute("color-interpolation-filters","sRGB"),gt.setAttribute("id",Q),t(this,X,pe).append(gt),gt},bt=new WeakSet,Fe=function(Q,gt,Tt){const Rt=t(this,W).createElementNS(lt,gt);Rt.setAttribute("type","discrete"),Rt.setAttribute("tableValues",Tt),Q.append(Rt)},Lt=new WeakSet,ye=function(Q,gt,Tt,Rt){const Bt=t(this,W).createElementNS(lt,"feComponentTransfer");Rt.append(Bt),V(this,bt,Fe).call(this,Bt,"feFuncR",Q),V(this,bt,Fe).call(this,Bt,"feFuncG",gt),V(this,bt,Fe).call(this,Bt,"feFuncB",Tt)},Mt=new WeakSet,Ae=function(Q){return t(this,X,pe).style.color=Q,w(getComputedStyle(t(this,X,pe)).getPropertyValue("color"))},l.DOMFilterFactory=I;class x extends p.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,Q){const gt=this._document.createElement("canvas");return gt.width=J,gt.height=Q,gt}}l.DOMCanvasFactory=x;async function u(rt,J=!1){if(y(rt,document.baseURI)){const Q=await fetch(rt);if(!Q.ok)throw new Error(Q.statusText);return J?new Uint8Array(await Q.arrayBuffer()):(0,F.stringToBytes)(await Q.text())}return new Promise((Q,gt)=>{const Tt=new XMLHttpRequest;Tt.open("GET",rt,!0),J&&(Tt.responseType="arraybuffer"),Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){let Rt;if(J&&Tt.response?Rt=new Uint8Array(Tt.response):!J&&Tt.responseText&&(Rt=(0,F.stringToBytes)(Tt.responseText)),Rt){Q(Rt);return}}gt(new Error(Tt.statusText))}},Tt.send(null)})}class s extends p.BaseCMapReaderFactory{_fetchData(J,Q){return u(J,this.isCompressed).then(gt=>({cMapData:gt,compressionType:Q}))}}l.DOMCMapReaderFactory=s;class k extends p.BaseStandardFontDataFactory{_fetchData(J){return u(J,!0)}}l.DOMStandardFontDataFactory=k;class v extends p.BaseSVGFactory{_createSVG(J){return document.createElementNS(lt,J)}}l.DOMSVGFactory=v;class f{constructor({viewBox:J,scale:Q,rotation:gt,offsetX:Tt=0,offsetY:Rt=0,dontFlip:Bt=!1}){this.viewBox=J,this.scale=Q,this.rotation=gt,this.offsetX=Tt,this.offsetY=Rt;const Vt=(J[2]+J[0])/2,Gt=(J[3]+J[1])/2;let zt,Kt,Xt,Jt;switch(gt%=360,gt<0&&(gt+=360),gt){case 180:zt=-1,Kt=0,Xt=0,Jt=1;break;case 90:zt=0,Kt=1,Xt=1,Jt=0;break;case 270:zt=0,Kt=-1,Xt=-1,Jt=0;break;case 0:zt=1,Kt=0,Xt=0,Jt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Bt&&(Xt=-Xt,Jt=-Jt);let At,m,L,ct;zt===0?(At=Math.abs(Gt-J[1])*Q+Tt,m=Math.abs(Vt-J[0])*Q+Rt,L=(J[3]-J[1])*Q,ct=(J[2]-J[0])*Q):(At=Math.abs(Vt-J[0])*Q+Tt,m=Math.abs(Gt-J[1])*Q+Rt,L=(J[2]-J[0])*Q,ct=(J[3]-J[1])*Q),this.transform=[zt*Q,Kt*Q,Xt*Q,Jt*Q,At-zt*Q*Vt-Xt*Q*Gt,m-Kt*Q*Vt-Jt*Q*Gt],this.width=L,this.height=ct}get rawDims(){const{viewBox:J}=this;return(0,F.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:Q=this.rotation,offsetX:gt=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:Rt=!1}={}){return new f({viewBox:this.viewBox.slice(),scale:J,rotation:Q,offsetX:gt,offsetY:Tt,dontFlip:Rt})}convertToViewportPoint(J,Q){return F.Util.applyTransform([J,Q],this.transform)}convertToViewportRectangle(J){const Q=F.Util.applyTransform([J[0],J[1]],this.transform),gt=F.Util.applyTransform([J[2],J[3]],this.transform);return[Q[0],Q[1],gt[0],gt[1]]}convertToPdfPoint(J,Q){return F.Util.applyInverseTransform([J,Q],this.transform)}}l.PageViewport=f;class c extends F.BaseException{constructor(J,Q=0){super(J,"RenderingCancelledException"),this.extraDelay=Q}}l.RenderingCancelledException=c;function g(rt){const J=rt.length;let Q=0;for(;Q<J&&rt[Q].trim()==="";)Q++;return rt.substring(Q,Q+5).toLowerCase()==="data:"}function h(rt){return typeof rt=="string"&&/\.pdf$/i.test(rt)}function S(rt,J=!1){return J||([rt]=rt.split(/[#?]/,1)),rt.substring(rt.lastIndexOf("/")+1)}function C(rt,J="document.pdf"){if(typeof rt!="string")return J;if(g(rt))return(0,F.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const Q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,gt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tt=Q.exec(rt);let Rt=gt.exec(Tt[1])||gt.exec(Tt[2])||gt.exec(Tt[3]);if(Rt&&(Rt=Rt[0],Rt.includes("%")))try{Rt=gt.exec(decodeURIComponent(Rt))[0]}catch{}return Rt||J}class _{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(J){J in this.started&&(0,F.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,F.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let Q=0;for(const{name:gt}of this.times)Q=Math.max(gt.length,Q);for(const{name:gt,start:Tt,end:Rt}of this.times)J.push(`${gt.padEnd(Q)} ${Rt-Tt}ms
`);return J.join("")}}l.StatTimer=_;function y(rt,J){try{const{protocol:Q}=J?new URL(rt,J):new URL(rt);return Q==="http:"||Q==="https:"}catch{return!1}}function i(rt){rt.preventDefault()}function e(rt,J=!1){return new Promise((Q,gt)=>{const Tt=document.createElement("script");Tt.src=rt,Tt.onload=function(Rt){J&&Tt.remove(),Q(Rt)},Tt.onerror=function(){gt(new Error(`Cannot load script at: ${Tt.src}`))},(document.head||document.documentElement).append(Tt)})}function E(rt){console.log("Deprecated API usage: "+rt)}let b;class o{static toDateObject(J){if(!J||typeof J!="string")return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Q=b.exec(J);if(!Q)return null;const gt=parseInt(Q[1],10);let Tt=parseInt(Q[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let Rt=parseInt(Q[3],10);Rt=Rt>=1&&Rt<=31?Rt:1;let Bt=parseInt(Q[4],10);Bt=Bt>=0&&Bt<=23?Bt:0;let Vt=parseInt(Q[5],10);Vt=Vt>=0&&Vt<=59?Vt:0;let Gt=parseInt(Q[6],10);Gt=Gt>=0&&Gt<=59?Gt:0;const zt=Q[7]||"Z";let Kt=parseInt(Q[8],10);Kt=Kt>=0&&Kt<=23?Kt:0;let Xt=parseInt(Q[9],10)||0;return Xt=Xt>=0&&Xt<=59?Xt:0,zt==="-"?(Bt+=Kt,Vt+=Xt):zt==="+"&&(Bt-=Kt,Vt-=Xt),new Date(Date.UTC(gt,Tt,Rt,Bt,Vt,Gt))}}l.PDFDateString=o;function M(rt,{scale:J=1,rotation:Q=0}){const{width:gt,height:Tt}=rt.attributes.style,Rt=[0,0,parseInt(gt),parseInt(Tt)];return new f({viewBox:Rt,scale:J,rotation:Q})}function w(rt){if(rt.startsWith("#")){const J=parseInt(rt.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return rt.startsWith("rgb(")?rt.slice(4,-1).split(",").map(J=>parseInt(J)):rt.startsWith("rgba(")?rt.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,F.warn)(`Not a valid color format: "${rt}"`),[0,0,0])}function j(rt){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const Q of rt.keys()){J.style.color=Q;const gt=window.getComputedStyle(J).color;rt.set(Q,w(gt))}J.remove()}function Z(rt){const{a:J,b:Q,c:gt,d:Tt,e:Rt,f:Bt}=rt.getTransform();return[J,Q,gt,Tt,Rt,Bt]}function P(rt){const{a:J,b:Q,c:gt,d:Tt,e:Rt,f:Bt}=rt.getTransform().invertSelf();return[J,Q,gt,Tt,Rt,Bt]}function $(rt,J,Q=!1,gt=!0){if(J instanceof f){const{pageWidth:Tt,pageHeight:Rt}=J.rawDims,{style:Bt}=rt,Vt=F.FeatureTest.isCSSRoundSupported,Gt=`var(--scale-factor) * ${Tt}px`,zt=`var(--scale-factor) * ${Rt}px`,Kt=Vt?`round(${Gt}, 1px)`:`calc(${Gt})`,Xt=Vt?`round(${zt}, 1px)`:`calc(${zt})`;!Q||J.rotation%180===0?(Bt.width=Kt,Bt.height=Xt):(Bt.width=Xt,Bt.height=Kt)}gt&&rt.setAttribute("data-main-rotation",J.rotation)}},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseStandardFontDataFactory=l.BaseSVGFactory=l.BaseFilterFactory=l.BaseCanvasFactory=l.BaseCMapReaderFactory=void 0;var p=it(1);class F{constructor(){this.constructor===F&&(0,p.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(s){return"none"}addHCMFilter(s,k){return"none"}addHighlightHCMFilter(s,k,v,f){return"none"}destroy(s=!1){}}l.BaseFilterFactory=F;class lt{constructor(){this.constructor===lt&&(0,p.unreachable)("Cannot initialize BaseCanvasFactory.")}create(s,k){if(s<=0||k<=0)throw new Error("Invalid canvas size");const v=this._createCanvas(s,k);return{canvas:v,context:v.getContext("2d")}}reset(s,k,v){if(!s.canvas)throw new Error("Canvas is not specified");if(k<=0||v<=0)throw new Error("Invalid canvas size");s.canvas.width=k,s.canvas.height=v}destroy(s){if(!s.canvas)throw new Error("Canvas is not specified");s.canvas.width=0,s.canvas.height=0,s.canvas=null,s.context=null}_createCanvas(s,k){(0,p.unreachable)("Abstract method `_createCanvas` called.")}}l.BaseCanvasFactory=lt;class H{constructor({baseUrl:s=null,isCompressed:k=!0}){this.constructor===H&&(0,p.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=s,this.isCompressed=k}async fetch({name:s}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!s)throw new Error("CMap name must be specified.");const k=this.baseUrl+s+(this.isCompressed?".bcmap":""),v=this.isCompressed?p.CMapCompressionType.BINARY:p.CMapCompressionType.NONE;return this._fetchData(k,v).catch(f=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${k}`)})}_fetchData(s,k){(0,p.unreachable)("Abstract method `_fetchData` called.")}}l.BaseCMapReaderFactory=H;class I{constructor({baseUrl:s=null}){this.constructor===I&&(0,p.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=s}async fetch({filename:s}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!s)throw new Error("Font filename must be specified.");const k=`${this.baseUrl}${s}`;return this._fetchData(k).catch(v=>{throw new Error(`Unable to load font data at: ${k}`)})}_fetchData(s){(0,p.unreachable)("Abstract method `_fetchData` called.")}}l.BaseStandardFontDataFactory=I;class x{constructor(){this.constructor===x&&(0,p.unreachable)("Cannot initialize BaseSVGFactory.")}create(s,k,v=!1){if(s<=0||k<=0)throw new Error("Invalid SVG dimensions");const f=this._createSVG("svg:svg");return f.setAttribute("version","1.1"),v||(f.setAttribute("width",`${s}px`),f.setAttribute("height",`${k}px`)),f.setAttribute("preserveAspectRatio","none"),f.setAttribute("viewBox",`0 0 ${s} ${k}`),f}createElement(s){if(typeof s!="string")throw new Error("Invalid SVG element type");return this._createSVG(s)}_createSVG(s){(0,p.unreachable)("Abstract method `_createSVG` called.")}}l.BaseSVGFactory=x},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash3_64=void 0;var p=it(1);const F=3285377520,lt=4294901760,H=65535;class I{constructor(u){this.h1=u?u&4294967295:F,this.h2=u?u&4294967295:F}update(u){let s,k;if(typeof u=="string"){s=new Uint8Array(u.length*2),k=0;for(let E=0,b=u.length;E<b;E++){const o=u.charCodeAt(E);o<=255?s[k++]=o:(s[k++]=o>>>8,s[k++]=o&255)}}else if((0,p.isArrayBuffer)(u))s=u.slice(),k=s.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const v=k>>2,f=k-v*4,c=new Uint32Array(s.buffer,0,v);let g=0,h=0,S=this.h1,C=this.h2;const _=3432918353,y=461845907,i=_&H,e=y&H;for(let E=0;E<v;E++)E&1?(g=c[E],g=g*_&lt|g*i&H,g=g<<15|g>>>17,g=g*y&lt|g*e&H,S^=g,S=S<<13|S>>>19,S=S*5+3864292196):(h=c[E],h=h*_&lt|h*i&H,h=h<<15|h>>>17,h=h*y&lt|h*e&H,C^=h,C=C<<13|C>>>19,C=C*5+3864292196);switch(g=0,f){case 3:g^=s[v*4+2]<<16;case 2:g^=s[v*4+1]<<8;case 1:g^=s[v*4],g=g*_&lt|g*i&H,g=g<<15|g>>>17,g=g*y&lt|g*e&H,v&1?S^=g:C^=g}this.h1=S,this.h2=C}hexdigest(){let u=this.h1,s=this.h2;return u^=s>>>1,u=u*3981806797&lt|u*36045&H,s=s*4283543511&lt|((s<<16|u>>>16)*2950163797&lt)>>>16,u^=s>>>1,u=u*444984403&lt|u*60499&H,s=s*3301882366&lt|((s<<16|u>>>16)*3120437893&lt)>>>16,u^=s>>>1,(u>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}l.MurmurHash3_64=I},(yt,l,it)=>{var H;Object.defineProperty(l,"__esModule",{value:!0}),l.FontLoader=l.FontFaceObject=void 0;var p=it(1);class F{constructor({ownerDocument:x=globalThis.document,styleElement:u=null}){R(this,H,new Set);this._document=x,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(x){this.nativeFontFaces.add(x),this._document.fonts.add(x)}removeNativeFontFace(x){this.nativeFontFaces.delete(x),this._document.fonts.delete(x)}insertRule(x){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const u=this.styleElement.sheet;u.insertRule(x,u.cssRules.length)}clear(){for(const x of this.nativeFontFaces)this._document.fonts.delete(x);this.nativeFontFaces.clear(),t(this,H).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(x){if(!(!x||t(this,H).has(x.loadedName))){if((0,p.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:u,src:s,style:k}=x,v=new FontFace(u,s,k);this.addNativeFontFace(v);try{await v.load(),t(this,H).add(u)}catch{(0,p.warn)(`Cannot load system font: ${x.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(v)}return}(0,p.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(x){if(x.attached||x.missingFile&&!x.systemFontInfo)return;if(x.attached=!0,x.systemFontInfo){await this.loadSystemFont(x.systemFontInfo);return}if(this.isFontLoadingAPISupported){const s=x.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(k){throw(0,p.warn)(`Failed to load font '${s.family}': '${k}'.`),x.disableFontFace=!0,k}}return}const u=x.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const k=this._queueLoadingCallback(s);this._prepareFontLoadEvent(x,k)})}}get isFontLoadingAPISupported(){var u;const x=!!((u=this._document)!=null&&u.fonts);return(0,p.shadow)(this,"isFontLoadingAPISupported",x)}get isSyncFontLoadingSupported(){let x=!1;return(p.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(x=!0),(0,p.shadow)(this,"isSyncFontLoadingSupported",x)}_queueLoadingCallback(x){function u(){for((0,p.assert)(!k.done,"completeRequest() cannot be called twice."),k.done=!0;s.length>0&&s[0].done;){const v=s.shift();setTimeout(v.callback,0)}}const{loadingRequests:s}=this,k={done:!1,complete:u,callback:x};return s.push(k),k}get _loadTestFont(){const x=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,p.shadow)(this,"_loadTestFont",x)}_prepareFontLoadEvent(x,u){function s(w,j){return w.charCodeAt(j)<<24|w.charCodeAt(j+1)<<16|w.charCodeAt(j+2)<<8|w.charCodeAt(j+3)&255}function k(w,j,Z,P){const $=w.substring(0,j),K=w.substring(j+Z);return $+P+K}let v,f;const c=this._document.createElement("canvas");c.width=1,c.height=1;const g=c.getContext("2d");let h=0;function S(w,j){if(++h>30){(0,p.warn)("Load test font never loaded."),j();return}if(g.font="30px "+w,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(S.bind(null,w,j))}const C=`lt${Date.now()}${this.loadTestFontId++}`;let _=this._loadTestFont;_=k(_,976,C.length,C);const i=16,e=1482184792;let E=s(_,i);for(v=0,f=C.length-3;v<f;v+=4)E=E-e+s(C,v)|0;v<C.length&&(E=E-e+s(C+"XXX",v)|0),_=k(_,i,4,(0,p.string32)(E));const b=`url(data:font/opentype;base64,${btoa(_)});`,o=`@font-face {font-family:"${C}";src:${b}}`;this.insertRule(o);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const w of[x.loadedName,C]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=w,M.append(j)}this._document.body.append(M),S(C,()=>{M.remove(),u.complete()})}}H=new WeakMap,l.FontLoader=F;class lt{constructor(x,{isEvalSupported:u=!0,disableFontFace:s=!1,ignoreErrors:k=!1,inspectFont:v=null}){this.compiledGlyphs=Object.create(null);for(const f in x)this[f]=x[f];this.isEvalSupported=u!==!1,this.disableFontFace=s===!0,this.ignoreErrors=k===!0,this._inspectFont=v}createNativeFontFace(){var u;if(!this.data||this.disableFontFace)return null;let x;if(!this.cssFontInfo)x=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),x=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(u=this._inspectFont)==null||u.call(this,this),x}createFontFaceRule(){var k;if(!this.data||this.disableFontFace)return null;const x=(0,p.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(x)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let v=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(v+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${v}src:${u}}`}return(k=this._inspectFont)==null||k.call(this,this,u),s}getPathGenerator(x,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let s;try{s=x.get(this.loadedName+"_path_"+u)}catch(k){if(!this.ignoreErrors)throw k;return(0,p.warn)(`getPathGenerator - ignoring character: "${k}".`),this.compiledGlyphs[u]=function(v,f){}}if(this.isEvalSupported&&p.FeatureTest.isEvalSupported){const k=[];for(const v of s){const f=v.args!==void 0?v.args.join(","):"";k.push("c.",v.cmd,"(",f,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",k.join(""))}return this.compiledGlyphs[u]=function(k,v){for(const f of s)f.cmd==="scale"&&(f.args=[v,-v]),k[f.cmd].apply(k,f.args)}}}l.FontFaceObject=lt},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NodeStandardFontDataFactory=l.NodeFilterFactory=l.NodeCanvasFactory=l.NodeCMapReaderFactory=void 0;var p=it(7);it(1);const F=function(u){return new Promise((s,k)=>{require$$5.readFile(u,(f,c)=>{if(f||!c){k(new Error(f));return}s(new Uint8Array(c))})})};class lt extends p.BaseFilterFactory{}l.NodeFilterFactory=lt;class H extends p.BaseCanvasFactory{_createCanvas(s,k){return require$$5.createCanvas(s,k)}}l.NodeCanvasFactory=H;class I extends p.BaseCMapReaderFactory{_fetchData(s,k){return F(s).then(v=>({cMapData:v,compressionType:k}))}}l.NodeCMapReaderFactory=I;class x extends p.BaseStandardFontDataFactory{_fetchData(s){return F(s)}}l.NodeStandardFontDataFactory=x},(yt,l,it)=>{var B,hi,W,di;Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasGraphics=void 0;var p=it(1),F=it(6),lt=it(12),H=it(13);const I=16,x=100,u=4096,s=15,k=10,v=1e3,f=16;function c(D,n){if(D._removeMirroring)throw new Error("Context is already forwarding operations.");D.__originalSave=D.save,D.__originalRestore=D.restore,D.__originalRotate=D.rotate,D.__originalScale=D.scale,D.__originalTranslate=D.translate,D.__originalTransform=D.transform,D.__originalSetTransform=D.setTransform,D.__originalResetTransform=D.resetTransform,D.__originalClip=D.clip,D.__originalMoveTo=D.moveTo,D.__originalLineTo=D.lineTo,D.__originalBezierCurveTo=D.bezierCurveTo,D.__originalRect=D.rect,D.__originalClosePath=D.closePath,D.__originalBeginPath=D.beginPath,D._removeMirroring=()=>{D.save=D.__originalSave,D.restore=D.__originalRestore,D.rotate=D.__originalRotate,D.scale=D.__originalScale,D.translate=D.__originalTranslate,D.transform=D.__originalTransform,D.setTransform=D.__originalSetTransform,D.resetTransform=D.__originalResetTransform,D.clip=D.__originalClip,D.moveTo=D.__originalMoveTo,D.lineTo=D.__originalLineTo,D.bezierCurveTo=D.__originalBezierCurveTo,D.rect=D.__originalRect,D.closePath=D.__originalClosePath,D.beginPath=D.__originalBeginPath,delete D._removeMirroring},D.save=function(){n.save(),this.__originalSave()},D.restore=function(){n.restore(),this.__originalRestore()},D.translate=function(a,A){n.translate(a,A),this.__originalTranslate(a,A)},D.scale=function(a,A){n.scale(a,A),this.__originalScale(a,A)},D.transform=function(a,A,T,N,X,tt){n.transform(a,A,T,N,X,tt),this.__originalTransform(a,A,T,N,X,tt)},D.setTransform=function(a,A,T,N,X,tt){n.setTransform(a,A,T,N,X,tt),this.__originalSetTransform(a,A,T,N,X,tt)},D.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},D.rotate=function(a){n.rotate(a),this.__originalRotate(a)},D.clip=function(a){n.clip(a),this.__originalClip(a)},D.moveTo=function(d,a){n.moveTo(d,a),this.__originalMoveTo(d,a)},D.lineTo=function(d,a){n.lineTo(d,a),this.__originalLineTo(d,a)},D.bezierCurveTo=function(d,a,A,T,N,X){n.bezierCurveTo(d,a,A,T,N,X),this.__originalBezierCurveTo(d,a,A,T,N,X)},D.rect=function(d,a,A,T){n.rect(d,a,A,T),this.__originalRect(d,a,A,T)},D.closePath=function(){n.closePath(),this.__originalClosePath()},D.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}class g{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,d,a){let A;return this.cache[n]!==void 0?(A=this.cache[n],this.canvasFactory.reset(A,d,a)):(A=this.canvasFactory.create(d,a),this.cache[n]=A),A}delete(n){delete this.cache[n]}clear(){for(const n in this.cache){const d=this.cache[n];this.canvasFactory.destroy(d),delete this.cache[n]}}}function h(D,n,d,a,A,T,N,X,tt,mt){const[ft,St,et,bt,pt,Lt]=(0,F.getCurrentTransform)(D);if(St===0&&et===0){const ht=N*ft+pt,rt=Math.round(ht),J=X*bt+Lt,Q=Math.round(J),gt=(N+tt)*ft+pt,Tt=Math.abs(Math.round(gt)-rt)||1,Rt=(X+mt)*bt+Lt,Bt=Math.abs(Math.round(Rt)-Q)||1;return D.setTransform(Math.sign(ft),0,0,Math.sign(bt),rt,Q),D.drawImage(n,d,a,A,T,0,0,Tt,Bt),D.setTransform(ft,St,et,bt,pt,Lt),[Tt,Bt]}if(ft===0&&bt===0){const ht=X*et+pt,rt=Math.round(ht),J=N*St+Lt,Q=Math.round(J),gt=(X+mt)*et+pt,Tt=Math.abs(Math.round(gt)-rt)||1,Rt=(N+tt)*St+Lt,Bt=Math.abs(Math.round(Rt)-Q)||1;return D.setTransform(0,Math.sign(St),Math.sign(et),0,rt,Q),D.drawImage(n,d,a,A,T,0,0,Bt,Tt),D.setTransform(ft,St,et,bt,pt,Lt),[Bt,Tt]}D.drawImage(n,d,a,A,T,N,X,tt,mt);const Ft=Math.hypot(ft,St),Mt=Math.hypot(et,bt);return[Ft*tt,Mt*mt]}function S(D){const{width:n,height:d}=D;if(n>v||d>v)return null;const a=1e3,A=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),T=n+1;let N=new Uint8Array(T*(d+1)),X,tt,mt;const ft=n+7&-8;let St=new Uint8Array(ft*d),et=0;for(const Mt of D.data){let ht=128;for(;ht>0;)St[et++]=Mt&ht?0:255,ht>>=1}let bt=0;for(et=0,St[et]!==0&&(N[0]=1,++bt),tt=1;tt<n;tt++)St[et]!==St[et+1]&&(N[tt]=St[et]?2:1,++bt),et++;for(St[et]!==0&&(N[tt]=2,++bt),X=1;X<d;X++){et=X*ft,mt=X*T,St[et-ft]!==St[et]&&(N[mt]=St[et]?1:8,++bt);let Mt=(St[et]?4:0)+(St[et-ft]?8:0);for(tt=1;tt<n;tt++)Mt=(Mt>>2)+(St[et+1]?4:0)+(St[et-ft+1]?8:0),A[Mt]&&(N[mt+tt]=A[Mt],++bt),et++;if(St[et-ft]!==St[et]&&(N[mt+tt]=St[et]?2:4,++bt),bt>a)return null}for(et=ft*(d-1),mt=X*T,St[et]!==0&&(N[mt]=8,++bt),tt=1;tt<n;tt++)St[et]!==St[et+1]&&(N[mt+tt]=St[et]?4:8,++bt),et++;if(St[et]!==0&&(N[mt+tt]=4,++bt),bt>a)return null;const pt=new Int32Array([0,T,-1,0,-T,0,0,0,1]),Lt=new Path2D;for(X=0;bt&&X<=d;X++){let Mt=X*T;const ht=Mt+n;for(;Mt<ht&&!N[Mt];)Mt++;if(Mt===ht)continue;Lt.moveTo(Mt%T,X);const rt=Mt;let J=N[Mt];do{const Q=pt[J];do Mt+=Q;while(!N[Mt]);const gt=N[Mt];gt!==5&&gt!==10?(J=gt,N[Mt]=0):(J=gt&51*J>>4,N[Mt]&=J>>2|J<<2),Lt.lineTo(Mt%T,Mt/T|0),N[Mt]||--bt}while(rt!==Mt);--X}return St=null,N=null,function(Mt){Mt.save(),Mt.scale(1/n,-1/d),Mt.translate(0,-d),Mt.fill(Lt),Mt.beginPath(),Mt.restore()}}class C{constructor(n,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=p.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=p.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,n,d])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,d){this.x=n,this.y=d}updatePathMinMax(n,d,a){[d,a]=p.Util.applyTransform([d,a],n),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,a),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,a)}updateRectMinMax(n,d){const a=p.Util.applyTransform(d,n),A=p.Util.applyTransform(d.slice(2),n);this.minX=Math.min(this.minX,a[0],A[0]),this.minY=Math.min(this.minY,a[1],A[1]),this.maxX=Math.max(this.maxX,a[0],A[0]),this.maxY=Math.max(this.maxY,a[1],A[1])}updateScalingPathMinMax(n,d){p.Util.scaleMinMax(n,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(n,d,a,A,T,N,X,tt,mt,ft){const St=p.Util.bezierBoundingBox(d,a,A,T,N,X,tt,mt);if(ft){ft[0]=Math.min(ft[0],St[0],St[2]),ft[1]=Math.max(ft[1],St[0],St[2]),ft[2]=Math.min(ft[2],St[1],St[3]),ft[3]=Math.max(ft[3],St[1],St[3]);return}this.updateRectMinMax(n,St)}getPathBoundingBox(n=lt.PathType.FILL,d=null){const a=[this.minX,this.minY,this.maxX,this.maxY];if(n===lt.PathType.STROKE){d||(0,p.unreachable)("Stroke bounding box must include transform.");const A=p.Util.singularValueDecompose2dScale(d),T=A[0]*this.lineWidth/2,N=A[1]*this.lineWidth/2;a[0]-=T,a[1]-=N,a[2]+=T,a[3]+=N}return a}updateClipFromPath(){const n=p.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=lt.PathType.FILL,d=null){return p.Util.intersect(this.clipBox,this.getPathBoundingBox(n,d))}}function _(D,n){if(typeof ImageData<"u"&&n instanceof ImageData){D.putImageData(n,0,0);return}const d=n.height,a=n.width,A=d%f,T=(d-A)/f,N=A===0?T:T+1,X=D.createImageData(a,f);let tt=0,mt;const ft=n.data,St=X.data;let et,bt,pt,Lt;if(n.kind===p.ImageKind.GRAYSCALE_1BPP){const Ft=ft.byteLength,Mt=new Uint32Array(St.buffer,0,St.byteLength>>2),ht=Mt.length,rt=a+7>>3,J=4294967295,Q=p.FeatureTest.isLittleEndian?4278190080:255;for(et=0;et<N;et++){for(pt=et<T?f:A,mt=0,bt=0;bt<pt;bt++){const gt=Ft-tt;let Tt=0;const Rt=gt>rt?a:gt*8-7,Bt=Rt&-8;let Vt=0,Gt=0;for(;Tt<Bt;Tt+=8)Gt=ft[tt++],Mt[mt++]=Gt&128?J:Q,Mt[mt++]=Gt&64?J:Q,Mt[mt++]=Gt&32?J:Q,Mt[mt++]=Gt&16?J:Q,Mt[mt++]=Gt&8?J:Q,Mt[mt++]=Gt&4?J:Q,Mt[mt++]=Gt&2?J:Q,Mt[mt++]=Gt&1?J:Q;for(;Tt<Rt;Tt++)Vt===0&&(Gt=ft[tt++],Vt=128),Mt[mt++]=Gt&Vt?J:Q,Vt>>=1}for(;mt<ht;)Mt[mt++]=0;D.putImageData(X,0,et*f)}}else if(n.kind===p.ImageKind.RGBA_32BPP){for(bt=0,Lt=a*f*4,et=0;et<T;et++)St.set(ft.subarray(tt,tt+Lt)),tt+=Lt,D.putImageData(X,0,bt),bt+=f;et<N&&(Lt=a*A*4,St.set(ft.subarray(tt,tt+Lt)),D.putImageData(X,0,bt))}else if(n.kind===p.ImageKind.RGB_24BPP)for(pt=f,Lt=a*pt,et=0;et<N;et++){for(et>=T&&(pt=A,Lt=a*pt),mt=0,bt=Lt;bt--;)St[mt++]=ft[tt++],St[mt++]=ft[tt++],St[mt++]=ft[tt++],St[mt++]=255;D.putImageData(X,0,et*f)}else throw new Error(`bad image kind: ${n.kind}`)}function y(D,n){if(n.bitmap){D.drawImage(n.bitmap,0,0);return}const d=n.height,a=n.width,A=d%f,T=(d-A)/f,N=A===0?T:T+1,X=D.createImageData(a,f);let tt=0;const mt=n.data,ft=X.data;for(let St=0;St<N;St++){const et=St<T?f:A;({srcPos:tt}=(0,H.convertBlackAndWhiteToRGBA)({src:mt,srcPos:tt,dest:ft,width:a,height:et,nonBlackColor:0})),D.putImageData(X,0,St*f)}}function i(D,n){const d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of d)D[a]!==void 0&&(n[a]=D[a]);D.setLineDash!==void 0&&(n.setLineDash(D.getLineDash()),n.lineDashOffset=D.lineDashOffset)}function e(D){if(D.strokeStyle=D.fillStyle="#000000",D.fillRule="nonzero",D.globalAlpha=1,D.lineWidth=1,D.lineCap="butt",D.lineJoin="miter",D.miterLimit=10,D.globalCompositeOperation="source-over",D.font="10px sans-serif",D.setLineDash!==void 0&&(D.setLineDash([]),D.lineDashOffset=0),!p.isNodeJS){const{filter:n}=D;n!=="none"&&n!==""&&(D.filter="none")}}function E(D,n,d,a){const A=D.length;for(let T=3;T<A;T+=4){const N=D[T];if(N===0)D[T-3]=n,D[T-2]=d,D[T-1]=a;else if(N<255){const X=255-N;D[T-3]=D[T-3]*N+n*X>>8,D[T-2]=D[T-2]*N+d*X>>8,D[T-1]=D[T-1]*N+a*X>>8}}}function b(D,n,d){const a=D.length,A=1/255;for(let T=3;T<a;T+=4){const N=d?d[D[T]]:D[T];n[T]=n[T]*N*A|0}}function o(D,n,d){const a=D.length;for(let A=3;A<a;A+=4){const T=D[A-3]*77+D[A-2]*152+D[A-1]*28;n[A]=d?n[A]*d[T>>8]>>8:n[A]*T>>16}}function M(D,n,d,a,A,T,N,X,tt,mt,ft){const St=!!T,et=St?T[0]:0,bt=St?T[1]:0,pt=St?T[2]:0,Lt=A==="Luminosity"?o:b,Mt=Math.min(a,Math.ceil(1048576/d));for(let ht=0;ht<a;ht+=Mt){const rt=Math.min(Mt,a-ht),J=D.getImageData(X-mt,ht+(tt-ft),d,rt),Q=n.getImageData(X,ht+tt,d,rt);St&&E(J.data,et,bt,pt),Lt(J.data,Q.data,N),n.putImageData(Q,X,ht+tt)}}function w(D,n,d,a){const A=a[0],T=a[1],N=a[2]-A,X=a[3]-T;N===0||X===0||(M(n.context,d,N,X,n.subtype,n.backdrop,n.transferMap,A,T,n.offsetX,n.offsetY),D.save(),D.globalAlpha=1,D.globalCompositeOperation="source-over",D.setTransform(1,0,0,1,0,0),D.drawImage(d.canvas,0,0),D.restore())}function j(D,n){const d=p.Util.singularValueDecompose2dScale(D);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*F.PixelsPerInch.PDF_TO_CSS_UNITS);return n!==void 0?n:d[0]<=a||d[1]<=a}const Z=["butt","round","square"],P=["miter","round","bevel"],$={},K={},Pt=class Pt{constructor(n,d,a,A,T,{optionalContentConfig:N,markedContentStack:X=null},tt,mt){R(this,B);R(this,W);this.ctx=n,this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=a,this.canvasFactory=A,this.filterFactory=T,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=X||[],this.optionalContentConfig=N,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=tt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=mt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,d=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):d}beginDrawing({transform:n,viewport:d,transparency:a=!1,background:A=null}){const T=this.ctx.canvas.width,N=this.ctx.canvas.height,X=this.ctx.fillStyle;if(this.ctx.fillStyle=A||"#ffffff",this.ctx.fillRect(0,0,T,N),this.ctx.fillStyle=X,a){const tt=this.cachedCanvases.getCanvas("transparent",T,N);this.compositeCtx=this.ctx,this.transparentCanvas=tt.canvas,this.ctx=tt.context,this.ctx.save(),this.ctx.transform(...(0,F.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),e(this.ctx),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,F.getCurrentTransform)(this.ctx)}executeOperatorList(n,d,a,A){const T=n.argsArray,N=n.fnArray;let X=d||0;const tt=T.length;if(tt===X)return X;const mt=tt-X>k&&typeof a=="function",ft=mt?Date.now()+s:0;let St=0;const et=this.commonObjs,bt=this.objs;let pt;for(;;){if(A!==void 0&&X===A.nextBreakPoint)return A.breakIt(X,a),X;if(pt=N[X],pt!==p.OPS.dependency)this[pt].apply(this,T[X]);else for(const Lt of T[X]){const Ft=Lt.startsWith("g_")?et:bt;if(!Ft.has(Lt))return Ft.get(Lt,a),X}if(X++,X===tt)return X;if(mt&&++St>k){if(Date.now()>ft)return a(),X;St=0}}}endDrawing(){V(this,B,hi).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const d of n.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);n.clear()}this._cachedBitmapsMap.clear(),V(this,W,di).call(this)}_scaleImage(n,d){const a=n.width,A=n.height;let T=Math.max(Math.hypot(d[0],d[1]),1),N=Math.max(Math.hypot(d[2],d[3]),1),X=a,tt=A,mt="prescale1",ft,St;for(;T>2&&X>1||N>2&&tt>1;){let et=X,bt=tt;T>2&&X>1&&(et=X>=16384?Math.floor(X/2)-1||1:Math.ceil(X/2),T/=X/et),N>2&&tt>1&&(bt=tt>=16384?Math.floor(tt/2)-1||1:Math.ceil(tt)/2,N/=tt/bt),ft=this.cachedCanvases.getCanvas(mt,et,bt),St=ft.context,St.clearRect(0,0,et,bt),St.drawImage(n,0,0,X,tt,0,0,et,bt),n=ft.canvas,X=et,tt=bt,mt=mt==="prescale1"?"prescale2":"prescale1"}return{img:n,paintWidth:X,paintHeight:tt}}_createMaskCanvas(n){const d=this.ctx,{width:a,height:A}=n,T=this.current.fillColor,N=this.current.patternFill,X=(0,F.getCurrentTransform)(d);let tt,mt,ft,St;if((n.bitmap||n.data)&&n.count>1){const Tt=n.bitmap||n.data.buffer;mt=JSON.stringify(N?X:[X.slice(0,4),T]),tt=this._cachedBitmapsMap.get(Tt),tt||(tt=new Map,this._cachedBitmapsMap.set(Tt,tt));const Rt=tt.get(mt);if(Rt&&!N){const Bt=Math.round(Math.min(X[0],X[2])+X[4]),Vt=Math.round(Math.min(X[1],X[3])+X[5]);return{canvas:Rt,offsetX:Bt,offsetY:Vt}}ft=Rt}ft||(St=this.cachedCanvases.getCanvas("maskCanvas",a,A),y(St.context,n));let et=p.Util.transform(X,[1/a,0,0,-1/A,0,0]);et=p.Util.transform(et,[1,0,0,1,0,-A]);const bt=p.Util.applyTransform([0,0],et),pt=p.Util.applyTransform([a,A],et),Lt=p.Util.normalizeRect([bt[0],bt[1],pt[0],pt[1]]),Ft=Math.round(Lt[2]-Lt[0])||1,Mt=Math.round(Lt[3]-Lt[1])||1,ht=this.cachedCanvases.getCanvas("fillCanvas",Ft,Mt),rt=ht.context,J=Math.min(bt[0],pt[0]),Q=Math.min(bt[1],pt[1]);rt.translate(-J,-Q),rt.transform(...et),ft||(ft=this._scaleImage(St.canvas,(0,F.getCurrentTransformInverse)(rt)),ft=ft.img,tt&&N&&tt.set(mt,ft)),rt.imageSmoothingEnabled=j((0,F.getCurrentTransform)(rt),n.interpolate),h(rt,ft,0,0,ft.width,ft.height,0,0,a,A),rt.globalCompositeOperation="source-in";const gt=p.Util.transform((0,F.getCurrentTransformInverse)(rt),[1,0,0,1,-J,-Q]);return rt.fillStyle=N?T.getPattern(d,this,gt,lt.PathType.FILL):T,rt.fillRect(0,0,a,A),tt&&!N&&(this.cachedCanvases.delete("fillCanvas"),tt.set(mt,ht.canvas)),{canvas:ht.canvas,offsetX:Math.round(J),offsetY:Math.round(Q)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=Z[n]}setLineJoin(n){this.ctx.lineJoin=P[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,d){const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(n),a.lineDashOffset=d)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[d,a]of n)switch(d){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=a;break;case"ca":this.current.fillAlpha=a,this.ctx.globalAlpha=a;break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,d=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,A=this.cachedCanvases.getCanvas(a,n,d);this.suspendedCtx=this.ctx,this.ctx=A.context;const T=this.ctx;T.setTransform(...(0,F.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,T),c(T,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){if(!this.current.activeSMask)return;n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const d=this.current.activeSMask,a=this.suspendedCtx;w(a,d,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(n,d,a,A,T,N){this.ctx.transform(n,d,a,A,T,N),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(n,d,a){const A=this.ctx,T=this.current;let N=T.x,X=T.y,tt,mt;const ft=(0,F.getCurrentTransform)(A),St=ft[0]===0&&ft[3]===0||ft[1]===0&&ft[2]===0,et=St?a.slice(0):null;for(let bt=0,pt=0,Lt=n.length;bt<Lt;bt++)switch(n[bt]|0){case p.OPS.rectangle:N=d[pt++],X=d[pt++];const Ft=d[pt++],Mt=d[pt++],ht=N+Ft,rt=X+Mt;A.moveTo(N,X),Ft===0||Mt===0?A.lineTo(ht,rt):(A.lineTo(ht,X),A.lineTo(ht,rt),A.lineTo(N,rt)),St||T.updateRectMinMax(ft,[N,X,ht,rt]),A.closePath();break;case p.OPS.moveTo:N=d[pt++],X=d[pt++],A.moveTo(N,X),St||T.updatePathMinMax(ft,N,X);break;case p.OPS.lineTo:N=d[pt++],X=d[pt++],A.lineTo(N,X),St||T.updatePathMinMax(ft,N,X);break;case p.OPS.curveTo:tt=N,mt=X,N=d[pt+4],X=d[pt+5],A.bezierCurveTo(d[pt],d[pt+1],d[pt+2],d[pt+3],N,X),T.updateCurvePathMinMax(ft,tt,mt,d[pt],d[pt+1],d[pt+2],d[pt+3],N,X,et),pt+=6;break;case p.OPS.curveTo2:tt=N,mt=X,A.bezierCurveTo(N,X,d[pt],d[pt+1],d[pt+2],d[pt+3]),T.updateCurvePathMinMax(ft,tt,mt,N,X,d[pt],d[pt+1],d[pt+2],d[pt+3],et),N=d[pt+2],X=d[pt+3],pt+=4;break;case p.OPS.curveTo3:tt=N,mt=X,N=d[pt+2],X=d[pt+3],A.bezierCurveTo(d[pt],d[pt+1],N,X,N,X),T.updateCurvePathMinMax(ft,tt,mt,d[pt],d[pt+1],N,X,N,X,et),pt+=4;break;case p.OPS.closePath:A.closePath();break}St&&T.updateScalingPathMinMax(ft,et),T.setCurrentPoint(N,X)}closePath(){this.ctx.closePath()}stroke(n=!0){const d=this.ctx,a=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof a=="object"&&(a!=null&&a.getPattern)?(d.save(),d.strokeStyle=a.getPattern(d,this,(0,F.getCurrentTransformInverse)(d),lt.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n=!0){const d=this.ctx,a=this.current.fillColor,A=this.current.patternFill;let T=!1;A&&(d.save(),d.fillStyle=a.getPattern(d,this,(0,F.getCurrentTransformInverse)(d),lt.PathType.FILL),T=!0);const N=this.current.getClippedPathBoundingBox();this.contentVisible&&N!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),T&&d.restore(),n&&this.consumePath(N)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=$}eoClip(){this.pendingClip=K}beginText(){this.current.textMatrix=p.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,d=this.ctx;if(n===void 0){d.beginPath();return}d.save(),d.beginPath();for(const a of n)d.setTransform(...a.transform),d.translate(a.x,a.y),a.addToPath(d,a.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,d){var ft;const a=this.commonObjs.get(n),A=this.current;if(!a)throw new Error(`Can't find font for ${n}`);if(A.fontMatrix=a.fontMatrix||p.FONT_IDENTITY_MATRIX,(A.fontMatrix[0]===0||A.fontMatrix[3]===0)&&(0,p.warn)("Invalid font matrix for font "+n),d<0?(d=-d,A.fontDirection=-1):A.fontDirection=1,this.current.font=a,this.current.fontSize=d,a.isType3Font)return;const T=a.loadedName||"sans-serif",N=((ft=a.systemFontInfo)==null?void 0:ft.css)||`"${T}", ${a.fallbackName}`;let X="normal";a.black?X="900":a.bold&&(X="bold");const tt=a.italic?"italic":"normal";let mt=d;d<I?mt=I:d>x&&(mt=x),this.current.fontSizeScale=d/mt,this.ctx.font=`${tt} ${X} ${mt}px ${N}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,d){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=d}setLeadingMoveText(n,d){this.setLeading(-d),this.moveText(n,d)}setTextMatrix(n,d,a,A,T,N){this.current.textMatrix=[n,d,a,A,T,N],this.current.textMatrixScale=Math.hypot(n,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,d,a,A){const T=this.ctx,N=this.current,X=N.font,tt=N.textRenderingMode,mt=N.fontSize/N.fontSizeScale,ft=tt&p.TextRenderingMode.FILL_STROKE_MASK,St=!!(tt&p.TextRenderingMode.ADD_TO_PATH_FLAG),et=N.patternFill&&!X.missingFile;let bt;(X.disableFontFace||St||et)&&(bt=X.getPathGenerator(this.commonObjs,n)),X.disableFontFace||et?(T.save(),T.translate(d,a),T.beginPath(),bt(T,mt),A&&T.setTransform(...A),(ft===p.TextRenderingMode.FILL||ft===p.TextRenderingMode.FILL_STROKE)&&T.fill(),(ft===p.TextRenderingMode.STROKE||ft===p.TextRenderingMode.FILL_STROKE)&&T.stroke(),T.restore()):((ft===p.TextRenderingMode.FILL||ft===p.TextRenderingMode.FILL_STROKE)&&T.fillText(n,d,a),(ft===p.TextRenderingMode.STROKE||ft===p.TextRenderingMode.FILL_STROKE)&&T.strokeText(n,d,a)),St&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,F.getCurrentTransform)(T),x:d,y:a,fontSize:mt,addToPath:bt})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const d=n.getImageData(0,0,10,10).data;let a=!1;for(let A=3;A<d.length;A+=4)if(d[A]>0&&d[A]<255){a=!0;break}return(0,p.shadow)(this,"isFontSubpixelAAEnabled",a)}showText(n){const d=this.current,a=d.font;if(a.isType3Font)return this.showType3Text(n);const A=d.fontSize;if(A===0)return;const T=this.ctx,N=d.fontSizeScale,X=d.charSpacing,tt=d.wordSpacing,mt=d.fontDirection,ft=d.textHScale*mt,St=n.length,et=a.vertical,bt=et?1:-1,pt=a.defaultVMetrics,Lt=A*d.fontMatrix[0],Ft=d.textRenderingMode===p.TextRenderingMode.FILL&&!a.disableFontFace&&!d.patternFill;T.save(),T.transform(...d.textMatrix),T.translate(d.x,d.y+d.textRise),mt>0?T.scale(ft,-1):T.scale(ft,1);let Mt;if(d.patternFill){T.save();const gt=d.fillColor.getPattern(T,this,(0,F.getCurrentTransformInverse)(T),lt.PathType.FILL);Mt=(0,F.getCurrentTransform)(T),T.restore(),T.fillStyle=gt}let ht=d.lineWidth;const rt=d.textMatrixScale;if(rt===0||ht===0){const gt=d.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;(gt===p.TextRenderingMode.STROKE||gt===p.TextRenderingMode.FILL_STROKE)&&(ht=this.getSinglePixelWidth())}else ht/=rt;if(N!==1&&(T.scale(N,N),ht/=N),T.lineWidth=ht,a.isInvalidPDFjsFont){const gt=[];let Tt=0;for(const Rt of n)gt.push(Rt.unicode),Tt+=Rt.width;T.fillText(gt.join(""),0,0),d.x+=Tt*Lt*ft,T.restore(),this.compose();return}let J=0,Q;for(Q=0;Q<St;++Q){const gt=n[Q];if(typeof gt=="number"){J+=bt*gt*A/1e3;continue}let Tt=!1;const Rt=(gt.isSpace?tt:0)+X,Bt=gt.fontChar,Vt=gt.accent;let Gt,zt,Kt=gt.width;if(et){const Jt=gt.vmetric||pt,At=-(gt.vmetric?Jt[1]:Kt*.5)*Lt,m=Jt[2]*Lt;Kt=Jt?-Jt[0]:Kt,Gt=At/N,zt=(J+m)/N}else Gt=J/N,zt=0;if(a.remeasure&&Kt>0){const Jt=T.measureText(Bt).width*1e3/A*N;if(Kt<Jt&&this.isFontSubpixelAAEnabled){const At=Kt/Jt;Tt=!0,T.save(),T.scale(At,1),Gt/=At}else Kt!==Jt&&(Gt+=(Kt-Jt)/2e3*A/N)}if(this.contentVisible&&(gt.isInFont||a.missingFile)){if(Ft&&!Vt)T.fillText(Bt,Gt,zt);else if(this.paintChar(Bt,Gt,zt,Mt),Vt){const Jt=Gt+A*Vt.offset.x/N,At=zt-A*Vt.offset.y/N;this.paintChar(Vt.fontChar,Jt,At,Mt)}}const Xt=et?Kt*Lt-Rt*mt:Kt*Lt+Rt*mt;J+=Xt,Tt&&T.restore()}et?d.y-=J:d.x+=J*ft,T.restore(),this.compose()}showType3Text(n){const d=this.ctx,a=this.current,A=a.font,T=a.fontSize,N=a.fontDirection,X=A.vertical?1:-1,tt=a.charSpacing,mt=a.wordSpacing,ft=a.textHScale*N,St=a.fontMatrix||p.FONT_IDENTITY_MATRIX,et=n.length,bt=a.textRenderingMode===p.TextRenderingMode.INVISIBLE;let pt,Lt,Ft,Mt;if(!(bt||T===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(...a.textMatrix),d.translate(a.x,a.y),d.scale(ft,N),pt=0;pt<et;++pt){if(Lt=n[pt],typeof Lt=="number"){Mt=X*Lt*T/1e3,this.ctx.translate(Mt,0),a.x+=Mt*ft;continue}const ht=(Lt.isSpace?mt:0)+tt,rt=A.charProcOperatorList[Lt.operatorListId];if(!rt){(0,p.warn)(`Type3 character "${Lt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Lt,this.save(),d.scale(T,T),d.transform(...St),this.executeOperatorList(rt),this.restore()),Ft=p.Util.applyTransform([Lt.width,0],St)[0]*T+ht,d.translate(Ft,0),a.x+=Ft*ft}d.restore(),this.processingType3=null}}setCharWidth(n,d){}setCharWidthAndBounds(n,d,a,A,T,N){this.ctx.rect(a,A,T-a,N-A),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let d;if(n[0]==="TilingPattern"){const a=n[1],A=this.baseTransform||(0,F.getCurrentTransform)(this.ctx),T={createCanvasGraphics:N=>new Pt(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};d=new lt.TilingPattern(n,a,this.ctx,T,A)}else d=this._getPattern(n[1],n[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,d,a){const A=p.Util.makeHexColor(n,d,a);this.ctx.strokeStyle=A,this.current.strokeColor=A}setFillRGBColor(n,d,a){const A=p.Util.makeHexColor(n,d,a);this.ctx.fillStyle=A,this.current.fillColor=A,this.current.patternFill=!1}_getPattern(n,d=null){let a;return this.cachedPatterns.has(n)?a=this.cachedPatterns.get(n):(a=(0,lt.getShadingPattern)(this.getObject(n)),this.cachedPatterns.set(n,a)),d&&(a.matrix=d),a}shadingFill(n){if(!this.contentVisible)return;const d=this.ctx;this.save();const a=this._getPattern(n);d.fillStyle=a.getPattern(d,this,(0,F.getCurrentTransformInverse)(d),lt.PathType.SHADING);const A=(0,F.getCurrentTransformInverse)(d);if(A){const{width:T,height:N}=d.canvas,[X,tt,mt,ft]=p.Util.getAxialAlignedBoundingBox([0,0,T,N],A);this.ctx.fillRect(X,tt,mt-X,ft-tt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,p.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,p.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&n.length===6&&this.transform(...n),this.baseTransform=(0,F.getCurrentTransform)(this.ctx),d)){const a=d[2]-d[0],A=d[3]-d[1];this.ctx.rect(d[0],d[1],a,A),this.current.updateRectMinMax((0,F.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const d=this.ctx;n.isolated||(0,p.info)("TODO: Support non-isolated groups."),n.knockout&&(0,p.warn)("Knockout groups not supported.");const a=(0,F.getCurrentTransform)(d);if(n.matrix&&d.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let A=p.Util.getAxialAlignedBoundingBox(n.bbox,(0,F.getCurrentTransform)(d));const T=[0,0,d.canvas.width,d.canvas.height];A=p.Util.intersect(A,T)||[0,0,0,0];const N=Math.floor(A[0]),X=Math.floor(A[1]);let tt=Math.max(Math.ceil(A[2])-N,1),mt=Math.max(Math.ceil(A[3])-X,1),ft=1,St=1;tt>u&&(ft=tt/u,tt=u),mt>u&&(St=mt/u,mt=u),this.current.startNewPathAndClipBox([0,0,tt,mt]);let et="groupAt"+this.groupLevel;n.smask&&(et+="_smask_"+this.smaskCounter++%2);const bt=this.cachedCanvases.getCanvas(et,tt,mt),pt=bt.context;pt.scale(1/ft,1/St),pt.translate(-N,-X),pt.transform(...a),n.smask?this.smaskStack.push({canvas:bt.canvas,context:pt,offsetX:N,offsetY:X,scaleX:ft,scaleY:St,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(N,X),d.scale(ft,St),d.save()),i(d,pt),this.ctx=pt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const d=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const A=(0,F.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...A);const T=p.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],A);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose(T)}}beginAnnotation(n,d,a,A,T){if(V(this,B,hi).call(this),e(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){const N=d[2]-d[0],X=d[3]-d[1];if(T&&this.annotationCanvasMap){a=a.slice(),a[4]-=d[0],a[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=N,d[3]=X;const[tt,mt]=p.Util.singularValueDecompose2dScale((0,F.getCurrentTransform)(this.ctx)),{viewportScale:ft}=this,St=Math.ceil(N*this.outputScaleX*ft),et=Math.ceil(X*this.outputScaleY*ft);this.annotationCanvas=this.canvasFactory.create(St,et);const{canvas:bt,context:pt}=this.annotationCanvas;this.annotationCanvasMap.set(n,bt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=pt,this.ctx.save(),this.ctx.setTransform(tt,0,0,-mt,0,X*mt),e(this.ctx)}else e(this.ctx),this.ctx.rect(d[0],d[1],N,X),this.ctx.clip(),this.endPath()}this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...a),this.transform(...A)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),V(this,W,di).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const d=n.count;n=this.getObject(n.data,n),n.count=d;const a=this.ctx,A=this.processingType3;if(A&&(A.compiled===void 0&&(A.compiled=S(n)),A.compiled)){A.compiled(a);return}const T=this._createMaskCanvas(n),N=T.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(N,T.offsetX,T.offsetY),a.restore(),this.compose()}paintImageMaskXObjectRepeat(n,d,a=0,A=0,T,N){if(!this.contentVisible)return;n=this.getObject(n.data,n);const X=this.ctx;X.save();const tt=(0,F.getCurrentTransform)(X);X.transform(d,a,A,T,0,0);const mt=this._createMaskCanvas(n);X.setTransform(1,0,0,1,mt.offsetX-tt[4],mt.offsetY-tt[5]);for(let ft=0,St=N.length;ft<St;ft+=2){const et=p.Util.transform(tt,[d,a,A,T,N[ft],N[ft+1]]),[bt,pt]=p.Util.applyTransform([0,0],et);X.drawImage(mt.canvas,bt,pt)}X.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const d=this.ctx,a=this.current.fillColor,A=this.current.patternFill;for(const T of n){const{data:N,width:X,height:tt,transform:mt}=T,ft=this.cachedCanvases.getCanvas("maskCanvas",X,tt),St=ft.context;St.save();const et=this.getObject(N,T);y(St,et),St.globalCompositeOperation="source-in",St.fillStyle=A?a.getPattern(St,this,(0,F.getCurrentTransformInverse)(d),lt.PathType.FILL):a,St.fillRect(0,0,X,tt),St.restore(),d.save(),d.transform(...mt),d.scale(1,-1),h(d,ft.canvas,0,0,X,tt,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const d=this.getObject(n);if(!d){(0,p.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(n,d,a,A){if(!this.contentVisible)return;const T=this.getObject(n);if(!T){(0,p.warn)("Dependent image isn't ready yet");return}const N=T.width,X=T.height,tt=[];for(let mt=0,ft=A.length;mt<ft;mt+=2)tt.push({transform:[d,0,0,a,A[mt],A[mt+1]],x:0,y:0,w:N,h:X});this.paintInlineImageXObjectGroup(T,tt)}applyTransferMapsToCanvas(n){return this.current.transferMaps!=="none"&&(n.filter=this.current.transferMaps,n.drawImage(n.canvas,0,0),n.filter="none"),n.canvas}applyTransferMapsToBitmap(n){if(this.current.transferMaps==="none")return n.bitmap;const{bitmap:d,width:a,height:A}=n,T=this.cachedCanvases.getCanvas("inlineImage",a,A),N=T.context;return N.filter=this.current.transferMaps,N.drawImage(d,0,0),N.filter="none",T.canvas}paintInlineImageXObject(n){if(!this.contentVisible)return;const d=n.width,a=n.height,A=this.ctx;if(this.save(),!p.isNodeJS){const{filter:X}=A;X!=="none"&&X!==""&&(A.filter="none")}A.scale(1/d,-1/a);let T;if(n.bitmap)T=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)T=n;else{const tt=this.cachedCanvases.getCanvas("inlineImage",d,a).context;_(tt,n),T=this.applyTransferMapsToCanvas(tt)}const N=this._scaleImage(T,(0,F.getCurrentTransformInverse)(A));A.imageSmoothingEnabled=j((0,F.getCurrentTransform)(A),n.interpolate),h(A,N.img,0,0,N.paintWidth,N.paintHeight,0,-a,d,a),this.compose(),this.restore()}paintInlineImageXObjectGroup(n,d){if(!this.contentVisible)return;const a=this.ctx;let A;if(n.bitmap)A=n.bitmap;else{const T=n.width,N=n.height,tt=this.cachedCanvases.getCanvas("inlineImage",T,N).context;_(tt,n),A=this.applyTransferMapsToCanvas(tt)}for(const T of d)a.save(),a.transform(...T.transform),a.scale(1,-1),h(a,A,T.x,T.y,T.w,T.h,0,-1,1,1),a.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,d){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,d){n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip&&(d||(this.pendingClip===K?a.clip("evenodd"):a.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,F.getCurrentTransform)(this.ctx);if(n[1]===0&&n[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const d=Math.abs(n[0]*n[3]-n[2]*n[1]),a=Math.hypot(n[0],n[2]),A=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(a,A)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:n}=this.current,{a:d,b:a,c:A,d:T}=this.ctx.getTransform();let N,X;if(a===0&&A===0){const tt=Math.abs(d),mt=Math.abs(T);if(tt===mt)if(n===0)N=X=1/tt;else{const ft=tt*n;N=X=ft<1?1/ft:1}else if(n===0)N=1/tt,X=1/mt;else{const ft=tt*n,St=mt*n;N=ft<1?1/ft:1,X=St<1?1/St:1}}else{const tt=Math.abs(d*T-a*A),mt=Math.hypot(d,a),ft=Math.hypot(A,T);if(n===0)N=ft/tt,X=mt/tt;else{const St=n*tt;N=ft>St?ft/St:1,X=mt>St?mt/St:1}}this._cachedScaleForStroking[0]=N,this._cachedScaleForStroking[1]=X}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:d}=this,{lineWidth:a}=this.current,[A,T]=this.getScaleForStroking();if(d.lineWidth=a||1,A===1&&T===1){d.stroke();return}const N=d.getLineDash();if(n&&d.save(),d.scale(A,T),N.length>0){const X=Math.max(A,T);d.setLineDash(N.map(tt=>tt/X)),d.lineDashOffset/=X}d.stroke(),n&&d.restore()}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}};B=new WeakSet,hi=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},W=new WeakSet,di=function(){if(this.pageColors){const n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(n!=="none"){const d=this.ctx.filter;this.ctx.filter=n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=d}}};let G=Pt;l.CanvasGraphics=G;for(const D in p.OPS)G.prototype[D]!==void 0&&(G.prototype[p.OPS[D]]=G.prototype[D])},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TilingPattern=l.PathType=void 0,l.getShadingPattern=f;var p=it(1),F=it(6);const lt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};l.PathType=lt;function H(S,C){if(!C)return;const _=C[2]-C[0],y=C[3]-C[1],i=new Path2D;i.rect(C[0],C[1],_,y),S.clip(i)}class I{constructor(){this.constructor===I&&(0,p.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,p.unreachable)("Abstract method `getPattern` called.")}}class x extends I{constructor(C){super(),this._type=C[1],this._bbox=C[2],this._colorStops=C[3],this._p0=C[4],this._p1=C[5],this._r0=C[6],this._r1=C[7],this.matrix=null}_createGradient(C){let _;this._type==="axial"?_=C.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(_=C.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const y of this._colorStops)_.addColorStop(y[0],y[1]);return _}getPattern(C,_,y,i){let e;if(i===lt.STROKE||i===lt.FILL){const E=_.current.getClippedPathBoundingBox(i,(0,F.getCurrentTransform)(C))||[0,0,0,0],b=Math.ceil(E[2]-E[0])||1,o=Math.ceil(E[3]-E[1])||1,M=_.cachedCanvases.getCanvas("pattern",b,o,!0),w=M.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-E[0],-E[1]),y=p.Util.transform(y,[1,0,0,1,E[0],E[1]]),w.transform(..._.baseTransform),this.matrix&&w.transform(...this.matrix),H(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),e=C.createPattern(M.canvas,"no-repeat");const j=new DOMMatrix(y);e.setTransform(j)}else H(C,this._bbox),e=this._createGradient(C);return e}}function u(S,C,_,y,i,e,E,b){const o=C.coords,M=C.colors,w=S.data,j=S.width*4;let Z;o[_+1]>o[y+1]&&(Z=_,_=y,y=Z,Z=e,e=E,E=Z),o[y+1]>o[i+1]&&(Z=y,y=i,i=Z,Z=E,E=b,b=Z),o[_+1]>o[y+1]&&(Z=_,_=y,y=Z,Z=e,e=E,E=Z);const P=(o[_]+C.offsetX)*C.scaleX,$=(o[_+1]+C.offsetY)*C.scaleY,K=(o[y]+C.offsetX)*C.scaleX,G=(o[y+1]+C.offsetY)*C.scaleY,B=(o[i]+C.offsetX)*C.scaleX,at=(o[i+1]+C.offsetY)*C.scaleY;if($>=at)return;const W=M[e],wt=M[e+1],Pt=M[e+2],D=M[E],n=M[E+1],d=M[E+2],a=M[b],A=M[b+1],T=M[b+2],N=Math.round($),X=Math.round(at);let tt,mt,ft,St,et,bt,pt,Lt;for(let Ft=N;Ft<=X;Ft++){if(Ft<G){const Q=Ft<$?0:($-Ft)/($-G);tt=P-(P-K)*Q,mt=W-(W-D)*Q,ft=wt-(wt-n)*Q,St=Pt-(Pt-d)*Q}else{let Q;Ft>at?Q=1:G===at?Q=0:Q=(G-Ft)/(G-at),tt=K-(K-B)*Q,mt=D-(D-a)*Q,ft=n-(n-A)*Q,St=d-(d-T)*Q}let Mt;Ft<$?Mt=0:Ft>at?Mt=1:Mt=($-Ft)/($-at),et=P-(P-B)*Mt,bt=W-(W-a)*Mt,pt=wt-(wt-A)*Mt,Lt=Pt-(Pt-T)*Mt;const ht=Math.round(Math.min(tt,et)),rt=Math.round(Math.max(tt,et));let J=j*Ft+ht*4;for(let Q=ht;Q<=rt;Q++)Mt=(tt-Q)/(tt-et),Mt<0?Mt=0:Mt>1&&(Mt=1),w[J++]=mt-(mt-bt)*Mt|0,w[J++]=ft-(ft-pt)*Mt|0,w[J++]=St-(St-Lt)*Mt|0,w[J++]=255}}function s(S,C,_){const y=C.coords,i=C.colors;let e,E;switch(C.type){case"lattice":const b=C.verticesPerRow,o=Math.floor(y.length/b)-1,M=b-1;for(e=0;e<o;e++){let w=e*b;for(let j=0;j<M;j++,w++)u(S,_,y[w],y[w+1],y[w+b],i[w],i[w+1],i[w+b]),u(S,_,y[w+b+1],y[w+1],y[w+b],i[w+b+1],i[w+1],i[w+b])}break;case"triangles":for(e=0,E=y.length;e<E;e+=3)u(S,_,y[e],y[e+1],y[e+2],i[e],i[e+1],i[e+2]);break;default:throw new Error("illegal figure")}}class k extends I{constructor(C){super(),this._coords=C[2],this._colors=C[3],this._figures=C[4],this._bounds=C[5],this._bbox=C[7],this._background=C[8],this.matrix=null}_createMeshCanvas(C,_,y){const b=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),M=Math.ceil(this._bounds[2])-b,w=Math.ceil(this._bounds[3])-o,j=Math.min(Math.ceil(Math.abs(M*C[0]*1.1)),3e3),Z=Math.min(Math.ceil(Math.abs(w*C[1]*1.1)),3e3),P=M/j,$=w/Z,K={coords:this._coords,colors:this._colors,offsetX:-b,offsetY:-o,scaleX:1/P,scaleY:1/$},G=j+2*2,B=Z+2*2,at=y.getCanvas("mesh",G,B,!1),W=at.context,wt=W.createImageData(j,Z);if(_){const D=wt.data;for(let n=0,d=D.length;n<d;n+=4)D[n]=_[0],D[n+1]=_[1],D[n+2]=_[2],D[n+3]=255}for(const D of this._figures)s(wt,D,K);return W.putImageData(wt,2,2),{canvas:at.canvas,offsetX:b-2*P,offsetY:o-2*$,scaleX:P,scaleY:$}}getPattern(C,_,y,i){H(C,this._bbox);let e;if(i===lt.SHADING)e=p.Util.singularValueDecompose2dScale((0,F.getCurrentTransform)(C));else if(e=p.Util.singularValueDecompose2dScale(_.baseTransform),this.matrix){const b=p.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*b[0],e[1]*b[1]]}const E=this._createMeshCanvas(e,i===lt.SHADING?null:this._background,_.cachedCanvases);return i!==lt.SHADING&&(C.setTransform(..._.baseTransform),this.matrix&&C.transform(...this.matrix)),C.translate(E.offsetX,E.offsetY),C.scale(E.scaleX,E.scaleY),C.createPattern(E.canvas,"no-repeat")}}class v extends I{getPattern(){return"hotpink"}}function f(S){switch(S[0]){case"RadialAxial":return new x(S);case"Mesh":return new k(S);case"Dummy":return new v}throw new Error(`Unknown IR type: ${S[0]}`)}const c={COLORED:1,UNCOLORED:2},h=class h{constructor(C,_,y,i,e){this.operatorList=C[2],this.matrix=C[3]||[1,0,0,1,0,0],this.bbox=C[4],this.xstep=C[5],this.ystep=C[6],this.paintType=C[7],this.tilingType=C[8],this.color=_,this.ctx=y,this.canvasGraphicsFactory=i,this.baseTransform=e}createPatternCanvas(C){const _=this.operatorList,y=this.bbox,i=this.xstep,e=this.ystep,E=this.paintType,b=this.tilingType,o=this.color,M=this.canvasGraphicsFactory;(0,p.info)("TilingType: "+b);const w=y[0],j=y[1],Z=y[2],P=y[3],$=p.Util.singularValueDecompose2dScale(this.matrix),K=p.Util.singularValueDecompose2dScale(this.baseTransform),G=[$[0]*K[0],$[1]*K[1]],B=this.getSizeAndScale(i,this.ctx.canvas.width,G[0]),at=this.getSizeAndScale(e,this.ctx.canvas.height,G[1]),W=C.cachedCanvases.getCanvas("pattern",B.size,at.size,!0),wt=W.context,Pt=M.createCanvasGraphics(wt);Pt.groupLevel=C.groupLevel,this.setFillAndStrokeStyleToContext(Pt,E,o);let D=w,n=j,d=Z,a=P;return w<0&&(D=0,d+=Math.abs(w)),j<0&&(n=0,a+=Math.abs(j)),wt.translate(-(B.scale*D),-(at.scale*n)),Pt.transform(B.scale,0,0,at.scale,0,0),wt.save(),this.clipBbox(Pt,D,n,d,a),Pt.baseTransform=(0,F.getCurrentTransform)(Pt.ctx),Pt.executeOperatorList(_),Pt.endDrawing(),{canvas:W.canvas,scaleX:B.scale,scaleY:at.scale,offsetX:D,offsetY:n}}getSizeAndScale(C,_,y){C=Math.abs(C);const i=Math.max(h.MAX_PATTERN_SIZE,_);let e=Math.ceil(C*y);return e>=i?e=i:y=e/C,{scale:y,size:e}}clipBbox(C,_,y,i,e){const E=i-_,b=e-y;C.ctx.rect(_,y,E,b),C.current.updateRectMinMax((0,F.getCurrentTransform)(C.ctx),[_,y,i,e]),C.clip(),C.endPath()}setFillAndStrokeStyleToContext(C,_,y){const i=C.ctx,e=C.current;switch(_){case c.COLORED:const E=this.ctx;i.fillStyle=E.fillStyle,i.strokeStyle=E.strokeStyle,e.fillColor=E.fillStyle,e.strokeColor=E.strokeStyle;break;case c.UNCOLORED:const b=p.Util.makeHexColor(y[0],y[1],y[2]);i.fillStyle=b,i.strokeStyle=b,e.fillColor=b,e.strokeColor=b;break;default:throw new p.FormatError(`Unsupported paint type: ${_}`)}}getPattern(C,_,y,i){let e=y;i!==lt.SHADING&&(e=p.Util.transform(e,_.baseTransform),this.matrix&&(e=p.Util.transform(e,this.matrix)));const E=this.createPatternCanvas(_);let b=new DOMMatrix(e);b=b.translate(E.offsetX,E.offsetY),b=b.scale(1/E.scaleX,1/E.scaleY);const o=C.createPattern(E.canvas,"repeat");return o.setTransform(b),o}};ee(h,"MAX_PATTERN_SIZE",3e3);let g=h;l.TilingPattern=g},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.convertBlackAndWhiteToRGBA=lt,l.convertToRGBA=F,l.grayToRGBA=I;var p=it(1);function F(x){switch(x.kind){case p.ImageKind.GRAYSCALE_1BPP:return lt(x);case p.ImageKind.RGB_24BPP:return H(x)}return null}function lt({src:x,srcPos:u=0,dest:s,width:k,height:v,nonBlackColor:f=4294967295,inverseDecode:c=!1}){const g=p.FeatureTest.isLittleEndian?4278190080:255,[h,S]=c?[f,g]:[g,f],C=k>>3,_=k&7,y=x.length;s=new Uint32Array(s.buffer);let i=0;for(let e=0;e<v;e++){for(const b=u+C;u<b;u++){const o=u<y?x[u]:255;s[i++]=o&128?S:h,s[i++]=o&64?S:h,s[i++]=o&32?S:h,s[i++]=o&16?S:h,s[i++]=o&8?S:h,s[i++]=o&4?S:h,s[i++]=o&2?S:h,s[i++]=o&1?S:h}if(_===0)continue;const E=u<y?x[u++]:255;for(let b=0;b<_;b++)s[i++]=E&1<<7-b?S:h}return{srcPos:u,destPos:i}}function H({src:x,srcPos:u=0,dest:s,destPos:k=0,width:v,height:f}){let c=0;const g=x.length>>2,h=new Uint32Array(x.buffer,u,g);if(p.FeatureTest.isLittleEndian){for(;c<g-2;c+=3,k+=4){const S=h[c],C=h[c+1],_=h[c+2];s[k]=S|4278190080,s[k+1]=S>>>24|C<<8|4278190080,s[k+2]=C>>>16|_<<16|4278190080,s[k+3]=_>>>8|4278190080}for(let S=c*4,C=x.length;S<C;S+=3)s[k++]=x[S]|x[S+1]<<8|x[S+2]<<16|4278190080}else{for(;c<g-2;c+=3,k+=4){const S=h[c],C=h[c+1],_=h[c+2];s[k]=S|255,s[k+1]=S<<24|C>>>8|255,s[k+2]=C<<16|_>>>16|255,s[k+3]=_<<8|255}for(let S=c*4,C=x.length;S<C;S+=3)s[k++]=x[S]<<24|x[S+1]<<16|x[S+2]<<8|255}return{srcPos:u,destPos:k}}function I(x,u){if(p.FeatureTest.isLittleEndian)for(let s=0,k=x.length;s<k;s++)u[s]=x[s]*65793|4278190080;else for(let s=0,k=x.length;s<k;s++)u[s]=x[s]*16843008|255}},(yt,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GlobalWorkerOptions=void 0;const it=Object.create(null);l.GlobalWorkerOptions=it,it.workerPort=null,it.workerSrc=""},(yt,l,it)=>{var x,cn,s,hn,v,De;Object.defineProperty(l,"__esModule",{value:!0}),l.MessageHandler=void 0;var p=it(1);const F={UNKNOWN:0,DATA:1,ERROR:2},lt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function H(c){switch(c instanceof Error||typeof c=="object"&&c!==null||(0,p.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new p.AbortException(c.message);case"MissingPDFException":return new p.MissingPDFException(c.message);case"PasswordException":return new p.PasswordException(c.message,c.code);case"UnexpectedResponseException":return new p.UnexpectedResponseException(c.message,c.status);case"UnknownErrorException":return new p.UnknownErrorException(c.message,c.details);default:return new p.UnknownErrorException(c.message,c.toString())}}class I{constructor(g,h,S){R(this,x);R(this,s);R(this,v);this.sourceName=g,this.targetName=h,this.comObj=S,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=C=>{const _=C.data;if(_.targetName!==this.sourceName)return;if(_.stream){V(this,s,hn).call(this,_);return}if(_.callback){const i=_.callbackId,e=this.callbackCapabilities[i];if(!e)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],_.callback===F.DATA)e.resolve(_.data);else if(_.callback===F.ERROR)e.reject(H(_.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[_.action];if(!y)throw new Error(`Unknown action from worker: ${_.action}`);if(_.callbackId){const i=this.sourceName,e=_.sourceName;new Promise(function(E){E(y(_.data))}).then(function(E){S.postMessage({sourceName:i,targetName:e,callback:F.DATA,callbackId:_.callbackId,data:E})},function(E){S.postMessage({sourceName:i,targetName:e,callback:F.ERROR,callbackId:_.callbackId,reason:H(E)})});return}if(_.streamId){V(this,x,cn).call(this,_);return}y(_.data)},S.addEventListener("message",this._onComObjOnMessage)}on(g,h){const S=this.actionHandler;if(S[g])throw new Error(`There is already an actionName called "${g}"`);S[g]=h}send(g,h,S){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:h},S)}sendWithPromise(g,h,S){const C=this.callbackId++,_=new p.PromiseCapability;this.callbackCapabilities[C]=_;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:C,data:h},S)}catch(y){_.reject(y)}return _.promise}sendWithStream(g,h,S,C){const _=this.streamId++,y=this.sourceName,i=this.targetName,e=this.comObj;return new ReadableStream({start:E=>{const b=new p.PromiseCapability;return this.streamControllers[_]={controller:E,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},e.postMessage({sourceName:y,targetName:i,action:g,streamId:_,data:h,desiredSize:E.desiredSize},C),b.promise},pull:E=>{const b=new p.PromiseCapability;return this.streamControllers[_].pullCall=b,e.postMessage({sourceName:y,targetName:i,stream:lt.PULL,streamId:_,desiredSize:E.desiredSize}),b.promise},cancel:E=>{(0,p.assert)(E instanceof Error,"cancel must have a valid reason");const b=new p.PromiseCapability;return this.streamControllers[_].cancelCall=b,this.streamControllers[_].isClosed=!0,e.postMessage({sourceName:y,targetName:i,stream:lt.CANCEL,streamId:_,reason:H(E)}),b.promise}},S)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}x=new WeakSet,cn=function(g){const h=g.streamId,S=this.sourceName,C=g.sourceName,_=this.comObj,y=this,i=this.actionHandler[g.action],e={enqueue(E,b=1,o){if(this.isCancelled)return;const M=this.desiredSize;this.desiredSize-=b,M>0&&this.desiredSize<=0&&(this.sinkCapability=new p.PromiseCapability,this.ready=this.sinkCapability.promise),_.postMessage({sourceName:S,targetName:C,stream:lt.ENQUEUE,streamId:h,chunk:E},o)},close(){this.isCancelled||(this.isCancelled=!0,_.postMessage({sourceName:S,targetName:C,stream:lt.CLOSE,streamId:h}),delete y.streamSinks[h])},error(E){(0,p.assert)(E instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,_.postMessage({sourceName:S,targetName:C,stream:lt.ERROR,streamId:h,reason:H(E)}))},sinkCapability:new p.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};e.sinkCapability.resolve(),e.ready=e.sinkCapability.promise,this.streamSinks[h]=e,new Promise(function(E){E(i(g.data,e))}).then(function(){_.postMessage({sourceName:S,targetName:C,stream:lt.START_COMPLETE,streamId:h,success:!0})},function(E){_.postMessage({sourceName:S,targetName:C,stream:lt.START_COMPLETE,streamId:h,reason:H(E)})})},s=new WeakSet,hn=function(g){const h=g.streamId,S=this.sourceName,C=g.sourceName,_=this.comObj,y=this.streamControllers[h],i=this.streamSinks[h];switch(g.stream){case lt.START_COMPLETE:g.success?y.startCall.resolve():y.startCall.reject(H(g.reason));break;case lt.PULL_COMPLETE:g.success?y.pullCall.resolve():y.pullCall.reject(H(g.reason));break;case lt.PULL:if(!i){_.postMessage({sourceName:S,targetName:C,stream:lt.PULL_COMPLETE,streamId:h,success:!0});break}i.desiredSize<=0&&g.desiredSize>0&&i.sinkCapability.resolve(),i.desiredSize=g.desiredSize,new Promise(function(e){var E;e((E=i.onPull)==null?void 0:E.call(i))}).then(function(){_.postMessage({sourceName:S,targetName:C,stream:lt.PULL_COMPLETE,streamId:h,success:!0})},function(e){_.postMessage({sourceName:S,targetName:C,stream:lt.PULL_COMPLETE,streamId:h,reason:H(e)})});break;case lt.ENQUEUE:if((0,p.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(g.chunk);break;case lt.CLOSE:if((0,p.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),V(this,v,De).call(this,y,h);break;case lt.ERROR:(0,p.assert)(y,"error should have stream controller"),y.controller.error(H(g.reason)),V(this,v,De).call(this,y,h);break;case lt.CANCEL_COMPLETE:g.success?y.cancelCall.resolve():y.cancelCall.reject(H(g.reason)),V(this,v,De).call(this,y,h);break;case lt.CANCEL:if(!i)break;new Promise(function(e){var E;e((E=i.onCancel)==null?void 0:E.call(i,H(g.reason)))}).then(function(){_.postMessage({sourceName:S,targetName:C,stream:lt.CANCEL_COMPLETE,streamId:h,success:!0})},function(e){_.postMessage({sourceName:S,targetName:C,stream:lt.CANCEL_COMPLETE,streamId:h,reason:H(e)})}),i.sinkCapability.reject(H(g.reason)),i.isCancelled=!0,delete this.streamSinks[h];break;default:throw new Error("Unexpected stream case")}},v=new WeakSet,De=async function(g,h){var S,C,_;await Promise.allSettled([(S=g.startCall)==null?void 0:S.promise,(C=g.pullCall)==null?void 0:C.promise,(_=g.cancelCall)==null?void 0:_.promise]),delete this.streamControllers[h]},l.MessageHandler=I},(yt,l,it)=>{var lt,H;Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var p=it(1);class F{constructor({parsedData:x,rawData:u}){R(this,lt,void 0);R(this,H,void 0);Y(this,lt,x),Y(this,H,u)}getRaw(){return t(this,H)}get(x){return t(this,lt).get(x)??null}getAll(){return(0,p.objectFromMap)(t(this,lt))}has(x){return t(this,lt).has(x)}}lt=new WeakMap,H=new WeakMap,l.Metadata=F},(yt,l,it)=>{var x,u,s,k,v,f,ui;Object.defineProperty(l,"__esModule",{value:!0}),l.OptionalContentConfig=void 0;var p=it(1),F=it(8);const lt=Symbol("INTERNAL");class H{constructor(h,S){R(this,x,!0);this.name=h,this.intent=S}get visible(){return t(this,x)}_setVisible(h,S){h!==lt&&(0,p.unreachable)("Internal method `_setVisible` called."),Y(this,x,S)}}x=new WeakMap;class I{constructor(h){R(this,f);R(this,u,null);R(this,s,new Map);R(this,k,null);R(this,v,null);if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,Y(this,v,h.order);for(const S of h.groups)t(this,s).set(S.id,new H(S.name,S.intent));if(h.baseState==="OFF")for(const S of t(this,s).values())S._setVisible(lt,!1);for(const S of h.on)t(this,s).get(S)._setVisible(lt,!0);for(const S of h.off)t(this,s).get(S)._setVisible(lt,!1);Y(this,k,this.getHash())}}isVisible(h){if(t(this,s).size===0)return!0;if(!h)return(0,p.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return t(this,s).has(h.id)?t(this,s).get(h.id).visible:((0,p.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return V(this,f,ui).call(this,h.expression);if(!h.policy||h.policy==="AnyOn"){for(const S of h.ids){if(!t(this,s).has(S))return(0,p.warn)(`Optional content group not found: ${S}`),!0;if(t(this,s).get(S).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const S of h.ids){if(!t(this,s).has(S))return(0,p.warn)(`Optional content group not found: ${S}`),!0;if(!t(this,s).get(S).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const S of h.ids){if(!t(this,s).has(S))return(0,p.warn)(`Optional content group not found: ${S}`),!0;if(!t(this,s).get(S).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const S of h.ids){if(!t(this,s).has(S))return(0,p.warn)(`Optional content group not found: ${S}`),!0;if(t(this,s).get(S).visible)return!1}return!0}return(0,p.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,p.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,S=!0){if(!t(this,s).has(h)){(0,p.warn)(`Optional content group not found: ${h}`);return}t(this,s).get(h)._setVisible(lt,!!S),Y(this,u,null)}get hasInitialVisibility(){return t(this,k)===null||this.getHash()===t(this,k)}getOrder(){return t(this,s).size?t(this,v)?t(this,v).slice():[...t(this,s).keys()]:null}getGroups(){return t(this,s).size>0?(0,p.objectFromMap)(t(this,s)):null}getGroup(h){return t(this,s).get(h)||null}getHash(){if(t(this,u)!==null)return t(this,u);const h=new F.MurmurHash3_64;for(const[S,C]of t(this,s))h.update(`${S}:${C.visible}`);return Y(this,u,h.hexdigest())}}u=new WeakMap,s=new WeakMap,k=new WeakMap,v=new WeakMap,f=new WeakSet,ui=function(h){const S=h.length;if(S<2)return!0;const C=h[0];for(let _=1;_<S;_++){const y=h[_];let i;if(Array.isArray(y))i=V(this,f,ui).call(this,y);else if(t(this,s).has(y))i=t(this,s).get(y).visible;else return(0,p.warn)(`Optional content group not found: ${y}`),!0;switch(C){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return C==="And"},l.OptionalContentConfig=I},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFDataTransportStream=void 0;var p=it(1),F=it(6);class lt{constructor({length:u,initialData:s,progressiveDone:k=!1,contentDispositionFilename:v=null,disableRange:f=!1,disableStream:c=!1},g){if((0,p.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=k,this._contentDispositionFilename=v,(s==null?void 0:s.length)>0){const h=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!c,this._isRangeSupported=!f,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((h,S)=>{this._onReceiveData({begin:h,chunk:S})}),this._pdfDataRangeTransport.addProgressListener((h,S)=>{this._onProgress({loaded:h,total:S})}),this._pdfDataRangeTransport.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:s}){const k=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(k):this._queuedChunks.push(k);else{const v=this._rangeReaders.some(function(f){return f._begin!==u?!1:(f._enqueue(k),!0)});(0,p.assert)(v,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u;return((u=this._fullRequestReader)==null?void 0:u._loaded)??0}_onProgress(u){var s,k,v,f;u.total===void 0?(k=(s=this._rangeReaders[0])==null?void 0:s.onProgress)==null||k.call(s,{loaded:u.loaded}):(f=(v=this._fullRequestReader)==null?void 0:v.onProgress)==null||f.call(v,{loaded:u.loaded,total:u.total})}_onProgressiveDone(){var u;(u=this._fullRequestReader)==null||u.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const s=this._rangeReaders.indexOf(u);s>=0&&this._rangeReaders.splice(s,1)}getFullReader(){(0,p.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new H(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,s){if(s<=this._progressiveDataLength)return null;const k=new I(this,u,s);return this._pdfDataRangeTransport.requestDataRange(u,s),this._rangeReaders.push(k),k}cancelAllRequests(u){var s;(s=this._fullRequestReader)==null||s.cancel(u);for(const k of this._rangeReaders.slice(0))k.cancel(u);this._pdfDataRangeTransport.abort()}}l.PDFDataTransportStream=lt;class H{constructor(u,s,k=!1,v=null){this._stream=u,this._done=k||!1,this._filename=(0,F.isPdfFile)(v)?v:null,this._queuedChunks=s||[],this._loaded=0;for(const f of this._queuedChunks)this._loaded+=f.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new p.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class I{constructor(u,s,k){this._stream=u,this._begin=s,this._end=k,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new p.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFFetchStream=void 0;var p=it(1),F=it(20);function lt(k,v,f){return{method:"GET",headers:k,signal:f.signal,mode:"cors",credentials:v?"include":"same-origin",redirect:"follow"}}function H(k){const v=new Headers;for(const f in k){const c=k[f];c!==void 0&&v.append(f,c)}return v}function I(k){return k instanceof Uint8Array?k.buffer:k instanceof ArrayBuffer?k:((0,p.warn)(`getArrayBuffer - unexpected data format: ${k}`),new Uint8Array(k).buffer)}class x{constructor(v){this.source=v,this.isHttp=/^https?:/i.test(v.url),this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(v,f){if(f<=this._progressiveDataLength)return null;const c=new s(this,v,f);return this._rangeRequestReaders.push(c),c}cancelAllRequests(v){var f;(f=this._fullRequestReader)==null||f.cancel(v);for(const c of this._rangeRequestReaders.slice(0))c.cancel(v)}}l.PDFFetchStream=x;class u{constructor(v){this._stream=v,this._reader=null,this._loaded=0,this._filename=null;const f=v.source;this._withCredentials=f.withCredentials||!1,this._contentLength=f.length,this._headersCapability=new p.PromiseCapability,this._disableRange=f.disableRange||!1,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._headers=H(this._stream.httpHeaders);const c=f.url;fetch(c,lt(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,F.validateResponseStatus)(g.status))throw(0,F.createResponseStatusError)(g.status,c);this._reader=g.body.getReader(),this._headersCapability.resolve();const h=_=>g.headers.get(_),{allowRangeRequests:S,suggestedLength:C}=(0,F.validateRangeRequestCapabilities)({getResponseHeader:h,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=C||this._contentLength,this._filename=(0,F.extractFilenameFromHeader)(h),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new p.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var c;await this._headersCapability.promise;const{value:v,done:f}=await this._reader.read();return f?{value:v,done:f}:(this._loaded+=v.byteLength,(c=this.onProgress)==null||c.call(this,{loaded:this._loaded,total:this._contentLength}),{value:I(v),done:!1})}cancel(v){var f;(f=this._reader)==null||f.cancel(v),this._abortController.abort()}}class s{constructor(v,f,c){this._stream=v,this._reader=null,this._loaded=0;const g=v.source;this._withCredentials=g.withCredentials||!1,this._readCapability=new p.PromiseCapability,this._isStreamingSupported=!g.disableStream,this._abortController=new AbortController,this._headers=H(this._stream.httpHeaders),this._headers.append("Range",`bytes=${f}-${c-1}`);const h=g.url;fetch(h,lt(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,F.validateResponseStatus)(S.status))throw(0,F.createResponseStatusError)(S.status,h);this._readCapability.resolve(),this._reader=S.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var c;await this._readCapability.promise;const{value:v,done:f}=await this._reader.read();return f?{value:v,done:f}:(this._loaded+=v.byteLength,(c=this.onProgress)==null||c.call(this,{loaded:this._loaded}),{value:I(v),done:!1})}cancel(v){var f;(f=this._reader)==null||f.cancel(v),this._abortController.abort()}}},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createResponseStatusError=x,l.extractFilenameFromHeader=I,l.validateRangeRequestCapabilities=H,l.validateResponseStatus=u;var p=it(1),F=it(21),lt=it(6);function H({getResponseHeader:s,isHttp:k,rangeChunkSize:v,disableRange:f}){const c={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(s("Content-Length"),10);return!Number.isInteger(g)||(c.suggestedLength=g,g<=2*v)||f||!k||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(c.allowRangeRequests=!0),c}function I(s){const k=s("Content-Disposition");if(k){let v=(0,F.getFilenameFromContentDispositionHeader)(k);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if((0,lt.isPdfFile)(v))return v}return null}function x(s,k){return s===404||s===0&&k.startsWith("file:")?new p.MissingPDFException('Missing PDF "'+k+'".'):new p.UnexpectedResponseException(`Unexpected server response (${s}) while retrieving PDF "${k}".`,s)}function u(s){return s===200||s===206}},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getFilenameFromContentDispositionHeader=F;var p=it(1);function F(lt){let H=!0,I=x("filename\\*","i").exec(lt);if(I){I=I[1];let g=v(I);return g=unescape(g),g=f(g),g=c(g),s(g)}if(I=k(lt),I){const g=c(I);return s(g)}if(I=x("filename","i").exec(lt),I){I=I[1];let g=v(I);return g=c(g),s(g)}function x(g,h){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function u(g,h){if(g){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const S=new TextDecoder(g,{fatal:!0}),C=(0,p.stringToBytes)(h);h=S.decode(C),H=!1}catch{}}return h}function s(g){return H&&/[\x80-\xff]/.test(g)&&(g=u("utf-8",g),H&&(g=u("iso-8859-1",g))),g}function k(g){const h=[];let S;const C=x("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(S=C.exec(g))!==null;){let[,y,i,e]=S;if(y=parseInt(y,10),y in h){if(y===0)break;continue}h[y]=[i,e]}const _=[];for(let y=0;y<h.length&&y in h;++y){let[i,e]=h[y];e=v(e),i&&(e=unescape(e),y===0&&(e=f(e))),_.push(e)}return _.join("")}function v(g){if(g.startsWith('"')){const h=g.slice(1).split('\\"');for(let S=0;S<h.length;++S){const C=h[S].indexOf('"');C!==-1&&(h[S]=h[S].slice(0,C),h.length=S+1),h[S]=h[S].replaceAll(/\\(.)/g,"$1")}g=h.join('"')}return g}function f(g){const h=g.indexOf("'");if(h===-1)return g;const S=g.slice(0,h),_=g.slice(h+1).replace(/^[^']*'/,"");return u(S,_)}function c(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,S,C,_){if(C==="q"||C==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,i){return String.fromCharCode(parseInt(i,16))}),u(S,_);try{_=atob(_)}catch{}return u(S,_)})}return""}},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNetworkStream=void 0;var p=it(1),F=it(20);const lt=200,H=206;function I(v){const f=v.response;return typeof f!="string"?f:(0,p.stringToBytes)(f).buffer}class x{constructor(f,c={}){this.url=f,this.isHttp=/^https?:/i.test(f),this.httpHeaders=this.isHttp&&c.httpHeaders||Object.create(null),this.withCredentials=c.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(f,c,g){const h={begin:f,end:c};for(const S in g)h[S]=g[S];return this.request(h)}requestFull(f){return this.request(f)}request(f){const c=new XMLHttpRequest,g=this.currXhrId++,h=this.pendingRequests[g]={xhr:c};c.open("GET",this.url),c.withCredentials=this.withCredentials;for(const S in this.httpHeaders){const C=this.httpHeaders[S];C!==void 0&&c.setRequestHeader(S,C)}return this.isHttp&&"begin"in f&&"end"in f?(c.setRequestHeader("Range",`bytes=${f.begin}-${f.end-1}`),h.expectedStatus=H):h.expectedStatus=lt,c.responseType="arraybuffer",f.onError&&(c.onerror=function(S){f.onError(c.status)}),c.onreadystatechange=this.onStateChange.bind(this,g),c.onprogress=this.onProgress.bind(this,g),h.onHeadersReceived=f.onHeadersReceived,h.onDone=f.onDone,h.onError=f.onError,h.onProgress=f.onProgress,c.send(null),g}onProgress(f,c){var h;const g=this.pendingRequests[f];g&&((h=g.onProgress)==null||h.call(g,c))}onStateChange(f,c){var y,i,e;const g=this.pendingRequests[f];if(!g)return;const h=g.xhr;if(h.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),h.readyState!==4||!(f in this.pendingRequests))return;if(delete this.pendingRequests[f],h.status===0&&this.isHttp){(y=g.onError)==null||y.call(g,h.status);return}const S=h.status||lt;if(!(S===lt&&g.expectedStatus===H)&&S!==g.expectedStatus){(i=g.onError)==null||i.call(g,h.status);return}const _=I(h);if(S===H){const E=h.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(E);g.onDone({begin:parseInt(b[1],10),chunk:_})}else _?g.onDone({begin:0,chunk:_}):(e=g.onError)==null||e.call(g,h.status)}getRequestXhr(f){return this.pendingRequests[f].xhr}isPendingRequest(f){return f in this.pendingRequests}abortRequest(f){const c=this.pendingRequests[f].xhr;delete this.pendingRequests[f],c.abort()}}class u{constructor(f){this._source=f,this._manager=new x(f.url,{httpHeaders:f.httpHeaders,withCredentials:f.withCredentials}),this._rangeChunkSize=f.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(f){const c=this._rangeRequestReaders.indexOf(f);c>=0&&this._rangeRequestReaders.splice(c,1)}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(f,c){const g=new k(this._manager,f,c);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(f){var c;(c=this._fullRequestReader)==null||c.cancel(f);for(const g of this._rangeRequestReaders.slice(0))g.cancel(f)}}l.PDFNetworkStream=u;class s{constructor(f,c){this._manager=f;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=c.url,this._fullRequestId=f.requestFull(g),this._headersReceivedCapability=new p.PromiseCapability,this._disableRange=c.disableRange||!1,this._contentLength=c.length,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const f=this._fullRequestId,c=this._manager.getRequestXhr(f),g=C=>c.getResponseHeader(C),{allowRangeRequests:h,suggestedLength:S}=(0,F.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});h&&(this._isRangeSupported=!0),this._contentLength=S||this._contentLength,this._filename=(0,F.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(f),this._headersReceivedCapability.resolve()}_onDone(f){if(f&&(this._requests.length>0?this._requests.shift().resolve({value:f.chunk,done:!1}):this._cachedChunks.push(f.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(f){this._storedError=(0,F.createResponseStatusError)(f,this._url),this._headersReceivedCapability.reject(this._storedError);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(f){var c;(c=this.onProgress)==null||c.call(this,{loaded:f.loaded,total:f.lengthComputable?f.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=new p.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0,this._headersReceivedCapability.reject(f);for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class k{constructor(f,c,g){this._manager=f;const h={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._requestId=f.requestRange(c,g,h),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var f;(f=this.onClosed)==null||f.call(this,this)}_onDone(f){const c=f.chunk;this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunk=c,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(f){this._storedError=(0,F.createResponseStatusError)(f,this._url);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(f){var c;this.isStreamingSupported||(c=this.onProgress)==null||c.call(this,{loaded:f.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const f=new p.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNodeStream=void 0;var p=it(1),F=it(20);const lt=/^file:\/\/\/[a-zA-Z]:\//;function H(g){const h=require$$5,S=h.parse(g);return S.protocol==="file:"||S.host?S:/^[a-z]:[/\\]/i.test(g)?h.parse(`file:///${g}`):(S.host||(S.protocol="file:"),S)}class I{constructor(h){this.source=h,this.url=H(h.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&h.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var h;return((h=this._fullRequestReader)==null?void 0:h._loaded)??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new f(this):new k(this),this._fullRequestReader}getRangeReader(h,S){if(S<=this._progressiveDataLength)return null;const C=this.isFsUrl?new c(this,h,S):new v(this,h,S);return this._rangeRequestReaders.push(C),C}cancelAllRequests(h){var S;(S=this._fullRequestReader)==null||S.cancel(h);for(const C of this._rangeRequestReaders.slice(0))C.cancel(h)}}l.PDFNodeStream=I;class x{constructor(h){this._url=h.url,this._done=!1,this._storedError=null,this.onProgress=null;const S=h.source;this._contentLength=S.length,this._loaded=0,this._filename=null,this._disableRange=S.disableRange||!1,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!S.disableStream,this._isRangeSupported=!S.disableRange,this._readableStream=null,this._readCapability=new p.PromiseCapability,this._headersCapability=new p.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var C;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const h=this._readableStream.read();return h===null?(this._readCapability=new p.PromiseCapability,this.read()):(this._loaded+=h.length,(C=this.onProgress)==null||C.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(h).buffer,done:!1})}cancel(h){if(!this._readableStream){this._error(h);return}this._readableStream.destroy(h)}_error(h){this._storedError=h,this._readCapability.resolve()}_setReadableStream(h){this._readableStream=h,h.on("readable",()=>{this._readCapability.resolve()}),h.on("end",()=>{h.destroy(),this._done=!0,this._readCapability.resolve()}),h.on("error",S=>{this._error(S)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new p.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(h){this._url=h.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new p.PromiseCapability;const S=h.source;this._isStreamingSupported=!S.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var C;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const h=this._readableStream.read();return h===null?(this._readCapability=new p.PromiseCapability,this.read()):(this._loaded+=h.length,(C=this.onProgress)==null||C.call(this,{loaded:this._loaded}),{value:new Uint8Array(h).buffer,done:!1})}cancel(h){if(!this._readableStream){this._error(h);return}this._readableStream.destroy(h)}_error(h){this._storedError=h,this._readCapability.resolve()}_setReadableStream(h){this._readableStream=h,h.on("readable",()=>{this._readCapability.resolve()}),h.on("end",()=>{h.destroy(),this._done=!0,this._readCapability.resolve()}),h.on("error",S=>{this._error(S)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function s(g,h){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:h}}class k extends x{constructor(h){super(h);const S=C=>{if(C.statusCode===404){const e=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e,this._headersCapability.reject(e);return}this._headersCapability.resolve(),this._setReadableStream(C);const _=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:y,suggestedLength:i}=(0,F.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:h.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=i||this._contentLength,this._filename=(0,F.extractFilenameFromHeader)(_)};if(this._request=null,this._url.protocol==="http:"){const C=require$$5;this._request=C.request(s(this._url,h.httpHeaders),S)}else{const C=require$$5;this._request=C.request(s(this._url,h.httpHeaders),S)}this._request.on("error",C=>{this._storedError=C,this._headersCapability.reject(C)}),this._request.end()}}class v extends u{constructor(h,S,C){super(h),this._httpHeaders={};for(const y in h.httpHeaders){const i=h.httpHeaders[y];i!==void 0&&(this._httpHeaders[y]=i)}this._httpHeaders.Range=`bytes=${S}-${C-1}`;const _=y=>{if(y.statusCode===404){const i=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i;return}this._setReadableStream(y)};if(this._request=null,this._url.protocol==="http:"){const y=require$$5;this._request=y.request(s(this._url,this._httpHeaders),_)}else{const y=require$$5;this._request=y.request(s(this._url,this._httpHeaders),_)}this._request.on("error",y=>{this._storedError=y}),this._request.end()}}class f extends x{constructor(h){super(h);let S=decodeURIComponent(this._url.path);lt.test(this._url.href)&&(S=S.replace(/^\//,""));const C=require$$5;C.lstat(S,(_,y)=>{if(_){_.code==="ENOENT"&&(_=new p.MissingPDFException(`Missing PDF "${S}".`)),this._storedError=_,this._headersCapability.reject(_);return}this._contentLength=y.size,this._setReadableStream(C.createReadStream(S)),this._headersCapability.resolve()})}}class c extends u{constructor(h,S,C){super(h);let _=decodeURIComponent(this._url.path);lt.test(this._url.href)&&(_=_.replace(/^\//,""));const y=require$$5;this._setReadableStream(y.createReadStream(_,{start:S,end:C-1}))}}},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SVGGraphics=void 0;var p=it(6),F=it(1);const lt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},H="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/1999/xlink",x=["butt","round","square"],u=["miter","round","bevel"],s=function(y,i="",e=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!e)return URL.createObjectURL(new Blob([y],{type:i}));const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b=`data:${i};base64,`;for(let o=0,M=y.length;o<M;o+=3){const w=y[o]&255,j=y[o+1]&255,Z=y[o+2]&255,P=w>>2,$=(w&3)<<4|j>>4,K=o+1<M?(j&15)<<2|Z>>6:64,G=o+2<M?Z&63:64;b+=E[P]+E[$]+E[K]+E[G]}return b},k=function(){const y=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,e=new Int32Array(256);for(let Z=0;Z<256;Z++){let P=Z;for(let $=0;$<8;$++)P=P&1?3988292384^P>>1&2147483647:P>>1&2147483647;e[Z]=P}function E(Z,P,$){let K=-1;for(let G=P;G<$;G++){const B=(K^Z[G])&255,at=e[B];K=K>>>8^at}return K^-1}function b(Z,P,$,K){let G=K;const B=P.length;$[G]=B>>24&255,$[G+1]=B>>16&255,$[G+2]=B>>8&255,$[G+3]=B&255,G+=4,$[G]=Z.charCodeAt(0)&255,$[G+1]=Z.charCodeAt(1)&255,$[G+2]=Z.charCodeAt(2)&255,$[G+3]=Z.charCodeAt(3)&255,G+=4,$.set(P,G),G+=P.length;const at=E($,K+4,G);$[G]=at>>24&255,$[G+1]=at>>16&255,$[G+2]=at>>8&255,$[G+3]=at&255}function o(Z,P,$){let K=1,G=0;for(let B=P;B<$;++B)K=(K+(Z[B]&255))%65521,G=(G+K)%65521;return G<<16|K}function M(Z){if(!F.isNodeJS)return w(Z);try{const P=parseInt(process.versions.node)>=8?Z:Buffer.from(Z),$=require$$5.deflateSync(P,{level:9});return $ instanceof Uint8Array?$:new Uint8Array($)}catch(P){(0,F.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+P)}return w(Z)}function w(Z){let P=Z.length;const $=65535,K=Math.ceil(P/$),G=new Uint8Array(2+P+K*5+4);let B=0;G[B++]=120,G[B++]=156;let at=0;for(;P>$;)G[B++]=0,G[B++]=255,G[B++]=255,G[B++]=0,G[B++]=0,G.set(Z.subarray(at,at+$),B),B+=$,at+=$,P-=$;G[B++]=1,G[B++]=P&255,G[B++]=P>>8&255,G[B++]=~P&65535&255,G[B++]=(~P&65535)>>8&255,G.set(Z.subarray(at),B),B+=Z.length-at;const W=o(Z,0,Z.length);return G[B++]=W>>24&255,G[B++]=W>>16&255,G[B++]=W>>8&255,G[B++]=W&255,G}function j(Z,P,$,K){const G=Z.width,B=Z.height;let at,W,wt;const Pt=Z.data;switch(P){case F.ImageKind.GRAYSCALE_1BPP:W=0,at=1,wt=G+7>>3;break;case F.ImageKind.RGB_24BPP:W=2,at=8,wt=G*3;break;case F.ImageKind.RGBA_32BPP:W=6,at=8,wt=G*4;break;default:throw new Error("invalid format")}const D=new Uint8Array((1+wt)*B);let n=0,d=0;for(let tt=0;tt<B;++tt)D[n++]=0,D.set(Pt.subarray(d,d+wt),n),d+=wt,n+=wt;if(P===F.ImageKind.GRAYSCALE_1BPP&&K){n=0;for(let tt=0;tt<B;tt++){n++;for(let mt=0;mt<wt;mt++)D[n++]^=255}}const a=new Uint8Array([G>>24&255,G>>16&255,G>>8&255,G&255,B>>24&255,B>>16&255,B>>8&255,B&255,at,W,0,0,0]),A=M(D),T=y.length+i*3+a.length+A.length,N=new Uint8Array(T);let X=0;return N.set(y,X),X+=y.length,b("IHDR",a,N,X),X+=i+a.length,b("IDATA",A,N,X),X+=i+A.length,b("IEND",new Uint8Array(0),N,X),s(N,"image/png",$)}return function(P,$,K){const G=P.kind===void 0?F.ImageKind.GRAYSCALE_1BPP:P.kind;return j(P,G,$,K)}}();class v{constructor(){this.fontSizeScale=1,this.fontWeight=lt.fontWeight,this.fontSize=0,this.textMatrix=F.IDENTITY_MATRIX,this.fontMatrix=F.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=F.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=lt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,e){this.x=i,this.y=e}}function f(y){let i=[];const e=[];for(const E of y){if(E.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),e.push(i),i=i.at(-1).items;continue}E.fn==="restore"?i=e.pop():i.push(E)}return i}function c(y){if(Number.isInteger(y))return y.toString();const i=y.toFixed(10);let e=i.length-1;if(i[e]!=="0")return i;do e--;while(i[e]==="0");return i.substring(0,i[e]==="."?e:e+1)}function g(y){if(y[4]===0&&y[5]===0){if(y[1]===0&&y[2]===0)return y[0]===1&&y[3]===1?"":`scale(${c(y[0])} ${c(y[3])})`;if(y[0]===y[3]&&y[1]===-y[2]){const i=Math.acos(y[0])*180/Math.PI;return`rotate(${c(i)})`}}else if(y[0]===1&&y[1]===0&&y[2]===0&&y[3]===1)return`translate(${c(y[4])} ${c(y[5])})`;return`matrix(${c(y[0])} ${c(y[1])} ${c(y[2])} ${c(y[3])} ${c(y[4])} ${c(y[5])})`}let h=0,S=0,C=0;class _{constructor(i,e,E=!1){(0,p.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new p.DOMSVGFactory,this.current=new v,this.transformMatrix=F.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!E,this._operatorIdMapping=[];for(const b in F.OPS)this._operatorIdMapping[F.OPS[b]]=b}getObject(i,e=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):e}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const e=i.fnArray,E=i.argsArray;for(let b=0,o=e.length;b<o;b++)if(e[b]===F.OPS.dependency)for(const M of E[b]){const w=M.startsWith("g_")?this.commonObjs:this.objs,j=new Promise(Z=>{w.get(M,Z)});this.current.dependencies.push(j)}return Promise.all(this.current.dependencies)}transform(i,e,E,b,o,M){const w=[i,e,E,b,o,M];this.transformMatrix=F.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(i,e){this.viewport=e;const E=this._initialize(e);return this.loadDependencies(i).then(()=>(this.transformMatrix=F.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),E))}convertOpList(i){const e=this._operatorIdMapping,E=i.argsArray,b=i.fnArray,o=[];for(let M=0,w=b.length;M<w;M++){const j=b[M];o.push({fnId:j,fn:e[j],args:E[M]})}return f(o)}executeOpTree(i){for(const e of i){const E=e.fn,b=e.fnId,o=e.args;switch(b|0){case F.OPS.beginText:this.beginText();break;case F.OPS.dependency:break;case F.OPS.setLeading:this.setLeading(o);break;case F.OPS.setLeadingMoveText:this.setLeadingMoveText(o[0],o[1]);break;case F.OPS.setFont:this.setFont(o);break;case F.OPS.showText:this.showText(o[0]);break;case F.OPS.showSpacedText:this.showText(o[0]);break;case F.OPS.endText:this.endText();break;case F.OPS.moveText:this.moveText(o[0],o[1]);break;case F.OPS.setCharSpacing:this.setCharSpacing(o[0]);break;case F.OPS.setWordSpacing:this.setWordSpacing(o[0]);break;case F.OPS.setHScale:this.setHScale(o[0]);break;case F.OPS.setTextMatrix:this.setTextMatrix(o[0],o[1],o[2],o[3],o[4],o[5]);break;case F.OPS.setTextRise:this.setTextRise(o[0]);break;case F.OPS.setTextRenderingMode:this.setTextRenderingMode(o[0]);break;case F.OPS.setLineWidth:this.setLineWidth(o[0]);break;case F.OPS.setLineJoin:this.setLineJoin(o[0]);break;case F.OPS.setLineCap:this.setLineCap(o[0]);break;case F.OPS.setMiterLimit:this.setMiterLimit(o[0]);break;case F.OPS.setFillRGBColor:this.setFillRGBColor(o[0],o[1],o[2]);break;case F.OPS.setStrokeRGBColor:this.setStrokeRGBColor(o[0],o[1],o[2]);break;case F.OPS.setStrokeColorN:this.setStrokeColorN(o);break;case F.OPS.setFillColorN:this.setFillColorN(o);break;case F.OPS.shadingFill:this.shadingFill(o[0]);break;case F.OPS.setDash:this.setDash(o[0],o[1]);break;case F.OPS.setRenderingIntent:this.setRenderingIntent(o[0]);break;case F.OPS.setFlatness:this.setFlatness(o[0]);break;case F.OPS.setGState:this.setGState(o[0]);break;case F.OPS.fill:this.fill();break;case F.OPS.eoFill:this.eoFill();break;case F.OPS.stroke:this.stroke();break;case F.OPS.fillStroke:this.fillStroke();break;case F.OPS.eoFillStroke:this.eoFillStroke();break;case F.OPS.clip:this.clip("nonzero");break;case F.OPS.eoClip:this.clip("evenodd");break;case F.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case F.OPS.paintImageXObject:this.paintImageXObject(o[0]);break;case F.OPS.paintInlineImageXObject:this.paintInlineImageXObject(o[0]);break;case F.OPS.paintImageMaskXObject:this.paintImageMaskXObject(o[0]);break;case F.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(o[0],o[1]);break;case F.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case F.OPS.closePath:this.closePath();break;case F.OPS.closeStroke:this.closeStroke();break;case F.OPS.closeFillStroke:this.closeFillStroke();break;case F.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case F.OPS.nextLine:this.nextLine();break;case F.OPS.transform:this.transform(o[0],o[1],o[2],o[3],o[4],o[5]);break;case F.OPS.constructPath:this.constructPath(o[0],o[1]);break;case F.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,F.warn)(`Unimplemented operator ${E}`);break}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,e,E,b,o,M){const w=this.current;w.textMatrix=w.lineMatrix=[i,e,E,b,o,M],w.textMatrixScale=Math.hypot(i,e),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${c(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",c(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.append(w.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=F.IDENTITY_MATRIX,i.lineMatrix=F.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,e){const E=this.current;E.x=E.lineX+=i,E.y=E.lineY+=e,E.xcoords=[],E.ycoords=[],E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${c(E.fontSize)}px`),E.tspan.setAttributeNS(null,"y",c(-E.y))}showText(i){const e=this.current,E=e.font,b=e.fontSize;if(b===0)return;const o=e.fontSizeScale,M=e.charSpacing,w=e.wordSpacing,j=e.fontDirection,Z=e.textHScale*j,P=E.vertical,$=P?1:-1,K=E.defaultVMetrics,G=b*e.fontMatrix[0];let B=0;for(const wt of i){if(wt===null){B+=j*w;continue}else if(typeof wt=="number"){B+=$*wt*b/1e3;continue}const Pt=(wt.isSpace?w:0)+M,D=wt.fontChar;let n,d,a=wt.width;if(P){let T;const N=wt.vmetric||K;T=wt.vmetric?N[1]:a*.5,T=-T*G;const X=N[2]*G;a=N?-N[0]:a,n=T/o,d=(B+X)/o}else n=B/o,d=0;(wt.isInFont||E.missingFile)&&(e.xcoords.push(e.x+n),P&&e.ycoords.push(-e.y+d),e.tspan.textContent+=D);const A=P?a*G-Pt*j:a*G+Pt*j;B+=A}e.tspan.setAttributeNS(null,"x",e.xcoords.map(c).join(" ")),P?e.tspan.setAttributeNS(null,"y",e.ycoords.map(c).join(" ")):e.tspan.setAttributeNS(null,"y",c(-e.y)),P?e.y-=B:e.x+=B*Z,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${c(e.fontSize)}px`),e.fontStyle!==lt.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==lt.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const at=e.textRenderingMode&F.TextRenderingMode.FILL_STROKE_MASK;if(at===F.TextRenderingMode.FILL||at===F.TextRenderingMode.FILL_STROKE?(e.fillColor!==lt.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===F.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),at===F.TextRenderingMode.STROKE||at===F.TextRenderingMode.FILL_STROKE){const wt=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,wt)}let W=e.textMatrix;e.textRise!==0&&(W=W.slice(),W[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${g(W)} scale(${c(Z)}, -1)`),e.txtElement.setAttributeNS(H,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(i,e){this.setLeading(-e),this.moveText(i,e)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=s(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${e}); }
`}setFont(i){const e=this.current,E=this.commonObjs.get(i[0]);let b=i[1];e.font=E,this.embedFonts&&!E.missingFile&&!this.embeddedFonts[E.loadedName]&&(this.addFontStyle(E),this.embeddedFonts[E.loadedName]=E),e.fontMatrix=E.fontMatrix||F.FONT_IDENTITY_MATRIX;let o="normal";E.black?o="900":E.bold&&(o="bold");const M=E.italic?"italic":"normal";b<0?(b=-b,e.fontDirection=-1):e.fontDirection=1,e.fontSize=b,e.fontFamily=E.loadedName,e.fontWeight=o,e.fontStyle=M,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",c(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var e;const i=this.current;i.textRenderingMode&F.TextRenderingMode.ADD_TO_PATH_FLAG&&((e=i.txtElement)!=null&&e.hasChildNodes())&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=x[i]}setLineJoin(i){this.current.lineJoin=u[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,e,E){this.current.strokeColor=F.Util.makeHexColor(i,e,E)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,e,E){this.current.fillColor=F.Util.makeHexColor(i,e,E),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const{width:e,height:E}=this.viewport,b=F.Util.inverseTransform(this.transformMatrix),[o,M,w,j]=F.Util.getAxialAlignedBoundingBox([0,0,e,E],b),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",o),Z.setAttributeNS(null,"y",M),Z.setAttributeNS(null,"width",w-o),Z.setAttributeNS(null,"height",j-M),Z.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&Z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Z)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const e=i[1],E=i[2],b=i[3]||F.IDENTITY_MATRIX,[o,M,w,j]=i[4],Z=i[5],P=i[6],$=i[7],K=`shading${C++}`,[G,B,at,W]=F.Util.normalizeRect([...F.Util.applyTransform([o,M],b),...F.Util.applyTransform([w,j],b)]),[wt,Pt]=F.Util.singularValueDecompose2dScale(b),D=Z*wt,n=P*Pt,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",K),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",D),d.setAttributeNS(null,"height",n),d.setAttributeNS(null,"x",`${G}`),d.setAttributeNS(null,"y",`${B}`);const a=this.svg,A=this.transformMatrix,T=this.current.fillColor,N=this.current.strokeColor,X=this.svgFactory.create(at-G,W-B);if(this.svg=X,this.transformMatrix=b,$===2){const tt=F.Util.makeHexColor(...e);this.current.fillColor=tt,this.current.strokeColor=tt}return this.executeOpTree(this.convertOpList(E)),this.svg=a,this.transformMatrix=A,this.current.fillColor=T,this.current.strokeColor=N,d.append(X.childNodes[0]),this.defs.append(d),`url(#${K})`}_makeShadingPattern(i){switch(typeof i=="string"&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const e=`shading${C++}`,E=i[3];let b;switch(i[1]){case"axial":const o=i[4],M=i[5];b=this.svgFactory.createElement("svg:linearGradient"),b.setAttributeNS(null,"id",e),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"x1",o[0]),b.setAttributeNS(null,"y1",o[1]),b.setAttributeNS(null,"x2",M[0]),b.setAttributeNS(null,"y2",M[1]);break;case"radial":const w=i[4],j=i[5],Z=i[6],P=i[7];b=this.svgFactory.createElement("svg:radialGradient"),b.setAttributeNS(null,"id",e),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"cx",j[0]),b.setAttributeNS(null,"cy",j[1]),b.setAttributeNS(null,"r",P),b.setAttributeNS(null,"fx",w[0]),b.setAttributeNS(null,"fy",w[1]),b.setAttributeNS(null,"fr",Z);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const o of E){const M=this.svgFactory.createElement("svg:stop");M.setAttributeNS(null,"offset",o[0]),M.setAttributeNS(null,"stop-color",o[1]),b.append(M)}return this.defs.append(b),`url(#${e})`;case"Mesh":return(0,F.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,e){this.current.dashArray=i,this.current.dashPhase=e}constructPath(i,e){const E=this.current;let b=E.x,o=E.y,M=[],w=0;for(const j of i)switch(j|0){case F.OPS.rectangle:b=e[w++],o=e[w++];const Z=e[w++],P=e[w++],$=b+Z,K=o+P;M.push("M",c(b),c(o),"L",c($),c(o),"L",c($),c(K),"L",c(b),c(K),"Z");break;case F.OPS.moveTo:b=e[w++],o=e[w++],M.push("M",c(b),c(o));break;case F.OPS.lineTo:b=e[w++],o=e[w++],M.push("L",c(b),c(o));break;case F.OPS.curveTo:b=e[w+4],o=e[w+5],M.push("C",c(e[w]),c(e[w+1]),c(e[w+2]),c(e[w+3]),c(b),c(o)),w+=6;break;case F.OPS.curveTo2:M.push("C",c(b),c(o),c(e[w]),c(e[w+1]),c(e[w+2]),c(e[w+3])),b=e[w+2],o=e[w+3],w+=4;break;case F.OPS.curveTo3:b=e[w+2],o=e[w+3],M.push("C",c(e[w]),c(e[w+1]),c(b),c(o),c(b),c(o)),w+=4;break;case F.OPS.closePath:M.push("Z");break}M=M.join(" "),E.path&&i.length>0&&i[0]!==F.OPS.rectangle&&i[0]!==F.OPS.moveTo?M=E.path.getAttributeNS(null,"d")+M:(E.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(E.path)),E.path.setAttributeNS(null,"d",M),E.path.setAttributeNS(null,"fill","none"),E.element=E.path,E.setCurrentPoint(b,o)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const e=`clippath${h++}`,E=this.svgFactory.createElement("svg:clipPath");E.setAttributeNS(null,"id",e),E.setAttributeNS(null,"transform",g(this.transformMatrix));const b=i.element.cloneNode(!0);if(this.pendingClip==="evenodd"?b.setAttributeNS(null,"clip-rule","evenodd"):b.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,E.append(b),this.defs.append(E),i.activeClipUrl){i.clipGroup=null;for(const o of this.extraStack)o.clipGroup=null;E.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const e=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",e)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[e,E]of i)switch(e){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E);break;case"CA":this.setStrokeAlpha(E);break;case"ca":this.setFillAlpha(E);break;default:(0,F.warn)(`Unimplemented graphic state operator ${e}`);break}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,e=1){const E=this.current;let b=E.dashArray;e!==1&&b.length>0&&(b=b.map(function(o){return e*o})),i.setAttributeNS(null,"stroke",E.strokeColor),i.setAttributeNS(null,"stroke-opacity",E.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",c(E.miterLimit)),i.setAttributeNS(null,"stroke-linecap",E.lineCap),i.setAttributeNS(null,"stroke-linejoin",E.lineJoin),i.setAttributeNS(null,"stroke-width",c(e*E.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",b.map(c).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",c(e*E.dashPhase)+"px")}eoFill(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const e=this.getObject(i);if(!e){(0,F.warn)(`Dependent image with object ID ${i} is not ready yet`);return}this.paintInlineImageXObject(e)}paintInlineImageXObject(i,e){const E=i.width,b=i.height,o=k(i,this.forceDataSchema,!!e),M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",c(E)),M.setAttributeNS(null,"height",c(b)),this.current.element=M,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(I,"xlink:href",o),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",c(-b)),w.setAttributeNS(null,"width",c(E)+"px"),w.setAttributeNS(null,"height",c(b)+"px"),w.setAttributeNS(null,"transform",`scale(${c(1/E)} ${c(-1/b)})`),e?e.append(w):this._ensureTransformGroup().append(w)}paintImageMaskXObject(i){const e=this.getObject(i.data,i);if(e.bitmap){(0,F.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const E=this.current,b=e.width,o=e.height,M=E.fillColor;E.maskId=`mask${S++}`;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",E.maskId);const j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",c(b)),j.setAttributeNS(null,"height",c(o)),j.setAttributeNS(null,"fill",M),j.setAttributeNS(null,"mask",`url(#${E.maskId})`),this.defs.append(w),this._ensureTransformGroup().append(j),this.paintInlineImageXObject(e,w)}paintFormXObjectBegin(i,e){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e){const E=e[2]-e[0],b=e[3]-e[1],o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x",e[0]),o.setAttributeNS(null,"y",e[1]),o.setAttributeNS(null,"width",c(E)),o.setAttributeNS(null,"height",c(b)),this.current.element=o,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const e=this.svgFactory.create(i.width,i.height),E=this.svgFactory.createElement("svg:defs");e.append(E),this.defs=E;const b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",g(i.transform)),e.append(b),this.svg=b,e}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}l.SVGGraphics=_},(yt,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaText=void 0;class it{static textContent(F){const lt=[],H={items:lt,styles:Object.create(null)};function I(x){var k;if(!x)return;let u=null;const s=x.name;if(s==="#text")u=x.value;else if(it.shouldBuildText(s))(k=x==null?void 0:x.attributes)!=null&&k.textContent?u=x.attributes.textContent:x.value&&(u=x.value);else return;if(u!==null&&lt.push({str:u}),!!x.children)for(const v of x.children)I(v)}return I(F),H}static shouldBuildText(F){return!(F==="textarea"||F==="input"||F==="option"||F==="select")}}l.XfaText=it},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TextLayerRenderTask=void 0,l.renderTextLayer=g,l.updateTextLayer=h;var p=it(1),F=it(6);const lt=1e5,H=30,I=.8,x=new Map;function u(S,C){let _;if(C&&p.FeatureTest.isOffscreenCanvasSupported)_=new OffscreenCanvas(S,S).getContext("2d",{alpha:!1});else{const y=document.createElement("canvas");y.width=y.height=S,_=y.getContext("2d",{alpha:!1})}return _}function s(S,C){const _=x.get(S);if(_)return _;const y=u(H,C);y.font=`${H}px ${S}`;const i=y.measureText("");let e=i.fontBoundingBoxAscent,E=Math.abs(i.fontBoundingBoxDescent);if(e){const o=e/(e+E);return x.set(S,o),y.canvas.width=y.canvas.height=0,o}y.strokeStyle="red",y.clearRect(0,0,H,H),y.strokeText("g",0,0);let b=y.getImageData(0,0,H,H).data;E=0;for(let o=b.length-1-3;o>=0;o-=4)if(b[o]>0){E=Math.ceil(o/4/H);break}y.clearRect(0,0,H,H),y.strokeText("A",0,H),b=y.getImageData(0,0,H,H).data,e=0;for(let o=0,M=b.length;o<M;o+=4)if(b[o]>0){e=H-Math.floor(o/4/H);break}if(y.canvas.width=y.canvas.height=0,e){const o=e/(e+E);return x.set(S,o),o}return x.set(S,I),I}function k(S,C,_){const y=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL,fontSize:0};S._textDivs.push(y);const e=p.Util.transform(S._transform,C.transform);let E=Math.atan2(e[1],e[0]);const b=_[C.fontName];b.vertical&&(E+=Math.PI/2);const o=Math.hypot(e[2],e[3]),M=o*s(b.fontFamily,S._isOffscreenCanvasSupported);let w,j;E===0?(w=e[4],j=e[5]-M):(w=e[4]+M*Math.sin(E),j=e[5]-M*Math.cos(E));const Z="calc(var(--scale-factor)*",P=y.style;S._container===S._rootContainer?(P.left=`${(100*w/S._pageWidth).toFixed(2)}%`,P.top=`${(100*j/S._pageHeight).toFixed(2)}%`):(P.left=`${Z}${w.toFixed(2)}px)`,P.top=`${Z}${j.toFixed(2)}px)`),P.fontSize=`${Z}${o.toFixed(2)}px)`,P.fontFamily=b.fontFamily,i.fontSize=o,y.setAttribute("role","presentation"),y.textContent=C.str,y.dir=C.dir,S._fontInspectorEnabled&&(y.dataset.fontName=C.fontName),E!==0&&(i.angle=E*(180/Math.PI));let $=!1;if(C.str.length>1)$=!0;else if(C.str!==" "&&C.transform[0]!==C.transform[3]){const K=Math.abs(C.transform[0]),G=Math.abs(C.transform[3]);K!==G&&Math.max(K,G)/Math.min(K,G)>1.5&&($=!0)}$&&(i.canvasWidth=b.vertical?C.height:C.width),S._textDivProperties.set(y,i),S._isReadableStream&&S._layoutText(y)}function v(S){const{div:C,scale:_,properties:y,ctx:i,prevFontSize:e,prevFontFamily:E}=S,{style:b}=C;let o="";if(y.canvasWidth!==0&&y.hasText){const{fontFamily:M}=b,{canvasWidth:w,fontSize:j}=y;(e!==j||E!==M)&&(i.font=`${j*_}px ${M}`,S.prevFontSize=j,S.prevFontFamily=M);const{width:Z}=i.measureText(C.textContent);Z>0&&(o=`scaleX(${w*_/Z})`)}y.angle!==0&&(o=`rotate(${y.angle}deg) ${o}`),o.length>0&&(b.transform=o)}function f(S){if(S._canceled)return;const C=S._textDivs,_=S._capability;if(C.length>lt){_.resolve();return}if(!S._isReadableStream)for(const i of C)S._layoutText(i);_.resolve()}class c{constructor({textContentSource:C,container:_,viewport:y,textDivs:i,textDivProperties:e,textContentItemsStr:E,isOffscreenCanvasSupported:b}){var Z;this._textContentSource=C,this._isReadableStream=C instanceof ReadableStream,this._container=this._rootContainer=_,this._textDivs=i||[],this._textContentItemsStr=E||[],this._isOffscreenCanvasSupported=b,this._fontInspectorEnabled=!!((Z=globalThis.FontInspector)!=null&&Z.enabled),this._reader=null,this._textDivProperties=e||new WeakMap,this._canceled=!1,this._capability=new p.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,b)};const{pageWidth:o,pageHeight:M,pageX:w,pageY:j}=y.rawDims;this._transform=[1,0,0,-1,-w,j+M],this._pageWidth=o,this._pageHeight=M,(0,F.setLayerDimensions)(_,y),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new p.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new p.AbortException("TextLayer task cancelled."))}_processItems(C,_){for(const y of C){if(y.str===void 0){if(y.type==="beginMarkedContentProps"||y.type==="beginMarkedContent"){const i=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y.id!==null&&this._container.setAttribute("id",`${y.id}`),i.append(this._container)}else y.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y.str),k(this,y,_)}}_layoutText(C){const _=this._layoutTextParams.properties=this._textDivProperties.get(C);if(this._layoutTextParams.div=C,v(this._layoutTextParams),_.hasText&&this._container.append(C),_.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this._container.append(y)}}_render(){const C=new p.PromiseCapability;let _=Object.create(null);if(this._isReadableStream){const y=()=>{this._reader.read().then(({value:i,done:e})=>{if(e){C.resolve();return}Object.assign(_,i.styles),this._processItems(i.items,_),y()},C.reject)};this._reader=this._textContentSource.getReader(),y()}else if(this._textContentSource){const{items:y,styles:i}=this._textContentSource;this._processItems(y,i),C.resolve()}else throw new Error('No "textContentSource" parameter specified.');C.promise.then(()=>{_=null,f(this)},this._capability.reject)}}l.TextLayerRenderTask=c;function g(S){!S.textContentSource&&(S.textContent||S.textContentStream)&&((0,F.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),S.textContentSource=S.textContent||S.textContentStream);const{container:C,viewport:_}=S,y=getComputedStyle(C),i=y.getPropertyValue("visibility"),e=parseFloat(y.getPropertyValue("--scale-factor"));i==="visible"&&(!e||Math.abs(e-_.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const E=new c(S);return E._render(),E}function h({container:S,viewport:C,textDivs:_,textDivProperties:y,isOffscreenCanvasSupported:i,mustRotate:e=!0,mustRescale:E=!0}){if(e&&(0,F.setLayerDimensions)(S,{rotation:C.rotation}),E){const b=u(0,i),M={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b};for(const w of _)M.properties=y.get(w),M.div=w,v(M)}}},(yt,l,it)=>{var s,k,v,f,c,g,h,S,C,_,y,fi,e,Ie,b,pi,M,gi;Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditorLayer=void 0;var p=it(1),F=it(4),lt=it(28),H=it(33),I=it(6),x=it(34);const j=class j{constructor({uiManager:P,pageIndex:$,div:K,accessibilityManager:G,annotationLayer:B,viewport:at,l10n:W}){R(this,y);R(this,e);R(this,b);R(this,M);R(this,s,void 0);R(this,k,!1);R(this,v,null);R(this,f,this.pointerup.bind(this));R(this,c,this.pointerdown.bind(this));R(this,g,new Map);R(this,h,!1);R(this,S,!1);R(this,C,!1);R(this,_,void 0);const wt=[lt.FreeTextEditor,H.InkEditor,x.StampEditor];if(!j._initialized){j._initialized=!0;for(const Pt of wt)Pt.initialize(W)}P.registerEditorTypes(wt),Y(this,_,P),this.pageIndex=$,this.div=K,Y(this,s,G),Y(this,v,B),this.viewport=at,t(this,_).addLayer(this)}get isEmpty(){return t(this,g).size===0}updateToolbar(P){t(this,_).updateToolbar(P)}updateMode(P=t(this,_).getMode()){V(this,M,gi).call(this),P===p.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),P!==p.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",P===p.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",P===p.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",P===p.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(P){if(!P&&t(this,_).getMode()!==p.AnnotationEditorType.INK)return;if(!P){for(const K of t(this,g).values())if(K.isEmpty()){K.setInBackground();return}}V(this,e,Ie).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(P){t(this,_).setEditingState(P)}addCommands(P){t(this,_).addCommands(P)}enable(){this.div.style.pointerEvents="auto";const P=new Set;for(const K of t(this,g).values())K.enableEditing(),K.annotationElementId&&P.add(K.annotationElementId);if(!t(this,v))return;const $=t(this,v).getEditableAnnotations();for(const K of $){if(K.hide(),t(this,_).isDeletedAnnotationElement(K.data.id)||P.has(K.data.id))continue;const G=this.deserialize(K);G&&(this.addOrRebuild(G),G.enableEditing())}}disable(){var $;Y(this,C,!0),this.div.style.pointerEvents="none";const P=new Set;for(const K of t(this,g).values()){if(K.disableEditing(),!K.annotationElementId||K.serialize()!==null){P.add(K.annotationElementId);continue}($=this.getEditableAnnotation(K.annotationElementId))==null||$.show(),K.remove()}if(t(this,v)){const K=t(this,v).getEditableAnnotations();for(const G of K){const{id:B}=G.data;P.has(B)||t(this,_).isDeletedAnnotationElement(B)||G.show()}}V(this,M,gi).call(this),this.isEmpty&&(this.div.hidden=!0),Y(this,C,!1)}getEditableAnnotation(P){var $;return(($=t(this,v))==null?void 0:$.getEditableAnnotation(P))||null}setActiveEditor(P){t(this,_).getActive()!==P&&t(this,_).setActiveEditor(P)}enableClick(){this.div.addEventListener("pointerdown",t(this,c)),this.div.addEventListener("pointerup",t(this,f))}disableClick(){this.div.removeEventListener("pointerdown",t(this,c)),this.div.removeEventListener("pointerup",t(this,f))}attach(P){t(this,g).set(P.id,P);const{annotationElementId:$}=P;$&&t(this,_).isDeletedAnnotationElement($)&&t(this,_).removeDeletedAnnotationElement(P)}detach(P){var $;t(this,g).delete(P.id),($=t(this,s))==null||$.removePointerInTextLayer(P.contentDiv),!t(this,C)&&P.annotationElementId&&t(this,_).addDeletedAnnotationElement(P)}remove(P){this.detach(P),t(this,_).removeEditor(P),P.div.contains(document.activeElement)&&setTimeout(()=>{t(this,_).focusMainContainer()},0),P.div.remove(),P.isAttachedToDOM=!1,t(this,S)||this.addInkEditorIfNeeded(!1)}changeParent(P){var $;P.parent!==this&&(P.annotationElementId&&(t(this,_).addDeletedAnnotationElement(P.annotationElementId),F.AnnotationEditor.deleteAnnotationElement(P),P.annotationElementId=null),this.attach(P),($=P.parent)==null||$.detach(P),P.setParent(this),P.div&&P.isAttachedToDOM&&(P.div.remove(),this.div.append(P.div)))}add(P){if(this.changeParent(P),t(this,_).addEditor(P),this.attach(P),!P.isAttachedToDOM){const $=P.render();this.div.append($),P.isAttachedToDOM=!0}P.fixAndSetPosition(),P.onceAdded(),t(this,_).addToAnnotationStorage(P)}moveEditorInDOM(P){var K;if(!P.isAttachedToDOM)return;const{activeElement:$}=document;P.div.contains($)&&(P._focusEventsAllowed=!1,setTimeout(()=>{P.div.contains(document.activeElement)?P._focusEventsAllowed=!0:(P.div.addEventListener("focusin",()=>{P._focusEventsAllowed=!0},{once:!0}),$.focus())},0)),P._structTreeParentId=(K=t(this,s))==null?void 0:K.moveElementInDOM(this.div,P.div,P.contentDiv,!0)}addOrRebuild(P){P.needsToBeRebuilt()?P.rebuild():this.add(P)}addUndoableEditor(P){const $=()=>P._uiManager.rebuild(P),K=()=>{P.remove()};this.addCommands({cmd:$,undo:K,mustExec:!1})}getNextId(){return t(this,_).getId()}pasteEditor(P,$){t(this,_).updateToolbar(P),t(this,_).updateMode(P);const{offsetX:K,offsetY:G}=V(this,b,pi).call(this),B=this.getNextId(),at=V(this,y,fi).call(this,{parent:this,id:B,x:K,y:G,uiManager:t(this,_),isCentered:!0,...$});at&&this.add(at)}deserialize(P){switch(P.annotationType??P.annotationEditorType){case p.AnnotationEditorType.FREETEXT:return lt.FreeTextEditor.deserialize(P,this,t(this,_));case p.AnnotationEditorType.INK:return H.InkEditor.deserialize(P,this,t(this,_));case p.AnnotationEditorType.STAMP:return x.StampEditor.deserialize(P,this,t(this,_))}return null}addNewEditor(){V(this,e,Ie).call(this,V(this,b,pi).call(this),!0)}setSelected(P){t(this,_).setSelected(P)}toggleSelected(P){t(this,_).toggleSelected(P)}isSelected(P){return t(this,_).isSelected(P)}unselect(P){t(this,_).unselect(P)}pointerup(P){const{isMac:$}=p.FeatureTest.platform;if(!(P.button!==0||P.ctrlKey&&$)&&P.target===this.div&&t(this,h)){if(Y(this,h,!1),!t(this,k)){Y(this,k,!0);return}if(t(this,_).getMode()===p.AnnotationEditorType.STAMP){t(this,_).unselectAll();return}V(this,e,Ie).call(this,P,!1)}}pointerdown(P){if(t(this,h)){Y(this,h,!1);return}const{isMac:$}=p.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&$||P.target!==this.div)return;Y(this,h,!0);const K=t(this,_).getActive();Y(this,k,!K||K.isEmpty())}findNewParent(P,$,K){const G=t(this,_).findParent($,K);return G===null||G===this?!1:(G.changeParent(P),!0)}destroy(){var P,$;((P=t(this,_).getActive())==null?void 0:P.parent)===this&&(t(this,_).commitOrRemove(),t(this,_).setActiveEditor(null));for(const K of t(this,g).values())($=t(this,s))==null||$.removePointerInTextLayer(K.contentDiv),K.setParent(null),K.isAttachedToDOM=!1,K.div.remove();this.div=null,t(this,g).clear(),t(this,_).removeLayer(this)}render({viewport:P}){this.viewport=P,(0,I.setLayerDimensions)(this.div,P);for(const $ of t(this,_).getEditors(this.pageIndex))this.add($);this.updateMode()}update({viewport:P}){t(this,_).commitOrRemove(),this.viewport=P,(0,I.setLayerDimensions)(this.div,{rotation:P.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:P,pageHeight:$}=this.viewport.rawDims;return[P,$]}};s=new WeakMap,k=new WeakMap,v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakMap,S=new WeakMap,C=new WeakMap,_=new WeakMap,y=new WeakSet,fi=function(P){switch(t(this,_).getMode()){case p.AnnotationEditorType.FREETEXT:return new lt.FreeTextEditor(P);case p.AnnotationEditorType.INK:return new H.InkEditor(P);case p.AnnotationEditorType.STAMP:return new x.StampEditor(P)}return null},e=new WeakSet,Ie=function(P,$){const K=this.getNextId(),G=V(this,y,fi).call(this,{parent:this,id:K,x:P.offsetX,y:P.offsetY,uiManager:t(this,_),isCentered:$});return G&&this.add(G),G},b=new WeakSet,pi=function(){const{x:P,y:$,width:K,height:G}=this.div.getBoundingClientRect(),B=Math.max(0,P),at=Math.max(0,$),W=Math.min(window.innerWidth,P+K),wt=Math.min(window.innerHeight,$+G),Pt=(B+W)/2-P,D=(at+wt)/2-$,[n,d]=this.viewport.rotation%180===0?[Pt,D]:[D,Pt];return{offsetX:n,offsetY:d}},M=new WeakSet,gi=function(){Y(this,S,!0);for(const P of t(this,g).values())P.isEmpty()&&P.remove();Y(this,S,!1)},ee(j,"_initialized",!1);let u=j;l.AnnotationEditorLayer=u},(yt,l,it)=>{var x,u,s,k,v,f,c,g,h,S,dn,_,un,i,fn,E,Se,o,mi,w,pn,Z,_i;Object.defineProperty(l,"__esModule",{value:!0}),l.FreeTextEditor=void 0;var p=it(1),F=it(5),lt=it(4),H=it(29);const $=class $ extends lt.AnnotationEditor{constructor(B){super({...B,name:"freeTextEditor"});R(this,S);R(this,_);R(this,i);R(this,E);R(this,o);R(this,w);R(this,Z);R(this,x,this.editorDivBlur.bind(this));R(this,u,this.editorDivFocus.bind(this));R(this,s,this.editorDivInput.bind(this));R(this,k,this.editorDivKeydown.bind(this));R(this,v,void 0);R(this,f,"");R(this,c,`${this.id}-editor`);R(this,g,void 0);R(this,h,null);Y(this,v,B.color||$._defaultColor||lt.AnnotationEditor._defaultLineColor),Y(this,g,B.fontSize||$._defaultFontSize)}static get _keyboardManager(){const B=$.prototype,at=Pt=>Pt.isEmpty(),W=F.AnnotationEditorUIManager.TRANSLATE_SMALL,wt=F.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,p.shadow)(this,"_keyboardManager",new F.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],B.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],B.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],B._translateEmpty,{args:[-W,0],checker:at}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],B._translateEmpty,{args:[-wt,0],checker:at}],[["ArrowRight","mac+ArrowRight"],B._translateEmpty,{args:[W,0],checker:at}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],B._translateEmpty,{args:[wt,0],checker:at}],[["ArrowUp","mac+ArrowUp"],B._translateEmpty,{args:[0,-W],checker:at}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],B._translateEmpty,{args:[0,-wt],checker:at}],[["ArrowDown","mac+ArrowDown"],B._translateEmpty,{args:[0,W],checker:at}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],B._translateEmpty,{args:[0,wt],checker:at}]]))}static initialize(B){lt.AnnotationEditor.initialize(B,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const at=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(at.getPropertyValue("--freetext-padding"))}static updateDefaultParams(B,at){switch(B){case p.AnnotationEditorParamsType.FREETEXT_SIZE:$._defaultFontSize=at;break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:$._defaultColor=at;break}}updateParams(B,at){switch(B){case p.AnnotationEditorParamsType.FREETEXT_SIZE:V(this,S,dn).call(this,at);break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:V(this,_,un).call(this,at);break}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,$._defaultFontSize],[p.AnnotationEditorParamsType.FREETEXT_COLOR,$._defaultColor||lt.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,g)],[p.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,v)]]}_translateEmpty(B,at){this._uiManager.translateSelectedEditors(B,at,!0)}getInitialTranslation(){const B=this.parentScale;return[-$._internalPadding*B,-($._internalPadding+t(this,g))*B]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(p.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,k)),this.editorDiv.addEventListener("focus",t(this,u)),this.editorDiv.addEventListener("blur",t(this,x)),this.editorDiv.addEventListener("input",t(this,s)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,c)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,k)),this.editorDiv.removeEventListener("focus",t(this,u)),this.editorDiv.removeEventListener("blur",t(this,x)),this.editorDiv.removeEventListener("input",t(this,s)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(B){this._focusEventsAllowed&&(super.focusin(B),B.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var B;if(this.width){V(this,Z,_i).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(B=this._initialOptions)!=null&&B.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const B=t(this,f),at=Y(this,f,V(this,i,fn).call(this).trimEnd());if(B===at)return;const W=wt=>{if(Y(this,f,wt),!wt){this.remove();return}V(this,o,mi).call(this),this._uiManager.rebuild(this),V(this,E,Se).call(this)};this.addCommands({cmd:()=>{W(at)},undo:()=>{W(B)},mustExec:!1}),V(this,E,Se).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(B){this.enterInEditMode()}keydown(B){B.target===this.div&&B.key==="Enter"&&(this.enterInEditMode(),B.preventDefault())}editorDivKeydown(B){$._keyboardManager.exec(this,B)}editorDivFocus(B){this.isEditing=!0}editorDivBlur(B){this.isEditing=!1}editorDivInput(B){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let B,at;this.width&&(B=this.x,at=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,c)),this.enableEditing(),lt.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(wt=>{var Pt;return(Pt=this.editorDiv)==null?void 0:Pt.setAttribute("aria-label",wt)}),lt.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(wt=>{var Pt;return(Pt=this.editorDiv)==null?void 0:Pt.setAttribute("default-content",wt)}),this.editorDiv.contentEditable=!0;const{style:W}=this.editorDiv;if(W.fontSize=`calc(${t(this,g)}px * var(--scale-factor))`,W.color=t(this,v),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,F.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[wt,Pt]=this.parentDimensions;if(this.annotationElementId){const{position:D}=t(this,h);let[n,d]=this.getInitialTranslation();[n,d]=this.pageTranslationToScreen(n,d);const[a,A]=this.pageDimensions,[T,N]=this.pageTranslation;let X,tt;switch(this.rotation){case 0:X=B+(D[0]-T)/a,tt=at+this.height-(D[1]-N)/A;break;case 90:X=B+(D[0]-T)/a,tt=at-(D[1]-N)/A,[n,d]=[d,-n];break;case 180:X=B-this.width+(D[0]-T)/a,tt=at-(D[1]-N)/A,[n,d]=[-n,-d];break;case 270:X=B+(D[0]-T-this.height*A)/a,tt=at+(D[1]-N-this.width*a)/A,[n,d]=[-d,n];break}this.setAt(X*wt,tt*Pt,n,d)}else this.setAt(B*wt,at*Pt,this.width*wt,this.height*Pt);V(this,o,mi).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(B,at,W){let wt=null;if(B instanceof H.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:D,fontColor:n},rect:d,rotation:a,id:A},textContent:T,textPosition:N,parent:{page:{pageNumber:X}}}=B;if(!T||T.length===0)return null;wt=B={annotationType:p.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:D,value:T.join(`
`),position:N,pageIndex:X-1,rect:d,rotation:a,id:A,deleted:!1}}const Pt=super.deserialize(B,at,W);return Y(Pt,g,B.fontSize),Y(Pt,v,p.Util.makeHexColor(...B.color)),Y(Pt,f,B.value),Pt.annotationElementId=B.id||null,Y(Pt,h,wt),Pt}serialize(B=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const at=$._internalPadding*this.parentScale,W=this.getRect(at,at),wt=lt.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,v)),Pt={annotationType:p.AnnotationEditorType.FREETEXT,color:wt,fontSize:t(this,g),value:t(this,f),pageIndex:this.pageIndex,rect:W,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return B?Pt:this.annotationElementId&&!V(this,w,pn).call(this,Pt)?null:(Pt.id=this.annotationElementId,Pt)}};x=new WeakMap,u=new WeakMap,s=new WeakMap,k=new WeakMap,v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakMap,S=new WeakSet,dn=function(B){const at=wt=>{this.editorDiv.style.fontSize=`calc(${wt}px * var(--scale-factor))`,this.translate(0,-(wt-t(this,g))*this.parentScale),Y(this,g,wt),V(this,E,Se).call(this)},W=t(this,g);this.addCommands({cmd:()=>{at(B)},undo:()=>{at(W)},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,un=function(B){const at=t(this,v);this.addCommands({cmd:()=>{Y(this,v,this.editorDiv.style.color=B)},undo:()=>{Y(this,v,this.editorDiv.style.color=at)},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,fn=function(){const B=this.editorDiv.getElementsByTagName("div");if(B.length===0)return this.editorDiv.innerText;const at=[];for(const W of B)at.push(W.innerText.replace(/\r\n?|\n/,""));return at.join(`
`)},E=new WeakSet,Se=function(){const[B,at]=this.parentDimensions;let W;if(this.isAttachedToDOM)W=this.div.getBoundingClientRect();else{const{currentLayer:wt,div:Pt}=this,D=Pt.style.display;Pt.style.display="hidden",wt.div.append(this.div),W=Pt.getBoundingClientRect(),Pt.remove(),Pt.style.display=D}this.rotation%180===this.parentRotation%180?(this.width=W.width/B,this.height=W.height/at):(this.width=W.height/B,this.height=W.width/at),this.fixAndSetPosition()},o=new WeakSet,mi=function(){if(this.editorDiv.replaceChildren(),!!t(this,f))for(const B of t(this,f).split(`
`)){const at=document.createElement("div");at.append(B?document.createTextNode(B):document.createElement("br")),this.editorDiv.append(at)}},w=new WeakSet,pn=function(B){const{value:at,fontSize:W,color:wt,rect:Pt,pageIndex:D}=t(this,h);return B.value!==at||B.fontSize!==W||B.rect.some((n,d)=>Math.abs(n-Pt[d])>=1)||B.color.some((n,d)=>n!==wt[d])||B.pageIndex!==D},Z=new WeakSet,_i=function(B=!1){if(!this.annotationElementId)return;if(V(this,E,Se).call(this),!B&&(this.width===0||this.height===0)){setTimeout(()=>V(this,Z,_i).call(this,!0),0);return}const at=$._internalPadding*this.parentScale;t(this,h).rect=this.getRect(at,at)},ee($,"_freeTextDefaultContent",""),ee($,"_internalPadding",0),ee($,"_defaultColor",null),ee($,"_defaultFontSize",10),ee($,"_type","freetext");let I=$;l.FreeTextEditor=I},(yt,l,it)=>{var d,A,he,N,gn,tt,mt,ft,St,et,bt,pt,Lt,Ft,Mt,ht,rt,J,Q,gt,Tt,Rt,Bt,mn,Gt,Oe,Kt,bi,Jt,vi,m,L,ct,st,dt,_t,U,yi,xt,Et,Dt,Ot,_n,Ct,Ai;Object.defineProperty(l,"__esModule",{value:!0}),l.StampAnnotationElement=l.InkAnnotationElement=l.FreeTextAnnotationElement=l.AnnotationLayer=void 0;var p=it(1),F=it(6),lt=it(3),H=it(30),I=it(31),x=it(32);const u=1e3,s=9,k=new WeakSet;function v(Ut){return{width:Ut[2]-Ut[0],height:Ut[3]-Ut[1]}}class f{static create(q){switch(q.data.annotationType){case p.AnnotationType.LINK:return new g(q);case p.AnnotationType.TEXT:return new h(q);case p.AnnotationType.WIDGET:switch(q.data.fieldType){case"Tx":return new C(q);case"Btn":return q.data.radioButton?new i(q):q.data.checkBox?new y(q):new e(q);case"Ch":return new E(q);case"Sig":return new _(q)}return new S(q);case p.AnnotationType.POPUP:return new b(q);case p.AnnotationType.FREETEXT:return new M(q);case p.AnnotationType.LINE:return new w(q);case p.AnnotationType.SQUARE:return new j(q);case p.AnnotationType.CIRCLE:return new Z(q);case p.AnnotationType.POLYLINE:return new P(q);case p.AnnotationType.CARET:return new K(q);case p.AnnotationType.INK:return new G(q);case p.AnnotationType.POLYGON:return new $(q);case p.AnnotationType.HIGHLIGHT:return new B(q);case p.AnnotationType.UNDERLINE:return new at(q);case p.AnnotationType.SQUIGGLY:return new W(q);case p.AnnotationType.STRIKEOUT:return new wt(q);case p.AnnotationType.STAMP:return new Pt(q);case p.AnnotationType.FILEATTACHMENT:return new D(q);default:return new c(q)}}}const a=class a{constructor(q,{isRenderable:r=!1,ignoreBorder:O=!1,createQuadrilaterals:z=!1}={}){R(this,d,!1);this.isRenderable=r,this.data=q.data,this.layer=q.layer,this.linkService=q.linkService,this.downloadManager=q.downloadManager,this.imageResourcesPath=q.imageResourcesPath,this.renderForms=q.renderForms,this.svgFactory=q.svgFactory,this.annotationStorage=q.annotationStorage,this.enableScripting=q.enableScripting,this.hasJSActions=q.hasJSActions,this._fieldObjects=q.fieldObjects,this.parent=q.parent,r&&(this.container=this._createContainer(O)),z&&this._createQuadrilaterals()}static _hasPopupData({titleObj:q,contentsObj:r,richText:O}){return!!(q!=null&&q.str||r!=null&&r.str||O!=null&&O.str)}get hasPopupData(){return a._hasPopupData(this.data)}_createContainer(q){const{data:r,parent:{page:O,viewport:z}}=this,nt=document.createElement("section");nt.setAttribute("data-annotation-id",r.id),this instanceof S||(nt.tabIndex=u),nt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&nt.setAttribute("aria-haspopup","dialog"),r.noRotate&&nt.classList.add("norotate");const{pageWidth:ut,pageHeight:vt,pageX:kt,pageY:Nt}=z.rawDims;if(!r.rect||this instanceof b){const{rotation:$t}=r;return!r.hasOwnCanvas&&$t!==0&&this.setRotation($t,nt),nt}const{width:It,height:Qt}=v(r.rect),Ht=p.Util.normalizeRect([r.rect[0],O.view[3]-r.rect[1]+O.view[1],r.rect[2],O.view[3]-r.rect[3]+O.view[1]]);if(!q&&r.borderStyle.width>0){nt.style.borderWidth=`${r.borderStyle.width}px`;const $t=r.borderStyle.horizontalCornerRadius,Yt=r.borderStyle.verticalCornerRadius;if($t>0||Yt>0){const te=`calc(${$t}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;nt.style.borderRadius=te}else if(this instanceof i){const te=`calc(${It}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;nt.style.borderRadius=te}switch(r.borderStyle.style){case p.AnnotationBorderStyleType.SOLID:nt.style.borderStyle="solid";break;case p.AnnotationBorderStyleType.DASHED:nt.style.borderStyle="dashed";break;case p.AnnotationBorderStyleType.BEVELED:(0,p.warn)("Unimplemented border style: beveled");break;case p.AnnotationBorderStyleType.INSET:(0,p.warn)("Unimplemented border style: inset");break;case p.AnnotationBorderStyleType.UNDERLINE:nt.style.borderBottomStyle="solid";break}const Zt=r.borderColor||null;Zt?(Y(this,d,!0),nt.style.borderColor=p.Util.makeHexColor(Zt[0]|0,Zt[1]|0,Zt[2]|0)):nt.style.borderWidth=0}nt.style.left=`${100*(Ht[0]-kt)/ut}%`,nt.style.top=`${100*(Ht[1]-Nt)/vt}%`;const{rotation:jt}=r;return r.hasOwnCanvas||jt===0?(nt.style.width=`${100*It/ut}%`,nt.style.height=`${100*Qt/vt}%`):this.setRotation(jt,nt),nt}setRotation(q,r=this.container){if(!this.data.rect)return;const{pageWidth:O,pageHeight:z}=this.parent.viewport.rawDims,{width:nt,height:ut}=v(this.data.rect);let vt,kt;q%180===0?(vt=100*nt/O,kt=100*ut/z):(vt=100*ut/O,kt=100*nt/z),r.style.width=`${vt}%`,r.style.height=`${kt}%`,r.setAttribute("data-main-rotation",(360-q)%360)}get _commonActions(){const q=(r,O,z)=>{const nt=z.detail[r],ut=nt[0],vt=nt.slice(1);z.target.style[O]=H.ColorConverters[`${ut}_HTML`](vt),this.annotationStorage.setValue(this.data.id,{[O]:H.ColorConverters[`${ut}_rgb`](vt)})};return(0,p.shadow)(this,"_commonActions",{display:r=>{const{display:O}=r.detail,z=O%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:O===1||O===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:O}=r.detail;this.container.style.visibility=O?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:O,noView:O})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{q("bgColor","backgroundColor",r)},fillColor:r=>{q("fillColor","backgroundColor",r)},fgColor:r=>{q("fgColor","color",r)},textColor:r=>{q("textColor","color",r)},borderColor:r=>{q("borderColor","borderColor",r)},strokeColor:r=>{q("strokeColor","borderColor",r)},rotation:r=>{const O=r.detail.rotation;this.setRotation(O),this.annotationStorage.setValue(this.data.id,{rotation:O})}})}_dispatchEventFromSandbox(q,r){const O=this._commonActions;for(const z of Object.keys(r.detail)){const nt=q[z]||O[z];nt==null||nt(r)}}_setDefaultPropertiesFromJS(q){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const O=this._commonActions;for(const[z,nt]of Object.entries(r)){const ut=O[z];if(ut){const vt={detail:{[z]:nt},target:q};ut(vt),delete r[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:q}=this.data;if(!q)return;const[r,O,z,nt]=this.data.rect;if(q.length===1){const[,{x:Yt,y:Zt},{x:te,y:ne}]=q[0];if(z===Yt&&nt===Zt&&r===te&&O===ne)return}const{style:ut}=this.container;let vt;if(t(this,d)){const{borderColor:Yt,borderWidth:Zt}=ut;ut.borderWidth=0,vt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Yt}" stroke-width="${Zt}">`],this.container.classList.add("hasBorder")}const kt=z-r,Nt=nt-O,{svgFactory:It}=this,Qt=It.createElement("svg");Qt.classList.add("quadrilateralsContainer"),Qt.setAttribute("width",0),Qt.setAttribute("height",0);const Ht=It.createElement("defs");Qt.append(Ht);const jt=It.createElement("clipPath"),$t=`clippath_${this.data.id}`;jt.setAttribute("id",$t),jt.setAttribute("clipPathUnits","objectBoundingBox"),Ht.append(jt);for(const[,{x:Yt,y:Zt},{x:te,y:ne}]of q){const ie=It.createElement("rect"),se=(te-r)/kt,le=(nt-Zt)/Nt,ce=(Yt-te)/kt,Ji=(Zt-ne)/Nt;ie.setAttribute("x",se),ie.setAttribute("y",le),ie.setAttribute("width",ce),ie.setAttribute("height",Ji),jt.append(ie),vt==null||vt.push(`<rect vector-effect="non-scaling-stroke" x="${se}" y="${le}" width="${ce}" height="${Ji}"/>`)}t(this,d)&&(vt.push("</g></svg>')"),ut.backgroundImage=vt.join("")),this.container.append(Qt),this.container.style.clipPath=`url(#${$t})`}_createPopup(){const{container:q,data:r}=this;q.setAttribute("aria-haspopup","dialog");const O=new b({data:{color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,parentRect:r.rect,borderStyle:0,id:`popup_${r.id}`,rotation:r.rotation},parent:this.parent,elements:[this]});this.parent.div.append(O.render())}render(){(0,p.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(q,r=null){const O=[];if(this._fieldObjects){const z=this._fieldObjects[q];if(z)for(const{page:nt,id:ut,exportValues:vt}of z){if(nt===-1||ut===r)continue;const kt=typeof vt=="string"?vt:null,Nt=document.querySelector(`[data-element-id="${ut}"]`);if(Nt&&!k.has(Nt)){(0,p.warn)(`_getElementsByName - element not allowed: ${ut}`);continue}O.push({id:ut,exportValue:kt,domElement:Nt})}return O}for(const z of document.getElementsByName(q)){const{exportValue:nt}=z,ut=z.getAttribute("data-element-id");ut!==r&&k.has(z)&&O.push({id:ut,exportValue:nt,domElement:z})}return O}show(){var q;this.container&&(this.container.hidden=!1),(q=this.popup)==null||q.maybeShow()}hide(){var q;this.container&&(this.container.hidden=!0),(q=this.popup)==null||q.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const q=this.getElementsToTriggerPopup();if(Array.isArray(q))for(const r of q)r.classList.add("highlightArea");else q.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:q,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{var O;(O=this.linkService.eventBus)==null||O.dispatch("switchannotationeditormode",{source:this,mode:q,editId:r})})}};d=new WeakMap;let c=a;class g extends c{constructor(r,O=null){super(r,{isRenderable:!0,ignoreBorder:!!(O!=null&&O.ignoreBorder),createQuadrilaterals:!0});R(this,A);R(this,N);this.isTooltipOnly=r.data.isTooltipOnly}render(){const{data:r,linkService:O}=this,z=document.createElement("a");z.setAttribute("data-element-id",r.id);let nt=!1;return r.url?(O.addLinkAttributes(z,r.url,r.newWindow),nt=!0):r.action?(this._bindNamedAction(z,r.action),nt=!0):r.attachment?(this._bindAttachment(z,r.attachment),nt=!0):r.setOCGState?(V(this,N,gn).call(this,z,r.setOCGState),nt=!0):r.dest?(this._bindLink(z,r.dest),nt=!0):(r.actions&&(r.actions.Action||r.actions["Mouse Up"]||r.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,r),nt=!0),r.resetForm?(this._bindResetFormAction(z,r.resetForm),nt=!0):this.isTooltipOnly&&!nt&&(this._bindLink(z,""),nt=!0)),this.container.classList.add("linkAnnotation"),nt&&this.container.append(z),this.container}_bindLink(r,O){r.href=this.linkService.getDestinationHash(O),r.onclick=()=>(O&&this.linkService.goToDestination(O),!1),(O||O==="")&&V(this,A,he).call(this)}_bindNamedAction(r,O){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeNamedAction(O),!1),V(this,A,he).call(this)}_bindAttachment(r,O){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>{var z;return(z=this.downloadManager)==null||z.openOrDownloadData(this.container,O.content,O.filename),!1},V(this,A,he).call(this)}_bindJSAction(r,O){r.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const nt of Object.keys(O.actions)){const ut=z.get(nt);ut&&(r[ut]=()=>{var vt;return(vt=this.linkService.eventBus)==null||vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:O.id,name:nt}}),!1})}r.onclick||(r.onclick=()=>!1),V(this,A,he).call(this)}_bindResetFormAction(r,O){const z=r.onclick;if(z||(r.href=this.linkService.getAnchorUrl("")),V(this,A,he).call(this),!this._fieldObjects){(0,p.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(r.onclick=()=>!1);return}r.onclick=()=>{var Qt;z==null||z();const{fields:nt,refs:ut,include:vt}=O,kt=[];if(nt.length!==0||ut.length!==0){const Ht=new Set(ut);for(const jt of nt){const $t=this._fieldObjects[jt]||[];for(const{id:Yt}of $t)Ht.add(Yt)}for(const jt of Object.values(this._fieldObjects))for(const $t of jt)Ht.has($t.id)===vt&&kt.push($t)}else for(const Ht of Object.values(this._fieldObjects))kt.push(...Ht);const Nt=this.annotationStorage,It=[];for(const Ht of kt){const{id:jt}=Ht;switch(It.push(jt),Ht.type){case"text":{const Yt=Ht.defaultValue||"";Nt.setValue(jt,{value:Yt});break}case"checkbox":case"radiobutton":{const Yt=Ht.defaultValue===Ht.exportValues;Nt.setValue(jt,{value:Yt});break}case"combobox":case"listbox":{const Yt=Ht.defaultValue||"";Nt.setValue(jt,{value:Yt});break}default:continue}const $t=document.querySelector(`[data-element-id="${jt}"]`);if($t){if(!k.has($t)){(0,p.warn)(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;$t.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:It,name:"ResetForm"}})),!1}}}A=new WeakSet,he=function(){this.container.setAttribute("data-internal-link","")},N=new WeakSet,gn=function(r,O){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeSetOCGState(O),!1),V(this,A,he).call(this)};class h extends c{constructor(q){super(q,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const q=document.createElement("img");return q.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",q.alt="[{{type}} Annotation]",q.dataset.l10nId="text_annotation_type",q.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(q),this.container}}class S extends c{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(q){var r;this.data.hasOwnCanvas&&(((r=q.previousSibling)==null?void 0:r.nodeName)==="CANVAS"&&(q.previousSibling.hidden=!0),q.hidden=!1)}_getKeyModifier(q){const{isWin:r,isMac:O}=p.FeatureTest.platform;return r&&q.ctrlKey||O&&q.metaKey}_setEventListener(q,r,O,z,nt){O.includes("mouse")?q.addEventListener(O,ut=>{var vt;(vt=this.linkService.eventBus)==null||vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:nt(ut),shift:ut.shiftKey,modifier:this._getKeyModifier(ut)}})}):q.addEventListener(O,ut=>{var vt;if(O==="blur"){if(!r.focused||!ut.relatedTarget)return;r.focused=!1}else if(O==="focus"){if(r.focused)return;r.focused=!0}nt&&((vt=this.linkService.eventBus)==null||vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:nt(ut)}}))})}_setEventListeners(q,r,O,z){var nt,ut,vt;for(const[kt,Nt]of O)(Nt==="Action"||(nt=this.data.actions)!=null&&nt[Nt])&&((Nt==="Focus"||Nt==="Blur")&&(r||(r={focused:!1})),this._setEventListener(q,r,kt,Nt,z),Nt==="Focus"&&!((ut=this.data.actions)!=null&&ut.Blur)?this._setEventListener(q,r,"blur","Blur",null):Nt==="Blur"&&!((vt=this.data.actions)!=null&&vt.Focus)&&this._setEventListener(q,r,"focus","Focus",null))}_setBackgroundColor(q){const r=this.data.backgroundColor||null;q.style.backgroundColor=r===null?"transparent":p.Util.makeHexColor(r[0],r[1],r[2])}_setTextStyle(q){const r=["left","center","right"],{fontColor:O}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||s,nt=q.style;let ut;const vt=2,kt=Nt=>Math.round(10*Nt)/10;if(this.data.multiLine){const Nt=Math.abs(this.data.rect[3]-this.data.rect[1]-vt),It=Math.round(Nt/(p.LINE_FACTOR*z))||1,Qt=Nt/It;ut=Math.min(z,kt(Qt/p.LINE_FACTOR))}else{const Nt=Math.abs(this.data.rect[3]-this.data.rect[1]-vt);ut=Math.min(z,kt(Nt/p.LINE_FACTOR))}nt.fontSize=`calc(${ut}px * var(--scale-factor))`,nt.color=p.Util.makeHexColor(O[0],O[1],O[2]),this.data.textAlignment!==null&&(nt.textAlign=r[this.data.textAlignment])}_setRequired(q,r){r?q.setAttribute("required",!0):q.removeAttribute("required"),q.setAttribute("aria-required",r)}}class C extends S{constructor(q){const r=q.renderForms||!q.data.hasAppearance&&!!q.data.fieldValue;super(q,{isRenderable:r})}setPropertyOnSiblings(q,r,O,z){const nt=this.annotationStorage;for(const ut of this._getElementsByName(q.name,q.id))ut.domElement&&(ut.domElement[r]=O),nt.setValue(ut.id,{[z]:O})}render(){var z,nt;const q=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let O=null;if(this.renderForms){const ut=q.getValue(r,{value:this.data.fieldValue});let vt=ut.value||"";const kt=q.getValue(r,{charLimit:this.data.maxLen}).charLimit;kt&&vt.length>kt&&(vt=vt.slice(0,kt));let Nt=ut.formattedValue||((z=this.data.textContent)==null?void 0:z.join(`
`))||null;Nt&&this.data.comb&&(Nt=Nt.replaceAll(/\s+/g,""));const It={userValue:vt,formattedValue:Nt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(O=document.createElement("textarea"),O.textContent=Nt??vt,this.data.doNotScroll&&(O.style.overflowY="hidden")):(O=document.createElement("input"),O.type="text",O.setAttribute("value",Nt??vt),this.data.doNotScroll&&(O.style.overflowX="hidden")),this.data.hasOwnCanvas&&(O.hidden=!0),k.add(O),O.setAttribute("data-element-id",r),O.disabled=this.data.readOnly,O.name=this.data.fieldName,O.tabIndex=u,this._setRequired(O,this.data.required),kt&&(O.maxLength=kt),O.addEventListener("input",Ht=>{q.setValue(r,{value:Ht.target.value}),this.setPropertyOnSiblings(O,"value",Ht.target.value,"value"),It.formattedValue=null}),O.addEventListener("resetform",Ht=>{const jt=this.data.defaultFieldValue??"";O.value=It.userValue=jt,It.formattedValue=null});let Qt=Ht=>{const{formattedValue:jt}=It;jt!=null&&(Ht.target.value=jt),Ht.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){O.addEventListener("focus",jt=>{if(It.focused)return;const{target:$t}=jt;It.userValue&&($t.value=It.userValue),It.lastCommittedValue=$t.value,It.commitKey=1,It.focused=!0}),O.addEventListener("updatefromsandbox",jt=>{this.showElementAndHideCanvas(jt.target);const $t={value(Yt){It.userValue=Yt.detail.value??"",q.setValue(r,{value:It.userValue.toString()}),Yt.target.value=It.userValue},formattedValue(Yt){const{formattedValue:Zt}=Yt.detail;It.formattedValue=Zt,Zt!=null&&Yt.target!==document.activeElement&&(Yt.target.value=Zt),q.setValue(r,{formattedValue:Zt})},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var ie;const{charLimit:Zt}=Yt.detail,{target:te}=Yt;if(Zt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",Zt);let ne=It.userValue;!ne||ne.length<=Zt||(ne=ne.slice(0,Zt),te.value=It.userValue=ne,q.setValue(r,{value:ne}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:ne,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox($t,jt)}),O.addEventListener("keydown",jt=>{var Zt;It.commitKey=1;let $t=-1;if(jt.key==="Escape"?$t=0:jt.key==="Enter"&&!this.data.multiLine?$t=2:jt.key==="Tab"&&(It.commitKey=3),$t===-1)return;const{value:Yt}=jt.target;It.lastCommittedValue!==Yt&&(It.lastCommittedValue=Yt,It.userValue=Yt,(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Yt,willCommit:!0,commitKey:$t,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}}))});const Ht=Qt;Qt=null,O.addEventListener("blur",jt=>{var Yt;if(!It.focused||!jt.relatedTarget)return;It.focused=!1;const{value:$t}=jt.target;It.userValue=$t,It.lastCommittedValue!==$t&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:$t,willCommit:!0,commitKey:It.commitKey,selStart:jt.target.selectionStart,selEnd:jt.target.selectionEnd}})),Ht(jt)}),(nt=this.data.actions)!=null&&nt.Keystroke&&O.addEventListener("beforeinput",jt=>{var le;It.lastCommittedValue=null;const{data:$t,target:Yt}=jt,{value:Zt,selectionStart:te,selectionEnd:ne}=Yt;let ie=te,se=ne;switch(jt.inputType){case"deleteWordBackward":{const ce=Zt.substring(0,te).match(/\w*[^\w]*$/);ce&&(ie-=ce[0].length);break}case"deleteWordForward":{const ce=Zt.substring(te).match(/^[^\w]*\w*/);ce&&(se+=ce[0].length);break}case"deleteContentBackward":te===ne&&(ie-=1);break;case"deleteContentForward":te===ne&&(se+=1);break}jt.preventDefault(),(le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Zt,change:$t||"",willCommit:!1,selStart:ie,selEnd:se}})}),this._setEventListeners(O,It,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jt=>jt.target.value)}if(Qt&&O.addEventListener("blur",Qt),this.data.comb){const jt=(this.data.rect[2]-this.data.rect[0])/kt;O.classList.add("comb"),O.style.letterSpacing=`calc(${jt}px * var(--scale-factor) - 1ch)`}}else O=document.createElement("div"),O.textContent=this.data.fieldValue,O.style.verticalAlign="middle",O.style.display="table-cell";return this._setTextStyle(O),this._setBackgroundColor(O),this._setDefaultPropertiesFromJS(O),this.container.append(O),this.container}}class _ extends S{constructor(q){super(q,{isRenderable:!!q.data.hasOwnCanvas})}}class y extends S{constructor(q){super(q,{isRenderable:q.renderForms})}render(){const q=this.annotationStorage,r=this.data,O=r.id;let z=q.getValue(O,{value:r.exportValue===r.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",q.setValue(O,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const nt=document.createElement("input");return k.add(nt),nt.setAttribute("data-element-id",O),nt.disabled=r.readOnly,this._setRequired(nt,this.data.required),nt.type="checkbox",nt.name=r.fieldName,z&&nt.setAttribute("checked",!0),nt.setAttribute("exportValue",r.exportValue),nt.tabIndex=u,nt.addEventListener("change",ut=>{const{name:vt,checked:kt}=ut.target;for(const Nt of this._getElementsByName(vt,O)){const It=kt&&Nt.exportValue===r.exportValue;Nt.domElement&&(Nt.domElement.checked=It),q.setValue(Nt.id,{value:It})}q.setValue(O,{value:kt})}),nt.addEventListener("resetform",ut=>{const vt=r.defaultFieldValue||"Off";ut.target.checked=vt===r.exportValue}),this.enableScripting&&this.hasJSActions&&(nt.addEventListener("updatefromsandbox",ut=>{const vt={value(kt){kt.target.checked=kt.detail.value!=="Off",q.setValue(O,{value:kt.target.checked})}};this._dispatchEventFromSandbox(vt,ut)}),this._setEventListeners(nt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ut=>ut.target.checked)),this._setBackgroundColor(nt),this._setDefaultPropertiesFromJS(nt),this.container.append(nt),this.container}}class i extends S{constructor(q){super(q,{isRenderable:q.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const q=this.annotationStorage,r=this.data,O=r.id;let z=q.getValue(O,{value:r.fieldValue===r.buttonValue}).value;typeof z=="string"&&(z=z!==r.buttonValue,q.setValue(O,{value:z}));const nt=document.createElement("input");if(k.add(nt),nt.setAttribute("data-element-id",O),nt.disabled=r.readOnly,this._setRequired(nt,this.data.required),nt.type="radio",nt.name=r.fieldName,z&&nt.setAttribute("checked",!0),nt.tabIndex=u,nt.addEventListener("change",ut=>{const{name:vt,checked:kt}=ut.target;for(const Nt of this._getElementsByName(vt,O))q.setValue(Nt.id,{value:!1});q.setValue(O,{value:kt})}),nt.addEventListener("resetform",ut=>{const vt=r.defaultFieldValue;ut.target.checked=vt!=null&&vt===r.buttonValue}),this.enableScripting&&this.hasJSActions){const ut=r.buttonValue;nt.addEventListener("updatefromsandbox",vt=>{const kt={value:Nt=>{const It=ut===Nt.detail.value;for(const Qt of this._getElementsByName(Nt.target.name)){const Ht=It&&Qt.id===O;Qt.domElement&&(Qt.domElement.checked=Ht),q.setValue(Qt.id,{value:Ht})}}};this._dispatchEventFromSandbox(kt,vt)}),this._setEventListeners(nt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],vt=>vt.target.checked)}return this._setBackgroundColor(nt),this._setDefaultPropertiesFromJS(nt),this.container.append(nt),this.container}}class e extends g{constructor(q){super(q,{ignoreBorder:q.data.hasAppearance})}render(){const q=super.render();q.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(q.title=this.data.alternativeText);const r=q.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",O=>{this._dispatchEventFromSandbox({},O)})),q}}class E extends S{constructor(q){super(q,{isRenderable:q.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const q=this.annotationStorage,r=this.data.id,O=q.getValue(r,{value:this.data.fieldValue}),z=document.createElement("select");k.add(z),z.setAttribute("data-element-id",r),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=u;let nt=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",It=>{const Qt=this.data.defaultFieldValue;for(const Ht of z.options)Ht.selected=Ht.value===Qt});for(const It of this.data.options){const Qt=document.createElement("option");Qt.textContent=It.displayValue,Qt.value=It.exportValue,O.value.includes(It.exportValue)&&(Qt.setAttribute("selected",!0),nt=!1),z.append(Qt)}let ut=null;if(nt){const It=document.createElement("option");It.value=" ",It.setAttribute("hidden",!0),It.setAttribute("selected",!0),z.prepend(It),ut=()=>{It.remove(),z.removeEventListener("input",ut),ut=null},z.addEventListener("input",ut)}const vt=It=>{const Qt=It?"value":"textContent",{options:Ht,multiple:jt}=z;return jt?Array.prototype.filter.call(Ht,$t=>$t.selected).map($t=>$t[Qt]):Ht.selectedIndex===-1?null:Ht[Ht.selectedIndex][Qt]};let kt=vt(!1);const Nt=It=>{const Qt=It.target.options;return Array.prototype.map.call(Qt,Ht=>({displayValue:Ht.textContent,exportValue:Ht.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",It=>{const Qt={value(Ht){ut==null||ut();const jt=Ht.detail.value,$t=new Set(Array.isArray(jt)?jt:[jt]);for(const Yt of z.options)Yt.selected=$t.has(Yt.value);q.setValue(r,{value:vt(!0)}),kt=vt(!1)},multipleSelection(Ht){z.multiple=!0},remove(Ht){const jt=z.options,$t=Ht.detail.remove;jt[$t].selected=!1,z.remove($t),jt.length>0&&Array.prototype.findIndex.call(jt,Zt=>Zt.selected)===-1&&(jt[0].selected=!0),q.setValue(r,{value:vt(!0),items:Nt(Ht)}),kt=vt(!1)},clear(Ht){for(;z.length!==0;)z.remove(0);q.setValue(r,{value:null,items:[]}),kt=vt(!1)},insert(Ht){const{index:jt,displayValue:$t,exportValue:Yt}=Ht.detail.insert,Zt=z.children[jt],te=document.createElement("option");te.textContent=$t,te.value=Yt,Zt?Zt.before(te):z.append(te),q.setValue(r,{value:vt(!0),items:Nt(Ht)}),kt=vt(!1)},items(Ht){const{items:jt}=Ht.detail;for(;z.length!==0;)z.remove(0);for(const $t of jt){const{displayValue:Yt,exportValue:Zt}=$t,te=document.createElement("option");te.textContent=Yt,te.value=Zt,z.append(te)}z.options.length>0&&(z.options[0].selected=!0),q.setValue(r,{value:vt(!0),items:Nt(Ht)}),kt=vt(!1)},indices(Ht){const jt=new Set(Ht.detail.indices);for(const $t of Ht.target.options)$t.selected=jt.has($t.index);q.setValue(r,{value:vt(!0)}),kt=vt(!1)},editable(Ht){Ht.target.disabled=!Ht.detail.editable}};this._dispatchEventFromSandbox(Qt,It)}),z.addEventListener("input",It=>{var Ht;const Qt=vt(!0);q.setValue(r,{value:Qt}),It.preventDefault(),(Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:kt,changeEx:Qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],It=>It.target.value)):z.addEventListener("input",function(It){q.setValue(r,{value:vt(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class b extends c{constructor(q){const{data:r,elements:O}=q;super(q,{isRenderable:c._hasPopupData(r)}),this.elements=O}render(){this.container.classList.add("popupAnnotation");const q=new o({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const O of this.elements)O.popup=q,r.push(O.data.id),O.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(O=>`${p.AnnotationPrefix}${O}`).join(",")),this.container}}class o{constructor({container:q,color:r,elements:O,titleObj:z,modificationDate:nt,contentsObj:ut,richText:vt,parent:kt,rect:Nt,parentRect:It,open:Qt}){R(this,Bt);R(this,Gt);R(this,Kt);R(this,Jt);R(this,tt,null);R(this,mt,V(this,Bt,mn).bind(this));R(this,ft,V(this,Jt,vi).bind(this));R(this,St,V(this,Kt,bi).bind(this));R(this,et,V(this,Gt,Oe).bind(this));R(this,bt,null);R(this,pt,null);R(this,Lt,null);R(this,Ft,null);R(this,Mt,null);R(this,ht,null);R(this,rt,!1);R(this,J,null);R(this,Q,null);R(this,gt,null);R(this,Tt,null);R(this,Rt,!1);var jt;Y(this,pt,q),Y(this,Tt,z),Y(this,Lt,ut),Y(this,gt,vt),Y(this,Mt,kt),Y(this,bt,r),Y(this,Q,Nt),Y(this,ht,It),Y(this,Ft,O);const Ht=F.PDFDateString.toDateObject(nt);Ht&&Y(this,tt,kt.l10n.get("annotation_date_string",{date:Ht.toLocaleDateString(),time:Ht.toLocaleTimeString()})),this.trigger=O.flatMap($t=>$t.getElementsToTriggerPopup());for(const $t of this.trigger)$t.addEventListener("click",t(this,et)),$t.addEventListener("mouseenter",t(this,St)),$t.addEventListener("mouseleave",t(this,ft)),$t.classList.add("popupTriggerArea");for(const $t of O)(jt=$t.container)==null||jt.addEventListener("keydown",t(this,mt));t(this,pt).hidden=!0,Qt&&V(this,Gt,Oe).call(this)}render(){if(t(this,J))return;const{page:{view:q},viewport:{rawDims:{pageWidth:r,pageHeight:O,pageX:z,pageY:nt}}}=t(this,Mt),ut=Y(this,J,document.createElement("div"));if(ut.className="popup",t(this,bt)){const ie=ut.style.outlineColor=p.Util.makeHexColor(...t(this,bt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ut.style.backgroundColor=`color-mix(in srgb, ${ie} 30%, white)`:ut.style.backgroundColor=p.Util.makeHexColor(...t(this,bt).map(le=>Math.floor(.7*(255-le)+le)))}const vt=document.createElement("span");vt.className="header";const kt=document.createElement("h1");if(vt.append(kt),{dir:kt.dir,str:kt.textContent}=t(this,Tt),ut.append(vt),t(this,tt)){const ie=document.createElement("span");ie.classList.add("popupDate"),t(this,tt).then(se=>{ie.textContent=se}),vt.append(ie)}const Nt=t(this,Lt),It=t(this,gt);if(It!=null&&It.str&&(!(Nt!=null&&Nt.str)||Nt.str===It.str))x.XfaLayer.render({xfaHtml:It.html,intent:"richText",div:ut}),ut.lastChild.classList.add("richText","popupContent");else{const ie=this._formatContents(Nt);ut.append(ie)}let Qt=!!t(this,ht),Ht=Qt?t(this,ht):t(this,Q);for(const ie of t(this,Ft))if(!Ht||p.Util.intersect(ie.data.rect,Ht)!==null){Ht=ie.data.rect,Qt=!0;break}const jt=p.Util.normalizeRect([Ht[0],q[3]-Ht[1]+q[1],Ht[2],q[3]-Ht[3]+q[1]]),Yt=Qt?Ht[2]-Ht[0]+5:0,Zt=jt[0]+Yt,te=jt[1],{style:ne}=t(this,pt);ne.left=`${100*(Zt-z)/r}%`,ne.top=`${100*(te-nt)/O}%`,t(this,pt).append(ut)}_formatContents({str:q,dir:r}){const O=document.createElement("p");O.classList.add("popupContent"),O.dir=r;const z=q.split(/(?:\r\n?|\n)/);for(let nt=0,ut=z.length;nt<ut;++nt){const vt=z[nt];O.append(document.createTextNode(vt)),nt<ut-1&&O.append(document.createElement("br"))}return O}forceHide(){Y(this,Rt,this.isVisible),t(this,Rt)&&(t(this,pt).hidden=!0)}maybeShow(){t(this,Rt)&&(Y(this,Rt,!1),t(this,pt).hidden=!1)}get isVisible(){return t(this,pt).hidden===!1}}tt=new WeakMap,mt=new WeakMap,ft=new WeakMap,St=new WeakMap,et=new WeakMap,bt=new WeakMap,pt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Mt=new WeakMap,ht=new WeakMap,rt=new WeakMap,J=new WeakMap,Q=new WeakMap,gt=new WeakMap,Tt=new WeakMap,Rt=new WeakMap,Bt=new WeakSet,mn=function(q){q.altKey||q.shiftKey||q.ctrlKey||q.metaKey||(q.key==="Enter"||q.key==="Escape"&&t(this,rt))&&V(this,Gt,Oe).call(this)},Gt=new WeakSet,Oe=function(){Y(this,rt,!t(this,rt)),t(this,rt)?(V(this,Kt,bi).call(this),t(this,pt).addEventListener("click",t(this,et)),t(this,pt).addEventListener("keydown",t(this,mt))):(V(this,Jt,vi).call(this),t(this,pt).removeEventListener("click",t(this,et)),t(this,pt).removeEventListener("keydown",t(this,mt)))},Kt=new WeakSet,bi=function(){t(this,J)||this.render(),this.isVisible?t(this,rt)&&t(this,pt).classList.add("focused"):(t(this,pt).hidden=!1,t(this,pt).style.zIndex=parseInt(t(this,pt).style.zIndex)+1e3)},Jt=new WeakSet,vi=function(){t(this,pt).classList.remove("focused"),!(t(this,rt)||!this.isVisible)&&(t(this,pt).hidden=!0,t(this,pt).style.zIndex=parseInt(t(this,pt).style.zIndex)-1e3)};class M extends c{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0}),this.textContent=q.data.textContent,this.textPosition=q.data.textPosition,this.annotationEditorType=p.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const q=document.createElement("div");q.classList.add("annotationTextContent"),q.setAttribute("role","comment");for(const r of this.textContent){const O=document.createElement("span");O.textContent=r,q.append(O)}this.container.append(q)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}l.FreeTextAnnotationElement=M;class w extends c{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});R(this,m,null)}render(){this.container.classList.add("lineAnnotation");const r=this.data,{width:O,height:z}=v(r.rect),nt=this.svgFactory.create(O,z,!0),ut=Y(this,m,this.svgFactory.createElement("svg:line"));return ut.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),ut.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),ut.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),ut.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),ut.setAttribute("stroke-width",r.borderStyle.width||1),ut.setAttribute("stroke","transparent"),ut.setAttribute("fill","transparent"),nt.append(ut),this.container.append(nt),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,m)}addHighlightArea(){this.container.classList.add("highlightArea")}}m=new WeakMap;class j extends c{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});R(this,L,null)}render(){this.container.classList.add("squareAnnotation");const r=this.data,{width:O,height:z}=v(r.rect),nt=this.svgFactory.create(O,z,!0),ut=r.borderStyle.width,vt=Y(this,L,this.svgFactory.createElement("svg:rect"));return vt.setAttribute("x",ut/2),vt.setAttribute("y",ut/2),vt.setAttribute("width",O-ut),vt.setAttribute("height",z-ut),vt.setAttribute("stroke-width",ut||1),vt.setAttribute("stroke","transparent"),vt.setAttribute("fill","transparent"),nt.append(vt),this.container.append(nt),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,L)}addHighlightArea(){this.container.classList.add("highlightArea")}}L=new WeakMap;class Z extends c{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});R(this,ct,null)}render(){this.container.classList.add("circleAnnotation");const r=this.data,{width:O,height:z}=v(r.rect),nt=this.svgFactory.create(O,z,!0),ut=r.borderStyle.width,vt=Y(this,ct,this.svgFactory.createElement("svg:ellipse"));return vt.setAttribute("cx",O/2),vt.setAttribute("cy",z/2),vt.setAttribute("rx",O/2-ut/2),vt.setAttribute("ry",z/2-ut/2),vt.setAttribute("stroke-width",ut||1),vt.setAttribute("stroke","transparent"),vt.setAttribute("fill","transparent"),nt.append(vt),this.container.append(nt),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}ct=new WeakMap;class P extends c{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});R(this,st,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:O,height:z}=v(r.rect),nt=this.svgFactory.create(O,z,!0);let ut=[];for(const kt of r.vertices){const Nt=kt.x-r.rect[0],It=r.rect[3]-kt.y;ut.push(Nt+","+It)}ut=ut.join(" ");const vt=Y(this,st,this.svgFactory.createElement(this.svgElementName));return vt.setAttribute("points",ut),vt.setAttribute("stroke-width",r.borderStyle.width||1),vt.setAttribute("stroke","transparent"),vt.setAttribute("fill","transparent"),nt.append(vt),this.container.append(nt),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,st)}addHighlightArea(){this.container.classList.add("highlightArea")}}st=new WeakMap;class $ extends P{constructor(q){super(q),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class K extends c{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class G extends c{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});R(this,dt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=p.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:O,height:z}=v(r.rect),nt=this.svgFactory.create(O,z,!0);for(const ut of r.inkLists){let vt=[];for(const Nt of ut){const It=Nt.x-r.rect[0],Qt=r.rect[3]-Nt.y;vt.push(`${It},${Qt}`)}vt=vt.join(" ");const kt=this.svgFactory.createElement(this.svgElementName);t(this,dt).push(kt),kt.setAttribute("points",vt),kt.setAttribute("stroke-width",r.borderStyle.width||1),kt.setAttribute("stroke","transparent"),kt.setAttribute("fill","transparent"),!r.popupRef&&this.hasPopupData&&this._createPopup(),nt.append(kt)}return this.container.append(nt),this.container}getElementsToTriggerPopup(){return t(this,dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}dt=new WeakMap,l.InkAnnotationElement=G;class B extends c{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class at extends c{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class W extends c{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class wt extends c{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Pt extends c{constructor(q){super(q,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}l.StampAnnotationElement=Pt;class D extends c{constructor(r){var nt;super(r,{isRenderable:!0});R(this,U);R(this,_t,null);const{filename:O,content:z}=this.data.file;this.filename=(0,F.getFilenameFromUrl)(O,!0),this.content=z,(nt=this.linkService.eventBus)==null||nt.dispatch("fileattachmentannotation",{source:this,filename:O,content:z})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:r,data:O}=this;let z;O.hasAppearance||O.fillAlpha===0?z=document.createElement("div"):(z=document.createElement("img"),z.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(O.name)?"paperclip":"pushpin"}.svg`,O.fillAlpha&&O.fillAlpha<1&&(z.style=`filter: opacity(${Math.round(O.fillAlpha*100)}%);`)),z.addEventListener("dblclick",V(this,U,yi).bind(this)),Y(this,_t,z);const{isMac:nt}=p.FeatureTest.platform;return r.addEventListener("keydown",ut=>{ut.key==="Enter"&&(nt?ut.metaKey:ut.ctrlKey)&&V(this,U,yi).call(this)}),!O.popupRef&&this.hasPopupData?this._createPopup():z.classList.add("popupTriggerArea"),r.append(z),r}getElementsToTriggerPopup(){return t(this,_t)}addHighlightArea(){this.container.classList.add("highlightArea")}}_t=new WeakMap,U=new WeakSet,yi=function(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.container,this.content,this.filename)};class n{constructor({div:q,accessibilityManager:r,annotationCanvasMap:O,l10n:z,page:nt,viewport:ut}){R(this,Ot);R(this,Ct);R(this,xt,null);R(this,Et,null);R(this,Dt,new Map);this.div=q,Y(this,xt,r),Y(this,Et,O),this.l10n=z,this.page=nt,this.viewport=ut,this.zIndex=0,this.l10n||(this.l10n=I.NullL10n)}async render(q){const{annotations:r}=q,O=this.div;(0,F.setLayerDimensions)(O,this.viewport);const z=new Map,nt={data:null,layer:O,linkService:q.linkService,downloadManager:q.downloadManager,imageResourcesPath:q.imageResourcesPath||"",renderForms:q.renderForms!==!1,svgFactory:new F.DOMSVGFactory,annotationStorage:q.annotationStorage||new lt.AnnotationStorage,enableScripting:q.enableScripting===!0,hasJSActions:q.hasJSActions,fieldObjects:q.fieldObjects,parent:this,elements:null};for(const ut of r){if(ut.noHTML)continue;const vt=ut.annotationType===p.AnnotationType.POPUP;if(vt){const It=z.get(ut.id);if(!It)continue;nt.elements=It}else{const{width:It,height:Qt}=v(ut.rect);if(It<=0||Qt<=0)continue}nt.data=ut;const kt=f.create(nt);if(!kt.isRenderable)continue;if(!vt&&ut.popupRef){const It=z.get(ut.popupRef);It?It.push(kt):z.set(ut.popupRef,[kt])}kt.annotationEditorType>0&&t(this,Dt).set(kt.data.id,kt);const Nt=kt.render();ut.hidden&&(Nt.style.visibility="hidden"),V(this,Ot,_n).call(this,Nt,ut.id)}V(this,Ct,Ai).call(this),await this.l10n.translate(O)}update({viewport:q}){const r=this.div;this.viewport=q,(0,F.setLayerDimensions)(r,{rotation:q.rotation}),V(this,Ct,Ai).call(this),r.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Dt).values())}getEditableAnnotation(q){return t(this,Dt).get(q)}}xt=new WeakMap,Et=new WeakMap,Dt=new WeakMap,Ot=new WeakSet,_n=function(q,r){var z;const O=q.firstChild||q;O.id=`${p.AnnotationPrefix}${r}`,this.div.append(q),(z=t(this,xt))==null||z.moveElementInDOM(this.div,q,O,!1)},Ct=new WeakSet,Ai=function(){if(!t(this,Et))return;const q=this.div;for(const[r,O]of t(this,Et)){const z=q.querySelector(`[data-annotation-id="${r}"]`);if(!z)continue;const{firstChild:nt}=z;nt?nt.nodeName==="CANVAS"?nt.replaceWith(O):nt.before(O):z.append(O)}t(this,Et).clear()},l.AnnotationLayer=n},(yt,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorConverters=void 0;function it(lt){return Math.floor(Math.max(0,Math.min(1,lt))*255).toString(16).padStart(2,"0")}function p(lt){return Math.max(0,Math.min(255,255*lt))}class F{static CMYK_G([H,I,x,u]){return["G",1-Math.min(1,.3*H+.59*x+.11*I+u)]}static G_CMYK([H]){return["CMYK",0,0,0,1-H]}static G_RGB([H]){return["RGB",H,H,H]}static G_rgb([H]){return H=p(H),[H,H,H]}static G_HTML([H]){const I=it(H);return`#${I}${I}${I}`}static RGB_G([H,I,x]){return["G",.3*H+.59*I+.11*x]}static RGB_rgb(H){return H.map(p)}static RGB_HTML(H){return`#${H.map(it).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([H,I,x,u]){return["RGB",1-Math.min(1,H+u),1-Math.min(1,x+u),1-Math.min(1,I+u)]}static CMYK_rgb([H,I,x,u]){return[p(1-Math.min(1,H+u)),p(1-Math.min(1,x+u)),p(1-Math.min(1,I+u))]}static CMYK_HTML(H){const I=this.CMYK_RGB(H).slice(1);return this.RGB_HTML(I)}static RGB_CMYK([H,I,x]){const u=1-H,s=1-I,k=1-x,v=Math.min(u,s,k);return["CMYK",u,s,k,v]}}l.ColorConverters=F},(yt,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NullL10n=void 0,l.getL10nFallback=p;const it={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};it.print_progress_percent="{{progress}}%";function p(H,I){switch(H){case"find_match_count":H=`find_match_count[${I.total===1?"one":"other"}]`;break;case"find_match_count_limit":H=`find_match_count_limit[${I.limit===1?"one":"other"}]`;break}return it[H]||""}function F(H,I){return I?H.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(x,u)=>u in I?I[u]:"{{"+u+"}}"):H}const lt={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(H,I=null,x=p(H,I)){return F(x,I)},async translate(H){}};l.NullL10n=lt},(yt,l,it)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaLayer=void 0;var p=it(25);class F{static setupStorage(H,I,x,u,s){const k=u.getValue(I,{value:null});switch(x.name){case"textarea":if(k.value!==null&&(H.textContent=k.value),s==="print")break;H.addEventListener("input",v=>{u.setValue(I,{value:v.target.value})});break;case"input":if(x.attributes.type==="radio"||x.attributes.type==="checkbox"){if(k.value===x.attributes.xfaOn?H.setAttribute("checked",!0):k.value===x.attributes.xfaOff&&H.removeAttribute("checked"),s==="print")break;H.addEventListener("change",v=>{u.setValue(I,{value:v.target.checked?v.target.getAttribute("xfaOn"):v.target.getAttribute("xfaOff")})})}else{if(k.value!==null&&H.setAttribute("value",k.value),s==="print")break;H.addEventListener("input",v=>{u.setValue(I,{value:v.target.value})})}break;case"select":if(k.value!==null){H.setAttribute("value",k.value);for(const v of x.children)v.attributes.value===k.value?v.attributes.selected=!0:v.attributes.hasOwnProperty("selected")&&delete v.attributes.selected}H.addEventListener("input",v=>{const f=v.target.options,c=f.selectedIndex===-1?"":f[f.selectedIndex].value;u.setValue(I,{value:c})});break}}static setAttributes({html:H,element:I,storage:x=null,intent:u,linkService:s}){const{attributes:k}=I,v=H instanceof HTMLAnchorElement;k.type==="radio"&&(k.name=`${k.name}-${u}`);for(const[f,c]of Object.entries(k))if(c!=null)switch(f){case"class":c.length&&H.setAttribute(f,c.join(" "));break;case"dataId":break;case"id":H.setAttribute("data-element-id",c);break;case"style":Object.assign(H.style,c);break;case"textContent":H.textContent=c;break;default:(!v||f!=="href"&&f!=="newWindow")&&H.setAttribute(f,c)}v&&s.addLinkAttributes(H,k.href,k.newWindow),x&&k.dataId&&this.setupStorage(H,k.dataId,I,x)}static render(H){var g;const I=H.annotationStorage,x=H.linkService,u=H.xfaHtml,s=H.intent||"display",k=document.createElement(u.name);u.attributes&&this.setAttributes({html:k,element:u,intent:s,linkService:x});const v=[[u,-1,k]],f=H.div;if(f.append(k),H.viewport){const h=`matrix(${H.viewport.transform.join(",")})`;f.style.transform=h}s!=="richText"&&f.setAttribute("class","xfaLayer xfaFont");const c=[];for(;v.length>0;){const[h,S,C]=v.at(-1);if(S+1===h.children.length){v.pop();continue}const _=h.children[++v.at(-1)[1]];if(_===null)continue;const{name:y}=_;if(y==="#text"){const e=document.createTextNode(_.value);c.push(e),C.append(e);continue}const i=(g=_==null?void 0:_.attributes)!=null&&g.xmlns?document.createElementNS(_.attributes.xmlns,y):document.createElement(y);if(C.append(i),_.attributes&&this.setAttributes({html:i,element:_,storage:I,intent:s,linkService:x}),_.children&&_.children.length>0)v.push([_,-1,i]);else if(_.value){const e=document.createTextNode(_.value);p.XfaText.shouldBuildText(y)&&c.push(e),i.append(e)}}for(const h of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(H){const I=`matrix(${H.viewport.transform.join(",")})`;H.div.style.transform=I,H.div.hidden=!1}}l.XfaLayer=F},(yt,l,it)=>{var u,s,k,v,f,c,g,h,S,C,_,y,i,e,E,bn,o,vn,w,yn,Z,An,$,Si,G,Sn,at,Ei,wt,En,D,wn,d,Pn,A,Cn,N,Tn,tt,ae,ft,wi,et,Ne,pt,Be,Ft,ge,ht,Pi,J,Ue,gt,xn,Rt,Ci,Vt,Mn,zt,Ln,Xt,Ti,At,Ve,L,me;Object.defineProperty(l,"__esModule",{value:!0}),l.InkEditor=void 0;var p=it(1),F=it(4),lt=it(29),H=it(6),I=it(5);const st=class st extends F.AnnotationEditor{constructor(U){super({...U,name:"inkEditor"});R(this,E);R(this,o);R(this,w);R(this,Z);R(this,$);R(this,G);R(this,at);R(this,wt);R(this,D);R(this,d);R(this,A);R(this,N);R(this,tt);R(this,ft);R(this,et);R(this,pt);R(this,Ft);R(this,ht);R(this,J);R(this,zt);R(this,Xt);R(this,At);R(this,L);R(this,u,0);R(this,s,0);R(this,k,this.canvasPointermove.bind(this));R(this,v,this.canvasPointerleave.bind(this));R(this,f,this.canvasPointerup.bind(this));R(this,c,this.canvasPointerdown.bind(this));R(this,g,new Path2D);R(this,h,!1);R(this,S,!1);R(this,C,!1);R(this,_,null);R(this,y,0);R(this,i,0);R(this,e,null);this.color=U.color||null,this.thickness=U.thickness||null,this.opacity=U.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(U){F.AnnotationEditor.initialize(U,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(U,ot){switch(U){case p.AnnotationEditorParamsType.INK_THICKNESS:st._defaultThickness=ot;break;case p.AnnotationEditorParamsType.INK_COLOR:st._defaultColor=ot;break;case p.AnnotationEditorParamsType.INK_OPACITY:st._defaultOpacity=ot/100;break}}updateParams(U,ot){switch(U){case p.AnnotationEditorParamsType.INK_THICKNESS:V(this,E,bn).call(this,ot);break;case p.AnnotationEditorParamsType.INK_COLOR:V(this,o,vn).call(this,ot);break;case p.AnnotationEditorParamsType.INK_OPACITY:V(this,w,yn).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,st._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,st._defaultColor||F.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(st._defaultOpacity*100)]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||st._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,this.color||st._defaultColor||F.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??st._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(V(this,et,Ne).call(this),V(this,pt,Be).call(this)),this.isAttachedToDOM||(this.parent.add(this),V(this,Ft,ge).call(this)),V(this,L,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,_).disconnect(),Y(this,_,null),super.remove())}setParent(U){!this.parent&&U?this._uiManager.removeShouldRescale(this):this.parent&&U===null&&this._uiManager.addShouldRescale(this),super.setParent(U)}onScaleChanging(){const[U,ot]=this.parentDimensions,xt=this.width*U,Et=this.height*ot;this.setDimensions(xt,Et)}enableEditMode(){t(this,h)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,c)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,c)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,h)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Y(this,h,!0),this.div.classList.add("disabled"),V(this,L,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(U){this._focusEventsAllowed&&(super.focusin(U),this.enableEditMode())}canvasPointerdown(U){U.button!==0||!this.isInEditMode()||t(this,h)||(this.setInForeground(),U.preventDefault(),U.type!=="mouse"&&this.div.focus(),V(this,G,Sn).call(this,U.offsetX,U.offsetY))}canvasPointermove(U){U.preventDefault(),V(this,at,Ei).call(this,U.offsetX,U.offsetY)}canvasPointerup(U){U.preventDefault(),V(this,ft,wi).call(this,U)}canvasPointerleave(U){V(this,ft,wi).call(this,U)}get isResizable(){return!this.isEmpty()&&t(this,h)}render(){if(this.div)return this.div;let U,ot;this.width&&(U=this.x,ot=this.y),super.render(),F.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Wt=>{var Ct;return(Ct=this.div)==null?void 0:Ct.setAttribute("aria-label",Wt)});const[xt,Et,Dt,Ot]=V(this,Z,An).call(this);if(this.setAt(xt,Et,0,0),this.setDims(Dt,Ot),V(this,et,Ne).call(this),this.width){const[Wt,Ct]=this.parentDimensions;this.setAspectRatio(this.width*Wt,this.height*Ct),this.setAt(U*Wt,ot*Ct,this.width*Wt,this.height*Ct),Y(this,C,!0),V(this,Ft,ge).call(this),this.setDims(this.width*Wt,this.height*Ct),V(this,tt,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return V(this,pt,Be).call(this),this.div}setDimensions(U,ot){const xt=Math.round(U),Et=Math.round(ot);if(t(this,y)===xt&&t(this,i)===Et)return;Y(this,y,xt),Y(this,i,Et),this.canvas.style.visibility="hidden";const[Dt,Ot]=this.parentDimensions;this.width=U/Dt,this.height=ot/Ot,this.fixAndSetPosition(),t(this,h)&&V(this,ht,Pi).call(this,U,ot),V(this,Ft,ge).call(this),V(this,tt,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(U,ot,xt){var nt,ut,vt;if(U instanceof lt.InkAnnotationElement)return null;const Et=super.deserialize(U,ot,xt);Et.thickness=U.thickness,Et.color=p.Util.makeHexColor(...U.color),Et.opacity=U.opacity;const[Dt,Ot]=Et.pageDimensions,Wt=Et.width*Dt,Ct=Et.height*Ot,qt=Et.parentScale,Ut=U.thickness/2;Y(Et,h,!0),Y(Et,y,Math.round(Wt)),Y(Et,i,Math.round(Ct));const{paths:q,rect:r,rotation:O}=U;for(let{bezier:kt}of q){kt=V(nt=st,Vt,Mn).call(nt,kt,r,O);const Nt=[];Et.paths.push(Nt);let It=qt*(kt[0]-Ut),Qt=qt*(kt[1]-Ut);for(let jt=2,$t=kt.length;jt<$t;jt+=6){const Yt=qt*(kt[jt]-Ut),Zt=qt*(kt[jt+1]-Ut),te=qt*(kt[jt+2]-Ut),ne=qt*(kt[jt+3]-Ut),ie=qt*(kt[jt+4]-Ut),se=qt*(kt[jt+5]-Ut);Nt.push([[It,Qt],[Yt,Zt],[te,ne],[ie,se]]),It=ie,Qt=se}const Ht=V(this,gt,xn).call(this,Nt);Et.bezierPath2D.push(Ht)}const z=V(ut=Et,Xt,Ti).call(ut);return Y(Et,s,Math.max(F.AnnotationEditor.MIN_SIZE,z[2]-z[0])),Y(Et,u,Math.max(F.AnnotationEditor.MIN_SIZE,z[3]-z[1])),V(vt=Et,ht,Pi).call(vt,Wt,Ct),Et}serialize(){if(this.isEmpty())return null;const U=this.getRect(0,0),ot=F.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:p.AnnotationEditorType.INK,color:ot,thickness:this.thickness,opacity:this.opacity,paths:V(this,zt,Ln).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,U),pageIndex:this.pageIndex,rect:U,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};u=new WeakMap,s=new WeakMap,k=new WeakMap,v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakMap,S=new WeakMap,C=new WeakMap,_=new WeakMap,y=new WeakMap,i=new WeakMap,e=new WeakMap,E=new WeakSet,bn=function(U){const ot=this.thickness;this.addCommands({cmd:()=>{this.thickness=U,V(this,L,me).call(this)},undo:()=>{this.thickness=ot,V(this,L,me).call(this)},mustExec:!0,type:p.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,vn=function(U){const ot=this.color;this.addCommands({cmd:()=>{this.color=U,V(this,tt,ae).call(this)},undo:()=>{this.color=ot,V(this,tt,ae).call(this)},mustExec:!0,type:p.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,yn=function(U){U/=100;const ot=this.opacity;this.addCommands({cmd:()=>{this.opacity=U,V(this,tt,ae).call(this)},undo:()=>{this.opacity=ot,V(this,tt,ae).call(this)},mustExec:!0,type:p.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Z=new WeakSet,An=function(){const{parentRotation:U,parentDimensions:[ot,xt]}=this;switch(U){case 90:return[0,xt,xt,ot];case 180:return[ot,xt,ot,xt];case 270:return[ot,0,xt,ot];default:return[0,0,ot,xt]}},$=new WeakSet,Si=function(){const{ctx:U,color:ot,opacity:xt,thickness:Et,parentScale:Dt,scaleFactor:Ot}=this;U.lineWidth=Et*Dt/Ot,U.lineCap="round",U.lineJoin="round",U.miterLimit=10,U.strokeStyle=`${ot}${(0,I.opacityToHex)(xt)}`},G=new WeakSet,Sn=function(U,ot){this.canvas.addEventListener("contextmenu",H.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,v)),this.canvas.addEventListener("pointermove",t(this,k)),this.canvas.addEventListener("pointerup",t(this,f)),this.canvas.removeEventListener("pointerdown",t(this,c)),this.isEditing=!0,t(this,C)||(Y(this,C,!0),V(this,Ft,ge).call(this),this.thickness||(this.thickness=st._defaultThickness),this.color||(this.color=st._defaultColor||F.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=st._defaultOpacity)),this.currentPath.push([U,ot]),Y(this,S,!1),V(this,$,Si).call(this),Y(this,e,()=>{V(this,d,Pn).call(this),t(this,e)&&window.requestAnimationFrame(t(this,e))}),window.requestAnimationFrame(t(this,e))},at=new WeakSet,Ei=function(U,ot){const[xt,Et]=this.currentPath.at(-1);if(this.currentPath.length>1&&U===xt&&ot===Et)return;const Dt=this.currentPath;let Ot=t(this,g);if(Dt.push([U,ot]),Y(this,S,!0),Dt.length<=2){Ot.moveTo(...Dt[0]),Ot.lineTo(U,ot);return}Dt.length===3&&(Y(this,g,Ot=new Path2D),Ot.moveTo(...Dt[0])),V(this,A,Cn).call(this,Ot,...Dt.at(-3),...Dt.at(-2),U,ot)},wt=new WeakSet,En=function(){if(this.currentPath.length===0)return;const U=this.currentPath.at(-1);t(this,g).lineTo(...U)},D=new WeakSet,wn=function(U,ot){Y(this,e,null),U=Math.min(Math.max(U,0),this.canvas.width),ot=Math.min(Math.max(ot,0),this.canvas.height),V(this,at,Ei).call(this,U,ot),V(this,wt,En).call(this);let xt;if(this.currentPath.length!==1)xt=V(this,N,Tn).call(this);else{const Ct=[U,ot];xt=[[Ct,Ct.slice(),Ct.slice(),Ct]]}const Et=t(this,g),Dt=this.currentPath;this.currentPath=[],Y(this,g,new Path2D);const Ot=()=>{this.allRawPaths.push(Dt),this.paths.push(xt),this.bezierPath2D.push(Et),this.rebuild()},Wt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(V(this,et,Ne).call(this),V(this,pt,Be).call(this)),V(this,L,me).call(this))};this.addCommands({cmd:Ot,undo:Wt,mustExec:!0})},d=new WeakSet,Pn=function(){if(!t(this,S))return;Y(this,S,!1);const U=Math.ceil(this.thickness*this.parentScale),ot=this.currentPath.slice(-3),xt=ot.map(Ot=>Ot[0]),Et=ot.map(Ot=>Ot[1]);Math.min(...xt)-U,Math.max(...xt)+U,Math.min(...Et)-U,Math.max(...Et)+U;const{ctx:Dt}=this;Dt.save(),Dt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ot of this.bezierPath2D)Dt.stroke(Ot);Dt.stroke(t(this,g)),Dt.restore()},A=new WeakSet,Cn=function(U,ot,xt,Et,Dt,Ot,Wt){const Ct=(ot+Et)/2,qt=(xt+Dt)/2,Ut=(Et+Ot)/2,q=(Dt+Wt)/2;U.bezierCurveTo(Ct+2*(Et-Ct)/3,qt+2*(Dt-qt)/3,Ut+2*(Et-Ut)/3,q+2*(Dt-q)/3,Ut,q)},N=new WeakSet,Tn=function(){const U=this.currentPath;if(U.length<=2)return[[U[0],U[0],U.at(-1),U.at(-1)]];const ot=[];let xt,[Et,Dt]=U[0];for(xt=1;xt<U.length-2;xt++){const[r,O]=U[xt],[z,nt]=U[xt+1],ut=(r+z)/2,vt=(O+nt)/2,kt=[Et+2*(r-Et)/3,Dt+2*(O-Dt)/3],Nt=[ut+2*(r-ut)/3,vt+2*(O-vt)/3];ot.push([[Et,Dt],kt,Nt,[ut,vt]]),[Et,Dt]=[ut,vt]}const[Ot,Wt]=U[xt],[Ct,qt]=U[xt+1],Ut=[Et+2*(Ot-Et)/3,Dt+2*(Wt-Dt)/3],q=[Ct+2*(Ot-Ct)/3,qt+2*(Wt-qt)/3];return ot.push([[Et,Dt],Ut,q,[Ct,qt]]),ot},tt=new WeakSet,ae=function(){if(this.isEmpty()){V(this,J,Ue).call(this);return}V(this,$,Si).call(this);const{canvas:U,ctx:ot}=this;ot.setTransform(1,0,0,1,0,0),ot.clearRect(0,0,U.width,U.height),V(this,J,Ue).call(this);for(const xt of this.bezierPath2D)ot.stroke(xt)},ft=new WeakSet,wi=function(U){this.canvas.removeEventListener("pointerleave",t(this,v)),this.canvas.removeEventListener("pointermove",t(this,k)),this.canvas.removeEventListener("pointerup",t(this,f)),this.canvas.addEventListener("pointerdown",t(this,c)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",H.noContextMenu)},10),V(this,D,wn).call(this,U.offsetX,U.offsetY),this.addToAnnotationStorage(),this.setInBackground()},et=new WeakSet,Ne=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",F.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(U=>{var ot;return(ot=this.canvas)==null?void 0:ot.setAttribute("aria-label",U)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},pt=new WeakSet,Be=function(){Y(this,_,new ResizeObserver(U=>{const ot=U[0].contentRect;ot.width&&ot.height&&this.setDimensions(ot.width,ot.height)})),t(this,_).observe(this.div)},Ft=new WeakSet,ge=function(){if(!t(this,C))return;const[U,ot]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*U),this.canvas.height=Math.ceil(this.height*ot),V(this,J,Ue).call(this)},ht=new WeakSet,Pi=function(U,ot){const xt=V(this,At,Ve).call(this),Et=(U-xt)/t(this,s),Dt=(ot-xt)/t(this,u);this.scaleFactor=Math.min(Et,Dt)},J=new WeakSet,Ue=function(){const U=V(this,At,Ve).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+U,this.translationY*this.scaleFactor+U)},gt=new WeakSet,xn=function(U){const ot=new Path2D;for(let xt=0,Et=U.length;xt<Et;xt++){const[Dt,Ot,Wt,Ct]=U[xt];xt===0&&ot.moveTo(...Dt),ot.bezierCurveTo(Ot[0],Ot[1],Wt[0],Wt[1],Ct[0],Ct[1])}return ot},Rt=new WeakSet,Ci=function(U,ot,xt){const[Et,Dt,Ot,Wt]=ot;switch(xt){case 0:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2)U[Ct]+=Et,U[Ct+1]=Wt-U[Ct+1];break;case 90:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2){const Ut=U[Ct];U[Ct]=U[Ct+1]+Et,U[Ct+1]=Ut+Dt}break;case 180:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2)U[Ct]=Ot-U[Ct],U[Ct+1]+=Dt;break;case 270:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2){const Ut=U[Ct];U[Ct]=Ot-U[Ct+1],U[Ct+1]=Wt-Ut}break;default:throw new Error("Invalid rotation")}return U},Vt=new WeakSet,Mn=function(U,ot,xt){const[Et,Dt,Ot,Wt]=ot;switch(xt){case 0:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2)U[Ct]-=Et,U[Ct+1]=Wt-U[Ct+1];break;case 90:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2){const Ut=U[Ct];U[Ct]=U[Ct+1]-Dt,U[Ct+1]=Ut-Et}break;case 180:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2)U[Ct]=Ot-U[Ct],U[Ct+1]-=Dt;break;case 270:for(let Ct=0,qt=U.length;Ct<qt;Ct+=2){const Ut=U[Ct];U[Ct]=Wt-U[Ct+1],U[Ct+1]=Ot-Ut}break;default:throw new Error("Invalid rotation")}return U},zt=new WeakSet,Ln=function(U,ot,xt,Et){var qt,Ut;const Dt=[],Ot=this.thickness/2,Wt=U*ot+Ot,Ct=U*xt+Ot;for(const q of this.paths){const r=[],O=[];for(let z=0,nt=q.length;z<nt;z++){const[ut,vt,kt,Nt]=q[z],It=U*ut[0]+Wt,Qt=U*ut[1]+Ct,Ht=U*vt[0]+Wt,jt=U*vt[1]+Ct,$t=U*kt[0]+Wt,Yt=U*kt[1]+Ct,Zt=U*Nt[0]+Wt,te=U*Nt[1]+Ct;z===0&&(r.push(It,Qt),O.push(It,Qt)),r.push(Ht,jt,$t,Yt,Zt,te),O.push(Ht,jt),z===nt-1&&O.push(Zt,te)}Dt.push({bezier:V(qt=st,Rt,Ci).call(qt,r,Et,this.rotation),points:V(Ut=st,Rt,Ci).call(Ut,O,Et,this.rotation)})}return Dt},Xt=new WeakSet,Ti=function(){let U=1/0,ot=-1/0,xt=1/0,Et=-1/0;for(const Dt of this.paths)for(const[Ot,Wt,Ct,qt]of Dt){const Ut=p.Util.bezierBoundingBox(...Ot,...Wt,...Ct,...qt);U=Math.min(U,Ut[0]),xt=Math.min(xt,Ut[1]),ot=Math.max(ot,Ut[2]),Et=Math.max(Et,Ut[3])}return[U,xt,ot,Et]},At=new WeakSet,Ve=function(){return t(this,h)?Math.ceil(this.thickness*this.parentScale):0},L=new WeakSet,me=function(U=!1){if(this.isEmpty())return;if(!t(this,h)){V(this,tt,ae).call(this);return}const ot=V(this,Xt,Ti).call(this),xt=V(this,At,Ve).call(this);Y(this,s,Math.max(F.AnnotationEditor.MIN_SIZE,ot[2]-ot[0])),Y(this,u,Math.max(F.AnnotationEditor.MIN_SIZE,ot[3]-ot[1]));const Et=Math.ceil(xt+t(this,s)*this.scaleFactor),Dt=Math.ceil(xt+t(this,u)*this.scaleFactor),[Ot,Wt]=this.parentDimensions;this.width=Et/Ot,this.height=Dt/Wt,this.setAspectRatio(Et,Dt);const Ct=this.translationX,qt=this.translationY;this.translationX=-ot[0],this.translationY=-ot[1],V(this,Ft,ge).call(this),V(this,tt,ae).call(this),Y(this,y,Et),Y(this,i,Dt),this.setDims(Et,Dt);const Ut=U?xt/this.scaleFactor/2:0;this.translate(Ct-this.translationX-Ut,qt-this.translationY-Ut)},R(st,gt),R(st,Rt),R(st,Vt),ee(st,"_defaultColor",null),ee(st,"_defaultOpacity",1),ee(st,"_defaultThickness",1),ee(st,"_type","ink");let x=st;l.InkEditor=x},(yt,l,it)=>{var x,u,s,k,v,f,c,g,h,S,C,Ee,y,we,e,He,b,xi,M,Rn,j,kn,P,Mi,K,je,B,Fn;Object.defineProperty(l,"__esModule",{value:!0}),l.StampEditor=void 0;var p=it(1),F=it(4),lt=it(6),H=it(29);const W=class W extends F.AnnotationEditor{constructor(D){super({...D,name:"stampEditor"});R(this,C);R(this,y);R(this,e);R(this,b);R(this,M);R(this,j);R(this,P);R(this,K);R(this,B);R(this,x,null);R(this,u,null);R(this,s,null);R(this,k,null);R(this,v,null);R(this,f,null);R(this,c,null);R(this,g,null);R(this,h,!1);R(this,S,!1);Y(this,k,D.bitmapUrl),Y(this,v,D.bitmapFile)}static initialize(D){F.AnnotationEditor.initialize(D)}static get supportedTypes(){const D=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,p.shadow)(this,"supportedTypes",D.map(n=>`image/${n}`))}static get supportedTypesStr(){return(0,p.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(D){return this.supportedTypes.includes(D)}static paste(D,n){n.pasteEditor(p.AnnotationEditorType.STAMP,{bitmapFile:D.getAsFile()})}remove(){var D,n;t(this,u)&&(Y(this,x,null),this._uiManager.imageManager.deleteId(t(this,u)),(D=t(this,f))==null||D.remove(),Y(this,f,null),(n=t(this,c))==null||n.disconnect(),Y(this,c,null)),super.remove()}rebuild(){if(!this.parent){t(this,u)&&V(this,e,He).call(this);return}super.rebuild(),this.div!==null&&(t(this,u)&&V(this,e,He).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,s)||t(this,x)||t(this,k)||t(this,v))}get isResizable(){return!0}render(){if(this.div)return this.div;let D,n;if(this.width&&(D=this.x,n=this.y),super.render(),this.div.hidden=!0,t(this,x)?V(this,b,xi).call(this):V(this,e,He).call(this),this.width){const[d,a]=this.parentDimensions;this.setAt(D*d,n*a,this.width*d,this.height*a)}return this.div}static deserialize(D,n,d){if(D instanceof H.StampAnnotationElement)return null;const a=super.deserialize(D,n,d),{rect:A,bitmapUrl:T,bitmapId:N,isSvg:X,accessibilityData:tt}=D;N&&d.imageManager.isValidId(N)?Y(a,u,N):Y(a,k,T),Y(a,h,X);const[mt,ft]=a.pageDimensions;return a.width=(A[2]-A[0])/mt,a.height=(A[3]-A[1])/ft,tt&&(a.altTextData=tt),a}serialize(D=!1,n=null){if(this.isEmpty())return null;const d={annotationType:p.AnnotationEditorType.STAMP,bitmapId:t(this,u),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,h),structTreeParentId:this._structTreeParentId};if(D)return d.bitmapUrl=V(this,K,je).call(this,!0),d.accessibilityData=this.altTextData,d;const{decorative:a,altText:A}=this.altTextData;if(!a&&A&&(d.accessibilityData={type:"Figure",alt:A}),n===null)return d;n.stamps||(n.stamps=new Map);const T=t(this,h)?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!n.stamps.has(t(this,u)))n.stamps.set(t(this,u),{area:T,serialized:d}),d.bitmap=V(this,K,je).call(this,!1);else if(t(this,h)){const N=n.stamps.get(t(this,u));T>N.area&&(N.area=T,N.serialized.bitmap.close(),N.serialized.bitmap=V(this,K,je).call(this,!1))}return d}};x=new WeakMap,u=new WeakMap,s=new WeakMap,k=new WeakMap,v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakMap,S=new WeakMap,C=new WeakSet,Ee=function(D,n=!1){if(!D){this.remove();return}Y(this,x,D.bitmap),n||(Y(this,u,D.id),Y(this,h,D.isSvg)),V(this,b,xi).call(this)},y=new WeakSet,we=function(){Y(this,s,null),this._uiManager.enableWaiting(!1),t(this,f)&&this.div.focus()},e=new WeakSet,He=function(){if(t(this,u)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,u)).then(n=>V(this,C,Ee).call(this,n,!0)).finally(()=>V(this,y,we).call(this));return}if(t(this,k)){const n=t(this,k);Y(this,k,null),this._uiManager.enableWaiting(!0),Y(this,s,this._uiManager.imageManager.getFromUrl(n).then(d=>V(this,C,Ee).call(this,d)).finally(()=>V(this,y,we).call(this)));return}if(t(this,v)){const n=t(this,v);Y(this,v,null),this._uiManager.enableWaiting(!0),Y(this,s,this._uiManager.imageManager.getFromFile(n).then(d=>V(this,C,Ee).call(this,d)).finally(()=>V(this,y,we).call(this)));return}const D=document.createElement("input");D.type="file",D.accept=W.supportedTypesStr,Y(this,s,new Promise(n=>{D.addEventListener("change",async()=>{if(!D.files||D.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(D.files[0]);V(this,C,Ee).call(this,d)}n()}),D.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>V(this,y,we).call(this))),D.click()},b=new WeakSet,xi=function(){const{div:D}=this;let{width:n,height:d}=t(this,x);const[a,A]=this.pageDimensions,T=.75;if(this.width)n=this.width*a,d=this.height*A;else if(n>T*a||d>T*A){const mt=Math.min(T*a/n,T*A/d);n*=mt,d*=mt}const[N,X]=this.parentDimensions;this.setDims(n*N/a,d*X/A),this._uiManager.enableWaiting(!1);const tt=Y(this,f,document.createElement("canvas"));D.append(tt),D.hidden=!1,V(this,P,Mi).call(this,n,d),V(this,B,Fn).call(this),t(this,S)||(this.parent.addUndoableEditor(this),Y(this,S,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},M=new WeakSet,Rn=function(D,n){var T;const[d,a]=this.parentDimensions;this.width=D/d,this.height=n/a,this.setDims(D,n),(T=this._initialOptions)!=null&&T.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,g)!==null&&clearTimeout(t(this,g)),Y(this,g,setTimeout(()=>{Y(this,g,null),V(this,P,Mi).call(this,D,n)},200))},j=new WeakSet,kn=function(D,n){const{width:d,height:a}=t(this,x);let A=d,T=a,N=t(this,x);for(;A>2*D||T>2*n;){const X=A,tt=T;A>2*D&&(A=A>=16384?Math.floor(A/2)-1:Math.ceil(A/2)),T>2*n&&(T=T>=16384?Math.floor(T/2)-1:Math.ceil(T/2));const mt=new OffscreenCanvas(A,T);mt.getContext("2d").drawImage(N,0,0,X,tt,0,0,A,T),N=mt.transferToImageBitmap()}return N},P=new WeakSet,Mi=function(D,n){D=Math.ceil(D),n=Math.ceil(n);const d=t(this,f);if(!d||d.width===D&&d.height===n)return;d.width=D,d.height=n;const a=t(this,h)?t(this,x):V(this,j,kn).call(this,D,n),A=d.getContext("2d");A.filter=this._uiManager.hcmFilter,A.drawImage(a,0,0,a.width,a.height,0,0,D,n)},K=new WeakSet,je=function(D){if(D){if(t(this,h)){const a=this._uiManager.imageManager.getSvgUrl(t(this,u));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=t(this,x),n.getContext("2d").drawImage(t(this,x),0,0),n.toDataURL()}if(t(this,h)){const[n,d]=this.pageDimensions,a=Math.round(this.width*n*lt.PixelsPerInch.PDF_TO_CSS_UNITS),A=Math.round(this.height*d*lt.PixelsPerInch.PDF_TO_CSS_UNITS),T=new OffscreenCanvas(a,A);return T.getContext("2d").drawImage(t(this,x),0,0,t(this,x).width,t(this,x).height,0,0,a,A),T.transferToImageBitmap()}return structuredClone(t(this,x))},B=new WeakSet,Fn=function(){Y(this,c,new ResizeObserver(D=>{const n=D[0].contentRect;n.width&&n.height&&V(this,M,Rn).call(this,n.width,n.height)})),t(this,c).observe(this.div)},ee(W,"_type","stamp");let I=W;l.StampEditor=I}],__webpack_module_cache__={};function __w_pdfjs_require__(yt){var l=__webpack_module_cache__[yt];if(l!==void 0)return l.exports;var it=__webpack_module_cache__[yt]={exports:{}};return __webpack_modules__[yt](it,it.exports,__w_pdfjs_require__),it.exports}var __webpack_exports__={};return(()=>{var yt=__webpack_exports__;Object.defineProperty(yt,"__esModule",{value:!0}),Object.defineProperty(yt,"AbortException",{enumerable:!0,get:function(){return l.AbortException}}),Object.defineProperty(yt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return lt.AnnotationEditorLayer}}),Object.defineProperty(yt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return l.AnnotationEditorParamsType}}),Object.defineProperty(yt,"AnnotationEditorType",{enumerable:!0,get:function(){return l.AnnotationEditorType}}),Object.defineProperty(yt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return H.AnnotationEditorUIManager}}),Object.defineProperty(yt,"AnnotationLayer",{enumerable:!0,get:function(){return I.AnnotationLayer}}),Object.defineProperty(yt,"AnnotationMode",{enumerable:!0,get:function(){return l.AnnotationMode}}),Object.defineProperty(yt,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(yt,"DOMSVGFactory",{enumerable:!0,get:function(){return p.DOMSVGFactory}}),Object.defineProperty(yt,"FeatureTest",{enumerable:!0,get:function(){return l.FeatureTest}}),Object.defineProperty(yt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return x.GlobalWorkerOptions}}),Object.defineProperty(yt,"ImageKind",{enumerable:!0,get:function(){return l.ImageKind}}),Object.defineProperty(yt,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(yt,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(yt,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(yt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return it.PDFDataRangeTransport}}),Object.defineProperty(yt,"PDFDateString",{enumerable:!0,get:function(){return p.PDFDateString}}),Object.defineProperty(yt,"PDFWorker",{enumerable:!0,get:function(){return it.PDFWorker}}),Object.defineProperty(yt,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(yt,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(yt,"PixelsPerInch",{enumerable:!0,get:function(){return p.PixelsPerInch}}),Object.defineProperty(yt,"PromiseCapability",{enumerable:!0,get:function(){return l.PromiseCapability}}),Object.defineProperty(yt,"RenderingCancelledException",{enumerable:!0,get:function(){return p.RenderingCancelledException}}),Object.defineProperty(yt,"SVGGraphics",{enumerable:!0,get:function(){return it.SVGGraphics}}),Object.defineProperty(yt,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(yt,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(yt,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(yt,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(yt,"build",{enumerable:!0,get:function(){return it.build}}),Object.defineProperty(yt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(yt,"getDocument",{enumerable:!0,get:function(){return it.getDocument}}),Object.defineProperty(yt,"getFilenameFromUrl",{enumerable:!0,get:function(){return p.getFilenameFromUrl}}),Object.defineProperty(yt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return p.getPdfFilenameFromUrl}}),Object.defineProperty(yt,"getXfaPageViewport",{enumerable:!0,get:function(){return p.getXfaPageViewport}}),Object.defineProperty(yt,"isDataScheme",{enumerable:!0,get:function(){return p.isDataScheme}}),Object.defineProperty(yt,"isPdfFile",{enumerable:!0,get:function(){return p.isPdfFile}}),Object.defineProperty(yt,"loadScript",{enumerable:!0,get:function(){return p.loadScript}}),Object.defineProperty(yt,"noContextMenu",{enumerable:!0,get:function(){return p.noContextMenu}}),Object.defineProperty(yt,"normalizeUnicode",{enumerable:!0,get:function(){return l.normalizeUnicode}}),Object.defineProperty(yt,"renderTextLayer",{enumerable:!0,get:function(){return F.renderTextLayer}}),Object.defineProperty(yt,"setLayerDimensions",{enumerable:!0,get:function(){return p.setLayerDimensions}}),Object.defineProperty(yt,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(yt,"updateTextLayer",{enumerable:!0,get:function(){return F.updateTextLayer}}),Object.defineProperty(yt,"version",{enumerable:!0,get:function(){return it.version}});var l=__w_pdfjs_require__(1),it=__w_pdfjs_require__(2),p=__w_pdfjs_require__(6),F=__w_pdfjs_require__(26),lt=__w_pdfjs_require__(27),H=__w_pdfjs_require__(5),I=__w_pdfjs_require__(29),x=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports,pdf_viewer={exports:{}};(function(yt,l){(function(p,F){yt.exports=p.pdfjsViewer=F()})(globalThis,()=>(()=>{var it=[,(H,I,x)=>{var K,G,B,at,Dn,wt,Li,D,Ri,d,In,A,On,N,Nn,tt,ki,ft,Bn,et,Un,pt,We,Ft,Pe,ht,_e,J,Vn,gt,Fi,Rt,Di,Vt,ze,zt,Hn,Xt,Ii,At,Oi,L,Ce;Object.defineProperty(I,"__esModule",{value:!0}),I.PDFFindController=I.FindState=void 0;var u=x(2),s=x(3),k=x(4);const v={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};I.FindState=v;const f=250,c=-50,g=-400,h={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},S=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let C;const _=new RegExp("\\p{M}+","gu"),y=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),i=new RegExp("([^\\p{M}])\\p{M}*$","u"),e=new RegExp("^\\p{M}*([^\\p{M}])","u"),E=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,b=new Map,o="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",M=new Map;let w=null,j=null;function Z(st){const dt=[];let _t;for(;(_t=E.exec(st))!==null;){let{index:q}=_t;for(const r of _t[0]){let O=b.get(r);O||(O=r.normalize("NFD").length,b.set(r,O)),dt.push([O,q++])}}let U;if(dt.length===0&&w)U=w;else if(dt.length>0&&j)U=j;else{const q=Object.keys(h).join(""),r=(0,s.getNormalizeWithNFKC)(),nt=`([${q}])|([${r}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;dt.length===0?U=w=new RegExp(nt+"|(\\u0000)","gum"):U=j=new RegExp(nt+`|(${o})`,"gum")}const ot=[];for(;(_t=_.exec(st))!==null;)ot.push([_t[0].length,_t.index]);let xt=st.normalize("NFD");const Et=[[0,0]];let Dt=0,Ot=0,Wt=0,Ct=0,qt=0,Ut=!1;return xt=xt.replace(U,(q,r,O,z,nt,ut,vt,kt,Nt,It)=>{var Qt,Ht,jt;if(It-=Ct,r){const $t=h[r],Yt=$t.length;for(let Zt=1;Zt<Yt;Zt++)Et.push([It-Wt+Zt,Wt-Zt]);return Wt-=Yt-1,$t}if(O){let $t=M.get(O);$t||($t=O.normalize("NFKC"),M.set(O,$t));const Yt=$t.length;for(let Zt=1;Zt<Yt;Zt++)Et.push([It-Wt+Zt,Wt-Zt]);return Wt-=Yt-1,$t}if(z)return Ut=!0,It+qt===((Qt=ot[Dt])==null?void 0:Qt[1])?++Dt:(Et.push([It-1-Wt+1,Wt-1]),Wt-=1,Ct+=1),Et.push([It-Wt+1,Wt]),Ct+=1,qt+=1,z.charAt(0);if(nt){const $t=nt.endsWith(`
`),Yt=$t?nt.length-2:nt.length;Ut=!0;let Zt=Yt;It+qt===((Ht=ot[Dt])==null?void 0:Ht[1])&&(Zt-=ot[Dt][0],++Dt);for(let te=1;te<=Zt;te++)Et.push([It-1-Wt+te,Wt-te]);return Wt-=Zt,Ct+=Zt,$t?(It+=Yt-1,Et.push([It-Wt+1,1+Wt]),Wt+=1,Ct+=1,qt+=1,nt.slice(0,Yt)):nt}if(ut){const $t=ut.length-2;return Et.push([It-Wt+$t,1+Wt]),Wt+=1,Ct+=1,qt+=1,ut.slice(0,-2)}if(vt){const $t=vt.length-1;return Et.push([It-Wt+$t,Wt]),Ct+=1,qt+=1,vt.slice(0,-1)}if(kt)return Et.push([It-Wt+1,Wt-1]),Wt-=1,Ct+=1,qt+=1," ";if(It+qt===((jt=dt[Ot])==null?void 0:jt[1])){const $t=dt[Ot][0]-1;++Ot;for(let Yt=1;Yt<=$t;Yt++)Et.push([It-(Wt-Yt),Wt-Yt]);Wt-=$t,Ct+=$t}return Nt}),Et.push([xt.length,Wt]),[xt,Et,Ut]}function P(st,dt,_t){if(!st)return[dt,_t];const U=dt,ot=dt+_t-1;let xt=(0,u.binarySearchFirstItem)(st,Ct=>Ct[0]>=U);st[xt][0]>U&&--xt;let Et=(0,u.binarySearchFirstItem)(st,Ct=>Ct[0]>=ot,xt);st[Et][0]>ot&&--Et;const Dt=U+st[xt][1],Wt=ot+st[Et][1]+1-Dt;return[Dt,Wt]}class ${constructor({linkService:dt,eventBus:_t,updateMatchesCountOnProgress:U=!0}){R(this,at);R(this,wt);R(this,D);R(this,d);R(this,A);R(this,N);R(this,tt);R(this,ft);R(this,et);R(this,pt);R(this,Ft);R(this,ht);R(this,J);R(this,gt);R(this,Rt);R(this,Vt);R(this,zt);R(this,Xt);R(this,At);R(this,L);R(this,K,null);R(this,G,!0);R(this,B,0);this._linkService=dt,this._eventBus=_t,Y(this,G,U),this.onIsPageVisible=null,V(this,wt,Li).call(this),_t._on("find",V(this,at,Dn).bind(this)),_t._on("findbarclose",V(this,zt,Hn).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return t(this,K)}setDocument(dt){this._pdfDocument&&V(this,wt,Li).call(this),dt&&(this._pdfDocument=dt,this._firstPageCapability.resolve())}scrollMatchIntoView({element:dt=null,selectedLeft:_t=0,pageIndex:U=-1,matchIndex:ot=-1}){if(!this._scrollMatches||!dt)return;if(ot===-1||ot!==this._selected.matchIdx)return;if(U===-1||U!==this._selected.pageIdx)return;this._scrollMatches=!1;const xt={top:c,left:_t+g};(0,u.scrollIntoView)(dt,xt,!0)}}K=new WeakMap,G=new WeakMap,B=new WeakMap,at=new WeakSet,Dn=function(dt){if(!dt)return;dt.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof dt.query=="string"&&(dt.query=dt.query.match(/\S+/g)));const _t=this._pdfDocument,{type:U}=dt;(t(this,K)===null||V(this,d,In).call(this,dt))&&(this._dirtyMatch=!0),Y(this,K,dt),U!=="highlightallchange"&&V(this,L,Ce).call(this,v.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||_t&&this._pdfDocument!==_t)return;V(this,et,Un).call(this);const ot=!this._highlightMatches,xt=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),U?this._dirtyMatch?V(this,ht,_e).call(this):U==="again"?(V(this,ht,_e).call(this),ot&&t(this,K).highlightAll&&V(this,Ft,Pe).call(this)):U==="highlightallchange"?(xt?V(this,ht,_e).call(this):this._highlightMatches=!0,V(this,Ft,Pe).call(this)):V(this,ht,_e).call(this):this._findTimeout=setTimeout(()=>{V(this,ht,_e).call(this),this._findTimeout=null},f)})},wt=new WeakSet,Li=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],Y(this,B,0),Y(this,K,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new k.PromiseCapability},D=new WeakSet,Ri=function(){const{query:dt}=t(this,K);return typeof dt=="string"?(dt!==this._rawQuery&&(this._rawQuery=dt,[this._normalizedQuery]=Z(dt)),this._normalizedQuery):(dt||[]).filter(_t=>!!_t).map(_t=>Z(_t)[0])},d=new WeakSet,In=function(dt){var Et;const _t=dt.query,U=t(this,K).query,ot=typeof _t;if(ot!==typeof U)return!0;if(ot==="string"){if(_t!==U)return!0}else if(JSON.stringify(_t)!==JSON.stringify(U))return!0;switch(dt.type){case"again":const Dt=this._selected.pageIdx+1,Ot=this._linkService;return Dt>=1&&Dt<=Ot.pagesCount&&Dt!==Ot.page&&!(((Et=this.onIsPageVisible)==null?void 0:Et.call(this,Dt))??!0);case"highlightallchange":return!1}return!0},A=new WeakSet,On=function(dt,_t,U){let ot=dt.slice(0,_t).match(i);if(ot){const xt=dt.charCodeAt(_t),Et=ot[1].charCodeAt(0);if((0,s.getCharacterType)(xt)===(0,s.getCharacterType)(Et))return!1}if(ot=dt.slice(_t+U).match(e),ot){const xt=dt.charCodeAt(_t+U-1),Et=ot[1].charCodeAt(0);if((0,s.getCharacterType)(xt)===(0,s.getCharacterType)(Et))return!1}return!0},N=new WeakSet,Nn=function(dt,_t,U,ot){const xt=this._pageMatches[U]=[],Et=this._pageMatchesLength[U]=[];if(!dt)return;const Dt=this._pageDiffs[U];let Ot;for(;(Ot=dt.exec(ot))!==null;){if(_t&&!V(this,A,On).call(this,ot,Ot.index,Ot[0].length))continue;const[Wt,Ct]=P(Dt,Ot.index,Ot[0].length);Ct&&(xt.push(Wt),Et.push(Ct))}},tt=new WeakSet,ki=function(dt,_t){const{matchDiacritics:U}=t(this,K);let ot=!1;dt=dt.replaceAll(y,(Et,Dt,Ot,Wt,Ct,qt)=>Dt?`[ ]*\\${Dt}[ ]*`:Ot?`[ ]*${Ot}[ ]*`:Wt?"[ ]+":U?Ct||qt:Ct?S.has(Ct.charCodeAt(0))?Ct:"":_t?(ot=!0,`${qt}\\p{M}*`):qt);const xt="[ ]*";return dt.endsWith(xt)&&(dt=dt.slice(0,dt.length-xt.length)),U&&_t&&(C||(C=String.fromCharCode(...S)),ot=!0,dt=`${dt}(?=[${C}]|[^\\p{M}]|$)`),[ot,dt]},ft=new WeakSet,Bn=function(dt){let _t=t(this,D,Ri);if(_t.length===0)return;const{caseSensitive:U,entireWord:ot}=t(this,K),xt=this._pageContents[dt],Et=this._hasDiacritics[dt];let Dt=!1;typeof _t=="string"?[Dt,_t]=V(this,tt,ki).call(this,_t,Et):_t=_t.sort().reverse().map(Ct=>{const[qt,Ut]=V(this,tt,ki).call(this,Ct,Et);return Dt||(Dt=qt),`(${Ut})`}).join("|");const Ot=`g${Dt?"u":""}${U?"":"i"}`;_t=_t?new RegExp(_t,Ot):null,V(this,N,Nn).call(this,_t,ot,dt,xt),t(this,K).highlightAll&&V(this,pt,We).call(this,dt),this._resumePageIdx===dt&&(this._resumePageIdx=null,V(this,gt,Fi).call(this));const Wt=this._pageMatches[dt].length;this._matchesCountTotal+=Wt,t(this,G)?Wt>0&&V(this,At,Oi).call(this):++de(this,B)._===this._linkService.pagesCount&&V(this,At,Oi).call(this)},et=new WeakSet,Un=function(){if(this._extractTextPromises.length>0)return;let dt=Promise.resolve();const _t={disableNormalization:!0};for(let U=0,ot=this._linkService.pagesCount;U<ot;U++){const xt=new k.PromiseCapability;this._extractTextPromises[U]=xt.promise,dt=dt.then(()=>this._pdfDocument.getPage(U+1).then(Et=>Et.getTextContent(_t)).then(Et=>{const Dt=[];for(const Ot of Et.items)Dt.push(Ot.str),Ot.hasEOL&&Dt.push(`
`);[this._pageContents[U],this._pageDiffs[U],this._hasDiacritics[U]]=Z(Dt.join("")),xt.resolve()},Et=>{console.error(`Unable to get text content for page ${U+1}`,Et),this._pageContents[U]="",this._pageDiffs[U]=null,this._hasDiacritics[U]=!1,xt.resolve()}))}},pt=new WeakSet,We=function(dt){this._scrollMatches&&this._selected.pageIdx===dt&&(this._linkService.page=dt+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:dt})},Ft=new WeakSet,Pe=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},ht=new WeakSet,_e=function(){const dt=t(this,K).findPrevious,_t=this._linkService.page-1,U=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=_t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,Y(this,B,0),this._matchesCountTotal=0,V(this,Ft,Pe).call(this);for(let Et=0;Et<U;Et++)this._pendingFindMatches.has(Et)||(this._pendingFindMatches.add(Et),this._extractTextPromises[Et].then(()=>{this._pendingFindMatches.delete(Et),V(this,ft,Bn).call(this,Et)}))}if(t(this,D,Ri).length===0){V(this,L,Ce).call(this,v.FOUND);return}if(this._resumePageIdx)return;const xt=this._offset;if(this._pagesToSearch=U,xt.matchIdx!==null){const Et=this._pageMatches[xt.pageIdx].length;if(!dt&&xt.matchIdx+1<Et||dt&&xt.matchIdx>0){xt.matchIdx=dt?xt.matchIdx-1:xt.matchIdx+1,V(this,Vt,ze).call(this,!0);return}V(this,Rt,Di).call(this,dt)}V(this,gt,Fi).call(this)},J=new WeakSet,Vn=function(dt){const _t=this._offset,U=dt.length,ot=t(this,K).findPrevious;return U?(_t.matchIdx=ot?U-1:0,V(this,Vt,ze).call(this,!0),!0):(V(this,Rt,Di).call(this,ot),_t.wrapped&&(_t.matchIdx=null,this._pagesToSearch<0)?(V(this,Vt,ze).call(this,!1),!0):!1)},gt=new WeakSet,Fi=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let dt=null;do{const _t=this._offset.pageIdx;if(dt=this._pageMatches[_t],!dt){this._resumePageIdx=_t;break}}while(!V(this,J,Vn).call(this,dt))},Rt=new WeakSet,Di=function(dt){const _t=this._offset,U=this._linkService.pagesCount;_t.pageIdx=dt?_t.pageIdx-1:_t.pageIdx+1,_t.matchIdx=null,this._pagesToSearch--,(_t.pageIdx>=U||_t.pageIdx<0)&&(_t.pageIdx=dt?U-1:0,_t.wrapped=!0)},Vt=new WeakSet,ze=function(dt=!1){let _t=v.NOT_FOUND;const U=this._offset.wrapped;if(this._offset.wrapped=!1,dt){const ot=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,_t=U?v.WRAPPED:v.FOUND,ot!==-1&&ot!==this._selected.pageIdx&&V(this,pt,We).call(this,ot)}V(this,L,Ce).call(this,_t,t(this,K).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,V(this,pt,We).call(this,this._selected.pageIdx))},zt=new WeakSet,Hn=function(dt){const _t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||_t&&this._pdfDocument!==_t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),V(this,L,Ce).call(this,v.FOUND),this._highlightMatches=!1,V(this,Ft,Pe).call(this))})},Xt=new WeakSet,Ii=function(){var xt;const{pageIdx:dt,matchIdx:_t}=this._selected;let U=0,ot=this._matchesCountTotal;if(_t!==-1){for(let Et=0;Et<dt;Et++)U+=((xt=this._pageMatches[Et])==null?void 0:xt.length)||0;U+=_t+1}return(U<1||U>ot)&&(U=ot=0),{current:U,total:ot}},At=new WeakSet,Oi=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:V(this,Xt,Ii).call(this)})},L=new WeakSet,Ce=function(dt,_t=!1){var U;!t(this,G)&&(t(this,B)!==this._linkService.pagesCount||dt===v.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:dt,previous:_t,matchesCount:V(this,Xt,Ii).call(this),rawQuery:((U=t(this,K))==null?void 0:U.query)??null})},I.PDFFindController=$},(H,I)=>{var bt,pt,Lt,Ft,Mt;Object.defineProperty(I,"__esModule",{value:!0}),I.animationStarted=I.VERTICAL_PADDING=I.UNKNOWN_SCALE=I.TextLayerMode=I.SpreadMode=I.SidebarView=I.ScrollMode=I.SCROLLBAR_PADDING=I.RenderingStates=I.ProgressBar=I.PresentationModeState=I.OutputScale=I.MIN_SCALE=I.MAX_SCALE=I.MAX_AUTO_SCALE=I.DEFAULT_SCALE_VALUE=I.DEFAULT_SCALE_DELTA=I.DEFAULT_SCALE=I.CursorTool=I.AutoPrintRegExp=void 0,I.apiPageLayoutToViewerModes=mt,I.apiPageModeToSidebarView=ft,I.approximateFraction=K,I.backtrackBeforeAllVisibleElements=at,I.binarySearchFirstItem=$,I.docStyle=void 0,I.getActiveOrFocusedElement=tt,I.getPageSizeInches=B,I.getVisibleElements=W,I.isPortraitOrientation=a,I.isValidRotation=D,I.isValidScrollMode=n,I.isValidSpreadMode=d,I.normalizeWheelEventDelta=Pt,I.normalizeWheelEventDirection=wt,I.parseQueryString=j,I.removeNullCharacters=P,I.roundToDivide=G,I.scrollIntoView=M,I.toggleCheckedBtn=St,I.toggleExpandedBtn=et,I.watchScroll=w;const x="auto";I.DEFAULT_SCALE_VALUE=x;const u=1;I.DEFAULT_SCALE=u;const s=1.1;I.DEFAULT_SCALE_DELTA=s;const k=.1;I.MIN_SCALE=k;const v=10;I.MAX_SCALE=v;const f=0;I.UNKNOWN_SCALE=f;const c=1.25;I.MAX_AUTO_SCALE=c;const g=40;I.SCROLLBAR_PADDING=g;const h=5;I.VERTICAL_PADDING=h;const S={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};I.RenderingStates=S;const C={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};I.PresentationModeState=C;const _={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};I.SidebarView=_;const y={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};I.TextLayerMode=y;const i={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};I.ScrollMode=i;const e={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};I.SpreadMode=e;const E={SELECT:0,HAND:1,ZOOM:2};I.CursorTool=E;const b=/\bprint\s*\(/;I.AutoPrintRegExp=b;class o{constructor(){const rt=window.devicePixelRatio||1;this.sx=rt,this.sy=rt}get scaled(){return this.sx!==1||this.sy!==1}}I.OutputScale=o;function M(ht,rt,J=!1){let Q=ht.offsetParent;if(!Q){console.error("offsetParent is not set -- cannot scroll");return}let gt=ht.offsetTop+ht.clientTop,Tt=ht.offsetLeft+ht.clientLeft;for(;Q.clientHeight===Q.scrollHeight&&Q.clientWidth===Q.scrollWidth||J&&(Q.classList.contains("markedContent")||getComputedStyle(Q).overflow==="hidden");)if(gt+=Q.offsetTop,Tt+=Q.offsetLeft,Q=Q.offsetParent,!Q)return;rt&&(rt.top!==void 0&&(gt+=rt.top),rt.left!==void 0&&(Tt+=rt.left,Q.scrollLeft=Tt)),Q.scrollTop=gt}function w(ht,rt){const J=function(Tt){gt||(gt=window.requestAnimationFrame(function(){gt=null;const Bt=ht.scrollLeft,Vt=Q.lastX;Bt!==Vt&&(Q.right=Bt>Vt),Q.lastX=Bt;const Gt=ht.scrollTop,zt=Q.lastY;Gt!==zt&&(Q.down=Gt>zt),Q.lastY=Gt,rt(Q)}))},Q={right:!0,down:!0,lastX:ht.scrollLeft,lastY:ht.scrollTop,_eventHandler:J};let gt=null;return ht.addEventListener("scroll",J,!0),Q}function j(ht){const rt=new Map;for(const[J,Q]of new URLSearchParams(ht))rt.set(J.toLowerCase(),Q);return rt}const Z=/[\x01-\x1F]/g;function P(ht,rt=!1){return typeof ht!="string"?(console.error("The argument must be a string."),ht):(rt&&(ht=ht.replaceAll(Z," ")),ht.replaceAll("\0",""))}function $(ht,rt,J=0){let Q=J,gt=ht.length-1;if(gt<0||!rt(ht[gt]))return ht.length;if(rt(ht[Q]))return Q;for(;Q<gt;){const Tt=Q+gt>>1,Rt=ht[Tt];rt(Rt)?gt=Tt:Q=Tt+1}return Q}function K(ht){if(Math.floor(ht)===ht)return[ht,1];const rt=1/ht,J=8;if(rt>J)return[1,J];if(Math.floor(rt)===rt)return[1,rt];const Q=ht>1?rt:ht;let gt=0,Tt=1,Rt=1,Bt=1;for(;;){const Gt=gt+Rt,zt=Tt+Bt;if(zt>J)break;Q<=Gt/zt?(Rt=Gt,Bt=zt):(gt=Gt,Tt=zt)}let Vt;return Q-gt/Tt<Rt/Bt-Q?Vt=Q===ht?[gt,Tt]:[Tt,gt]:Vt=Q===ht?[Rt,Bt]:[Bt,Rt],Vt}function G(ht,rt){const J=ht%rt;return J===0?ht:Math.round(ht-J+rt)}function B({view:ht,userUnit:rt,rotate:J}){const[Q,gt,Tt,Rt]=ht,Bt=J%180!==0,Vt=(Tt-Q)/72*rt,Gt=(Rt-gt)/72*rt;return{width:Bt?Gt:Vt,height:Bt?Vt:Gt}}function at(ht,rt,J){if(ht<2)return ht;let Q=rt[ht].div,gt=Q.offsetTop+Q.clientTop;gt>=J&&(Q=rt[ht-1].div,gt=Q.offsetTop+Q.clientTop);for(let Tt=ht-2;Tt>=0&&(Q=rt[Tt].div,!(Q.offsetTop+Q.clientTop+Q.clientHeight<=gt));--Tt)ht=Tt;return ht}function W({scrollEl:ht,views:rt,sortByVisibility:J=!1,horizontal:Q=!1,rtl:gt=!1}){const Tt=ht.scrollTop,Rt=Tt+ht.clientHeight,Bt=ht.scrollLeft,Vt=Bt+ht.clientWidth;function Gt(st){const dt=st.div;return dt.offsetTop+dt.clientTop+dt.clientHeight>Tt}function zt(st){const dt=st.div,_t=dt.offsetLeft+dt.clientLeft,U=_t+dt.clientWidth;return gt?_t<Vt:U>Bt}const Kt=[],Xt=new Set,Jt=rt.length;let At=$(rt,Q?zt:Gt);At>0&&At<Jt&&!Q&&(At=at(At,rt,Tt));let m=Q?Vt:-1;for(let st=At;st<Jt;st++){const dt=rt[st],_t=dt.div,U=_t.offsetLeft+_t.clientLeft,ot=_t.offsetTop+_t.clientTop,xt=_t.clientWidth,Et=_t.clientHeight,Dt=U+xt,Ot=ot+Et;if(m===-1)Ot>=Rt&&(m=Ot);else if((Q?U:ot)>m)break;if(Ot<=Tt||ot>=Rt||Dt<=Bt||U>=Vt)continue;const Wt=Math.max(0,Tt-ot)+Math.max(0,Ot-Rt),Ct=Math.max(0,Bt-U)+Math.max(0,Dt-Vt),qt=(Et-Wt)/Et,Ut=(xt-Ct)/xt,q=qt*Ut*100|0;Kt.push({id:dt.id,x:U,y:ot,view:dt,percent:q,widthPercent:Ut*100|0}),Xt.add(dt.id)}const L=Kt[0],ct=Kt.at(-1);return J&&Kt.sort(function(st,dt){const _t=st.percent-dt.percent;return Math.abs(_t)>.001?-_t:st.id-dt.id}),{first:L,last:ct,views:Kt,ids:Xt}}function wt(ht){let rt=Math.hypot(ht.deltaX,ht.deltaY);const J=Math.atan2(ht.deltaY,ht.deltaX);return-.25*Math.PI<J&&J<.75*Math.PI&&(rt=-rt),rt}function Pt(ht){const rt=ht.deltaMode;let J=wt(ht);const Q=30,gt=30;return rt===WheelEvent.DOM_DELTA_PIXEL?J/=Q*gt:rt===WheelEvent.DOM_DELTA_LINE&&(J/=gt),J}function D(ht){return Number.isInteger(ht)&&ht%90===0}function n(ht){return Number.isInteger(ht)&&Object.values(i).includes(ht)&&ht!==i.UNKNOWN}function d(ht){return Number.isInteger(ht)&&Object.values(e).includes(ht)&&ht!==e.UNKNOWN}function a(ht){return ht.width<=ht.height}const A=new Promise(function(ht){window.requestAnimationFrame(ht)});I.animationStarted=A;const T=document.documentElement.style;I.docStyle=T;function N(ht,rt,J){return Math.min(Math.max(ht,rt),J)}class X{constructor(rt){R(this,bt,null);R(this,pt,null);R(this,Lt,0);R(this,Ft,null);R(this,Mt,!0);Y(this,bt,rt.classList),Y(this,Ft,rt.style)}get percent(){return t(this,Lt)}set percent(rt){if(Y(this,Lt,N(rt,0,100)),isNaN(rt)){t(this,bt).add("indeterminate");return}t(this,bt).remove("indeterminate"),t(this,Ft).setProperty("--progressBar-percent",`${t(this,Lt)}%`)}setWidth(rt){if(!rt)return;const Q=rt.parentNode.offsetWidth-rt.offsetWidth;Q>0&&t(this,Ft).setProperty("--progressBar-end-offset",`${Q}px`)}setDisableAutoFetch(rt=5e3){isNaN(t(this,Lt))||(t(this,pt)&&clearTimeout(t(this,pt)),this.show(),Y(this,pt,setTimeout(()=>{Y(this,pt,null),this.hide()},rt)))}hide(){t(this,Mt)&&(Y(this,Mt,!1),t(this,bt).add("hidden"))}show(){t(this,Mt)||(Y(this,Mt,!0),t(this,bt).remove("hidden"))}}bt=new WeakMap,pt=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Mt=new WeakMap,I.ProgressBar=X;function tt(){let ht=document,rt=ht.activeElement||ht.querySelector(":focus");for(;rt!=null&&rt.shadowRoot;)ht=rt.shadowRoot,rt=ht.activeElement||ht.querySelector(":focus");return rt}function mt(ht){let rt=i.VERTICAL,J=e.NONE;switch(ht){case"SinglePage":rt=i.PAGE;break;case"OneColumn":break;case"TwoPageLeft":rt=i.PAGE;case"TwoColumnLeft":J=e.ODD;break;case"TwoPageRight":rt=i.PAGE;case"TwoColumnRight":J=e.EVEN;break}return{scrollMode:rt,spreadMode:J}}function ft(ht){switch(ht){case"UseNone":return _.NONE;case"UseThumbs":return _.THUMBS;case"UseOutlines":return _.OUTLINE;case"UseAttachments":return _.ATTACHMENTS;case"UseOC":return _.LAYERS}return _.NONE}function St(ht,rt,J=null){ht.classList.toggle("toggled",rt),ht.setAttribute("aria-checked",rt),J==null||J.classList.toggle("hidden",!rt)}function et(ht,rt,J=null){ht.classList.toggle("toggled",rt),ht.setAttribute("aria-expanded",rt),J==null||J.classList.toggle("hidden",!rt)}},(H,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.CharacterType=void 0,I.getCharacterType=_,I.getNormalizeWithNFKC=i;const x={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};I.CharacterType=x;function u(e){return e<11904}function s(e){return(e&65408)===0}function k(e){return e>=97&&e<=122||e>=65&&e<=90}function v(e){return e>=48&&e<=57}function f(e){return e===32||e===9||e===13||e===10}function c(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}function g(e){return e>=12448&&e<=12543}function h(e){return e>=12352&&e<=12447}function S(e){return e>=65376&&e<=65439}function C(e){return(e&65408)===3584}function _(e){return u(e)?s(e)?f(e)?x.SPACE:k(e)||v(e)||e===95?x.ALPHA_LETTER:x.PUNCT:C(e)?x.THAI_LETTER:e===160?x.SPACE:x.ALPHA_LETTER:c(e)?x.HAN_LETTER:g(e)?x.KATAKANA_LETTER:h(e)?x.HIRAGANA_LETTER:S(e)?x.HALFWIDTH_KATAKANA_LETTER:x.ALPHA_LETTER}let y;function i(){return y||(y=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),y}},H=>{H.exports=globalThis.pdfjsLib},(H,I,x)=>{var g,h,Ni,C,jn;Object.defineProperty(I,"__esModule",{value:!0}),I.SimpleLinkService=I.PDFLinkService=I.LinkTarget=void 0;var u=x(2);const s="noopener noreferrer nofollow",k={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};I.LinkTarget=k;function v(i,{url:e,target:E,rel:b,enabled:o=!0}={}){if(!e||typeof e!="string")throw new Error('A valid "url" parameter must provided.');o?i.href=i.title=e:(i.href="",i.title=`Disabled: ${e}`,i.onclick=()=>!1);let M="";switch(E){case k.NONE:break;case k.SELF:M="_self";break;case k.BLANK:M="_blank";break;case k.PARENT:M="_parent";break;case k.TOP:M="_top";break}i.target=M,i.rel=typeof b=="string"?b:s}const y=class y{constructor({eventBus:e,externalLinkTarget:E=null,externalLinkRel:b=null,ignoreDestinationZoom:o=!1}={}){R(this,h);R(this,g,new Map);this.eventBus=e,this.externalLinkTarget=E,this.externalLinkRel=b,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=o,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,E=null){this.baseUrl=E,this.pdfDocument=e,t(this,g).clear()}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(e){if(!this.pdfDocument)return;let E,b;if(typeof e=="string"?(E=e,b=await this.pdfDocument.getDestination(e)):(E=null,b=await e),!Array.isArray(b)){console.error(`PDFLinkService.goToDestination: "${b}" is not a valid destination array, for dest="${e}".`);return}V(this,h,Ni).call(this,e,E,b)}goToPage(e){if(!this.pdfDocument)return;const E=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(E)&&E>0&&E<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(E)),this.pdfViewer.scrollPageIntoView({pageNumber:E})}addLinkAttributes(e,E,b=!1){v(e,{url:E,target:b?k.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if(typeof e=="string"){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const E=JSON.stringify(e);if(E.length>0)return this.getAnchorUrl("#"+escape(E))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){var o;if(!this.pdfDocument)return;let E,b;if(e.includes("=")){const M=(0,u.parseQueryString)(e);if(M.has("search")){const w=M.get("search").replaceAll('"',""),j=M.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:j?w:w.match(/\S+/g)})}if(M.has("page")&&(E=M.get("page")|0||1),M.has("zoom")){const w=M.get("zoom").split(","),j=w[0],Z=parseFloat(j);j.includes("Fit")?j==="Fit"||j==="FitB"?b=[null,{name:j}]:j==="FitH"||j==="FitBH"||j==="FitV"||j==="FitBV"?b=[null,{name:j},w.length>1?w[1]|0:null]:j==="FitR"?w.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):b=[null,{name:j},w[1]|0,w[2]|0,w[3]|0,w[4]|0]:console.error(`PDFLinkService.setHash: "${j}" is not a valid zoom value.`):b=[null,{name:"XYZ"},w.length>1?w[1]|0:null,w.length>2?w[2]|0:null,Z?Z/100:j]}b?this.pdfViewer.scrollPageIntoView({pageNumber:E||this.page,destArray:b,allowNegativeOffset:!0}):E&&(this.page=E),M.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:M.get("pagemode")}),M.has("nameddest")&&this.goToDestination(M.get("nameddest"))}else{b=unescape(e);try{b=JSON.parse(b),Array.isArray(b)||(b=b.toString())}catch{}if(typeof b=="string"||V(o=y,C,jn).call(o,b)){this.goToDestination(b);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}}executeNamedAction(e){var E,b;switch(e){case"GoBack":(E=this.pdfHistory)==null||E.back();break;case"GoForward":(b=this.pdfHistory)==null||b.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:e})}async executeSetOCGState(e){const E=this.pdfDocument,b=await this.pdfViewer.optionalContentConfigPromise;if(E!==this.pdfDocument)return;let o;for(const M of e.state){switch(M){case"ON":case"OFF":case"Toggle":o=M;continue}switch(o){case"ON":b.setVisibility(M,!0);break;case"OFF":b.setVisibility(M,!1);break;case"Toggle":const w=b.getGroup(M);w&&b.setVisibility(M,!w.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(b)}cachePageRef(e,E){if(!E)return;const b=E.gen===0?`${E.num}R`:`${E.num}R${E.gen}`;t(this,g).set(b,e)}_cachedPageNumber(e){if(!e)return null;const E=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return t(this,g).get(E)||null}};g=new WeakMap,h=new WeakSet,Ni=function(e,E=null,b){const o=b[0];let M;if(typeof o=="object"&&o!==null){if(M=this._cachedPageNumber(o),!M){this.pdfDocument.getPageIndex(o).then(w=>{this.cachePageRef(w+1,o),V(this,h,Ni).call(this,e,E,b)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${o}" is not a valid page reference, for dest="${e}".`)});return}}else if(Number.isInteger(o))M=o+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${o}" is not a valid destination reference, for dest="${e}".`);return}if(!M||M<1||M>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${M}" is not a valid page number, for dest="${e}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:E,explicitDest:b,pageNumber:M})),this.pdfViewer.scrollPageIntoView({pageNumber:M,destArray:b,ignoreDestinationZoom:this._ignoreDestinationZoom})},C=new WeakSet,jn=function(e){if(!Array.isArray(e))return!1;const E=e.length;if(E<2)return!1;const b=e[0];if(!(typeof b=="object"&&Number.isInteger(b.num)&&Number.isInteger(b.gen))&&!(Number.isInteger(b)&&b>=0))return!1;const o=e[1];if(!(typeof o=="object"&&typeof o.name=="string"))return!1;let M=!0;switch(o.name){case"XYZ":if(E!==5)return!1;break;case"Fit":case"FitB":return E===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(E!==3)return!1;break;case"FitR":if(E!==6)return!1;M=!1;break;default:return!1}for(let w=2;w<E;w++){const j=e[w];if(!(typeof j=="number"||M&&j===null))return!1}return!0},R(y,C);let f=y;I.PDFLinkService=f;class c{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}get isInPresentationMode(){return!1}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,E,b=!1){v(e,{url:E,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}executeSetOCGState(e){}cachePageRef(e,E){}}I.SimpleLinkService=c},(H,I,x)=>{var f,c,Bi;Object.defineProperty(I,"__esModule",{value:!0}),I.AnnotationLayerBuilder=void 0;var u=x(4),s=x(7),k=x(2);class v{constructor({pageDiv:S,pdfPage:C,linkService:_,downloadManager:y,annotationStorage:i=null,imageResourcesPath:e="",renderForms:E=!0,l10n:b=s.NullL10n,enableScripting:o=!1,hasJSActionsPromise:M=null,fieldObjectsPromise:w=null,annotationCanvasMap:j=null,accessibilityManager:Z=null}){R(this,c);R(this,f,null);this.pageDiv=S,this.pdfPage=C,this.linkService=_,this.downloadManager=y,this.imageResourcesPath=e,this.renderForms=E,this.l10n=b,this.annotationStorage=i,this.enableScripting=o,this._hasJSActionsPromise=M||Promise.resolve(!1),this._fieldObjectsPromise=w||Promise.resolve(null),this._annotationCanvasMap=j,this._accessibilityManager=Z,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=_.eventBus}async render(S,C="display"){var E;if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:S.clone({dontFlip:!0})});return}const[_,y,i]=await Promise.all([this.pdfPage.getAnnotations({intent:C}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const e=this.div=document.createElement("div");if(e.className="annotationLayer",this.pageDiv.append(e),_.length===0){this.hide();return}this.annotationLayer=new u.AnnotationLayer({div:e,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:S.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:_,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:y,fieldObjects:i}),this.linkService.isInPresentationMode&&V(this,c,Bi).call(this,k.PresentationModeState.FULLSCREEN),t(this,f)||(Y(this,f,b=>{V(this,c,Bi).call(this,b.state)}),(E=this._eventBus)==null||E._on("presentationmodechanged",t(this,f)))}cancel(){var S;this._cancelled=!0,t(this,f)&&((S=this._eventBus)==null||S._off("presentationmodechanged",t(this,f)),Y(this,f,null))}hide(){this.div&&(this.div.hidden=!0)}}f=new WeakMap,c=new WeakSet,Bi=function(S){if(!this.div)return;let C=!1;switch(S){case k.PresentationModeState.FULLSCREEN:C=!0;break;case k.PresentationModeState.NORMAL:break;default:return}for(const _ of this.div.childNodes)_.hasAttribute("data-internal-link")||(_.inert=C)},I.AnnotationLayerBuilder=v},(H,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.NullL10n=void 0,I.getL10nFallback=u;const x={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};x.print_progress_percent="{{progress}}%";function u(v,f){switch(v){case"find_match_count":v=`find_match_count[${f.total===1?"one":"other"}]`;break;case"find_match_count_limit":v=`find_match_count_limit[${f.limit===1?"one":"other"}]`;break}return x[v]||""}function s(v,f){return f?v.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(c,g)=>g in f?f[g]:"{{"+g+"}}"):v}const k={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(v,f=null,c=u(v,f)){return s(c,f)},async translate(v){}};I.NullL10n=k},(H,I,x)=>{var v;Object.defineProperty(I,"__esModule",{value:!0}),I.DownloadManager=void 0;var u=x(4);function s(f,c){const g=document.createElement("a");if(!g.click)throw new Error('DownloadManager: "a.click()" is not supported.');g.href=f,g.target="_parent","download"in g&&(g.download=c),(document.body||document.documentElement).append(g),g.click(),g.remove()}class k{constructor(){R(this,v,new WeakMap)}downloadUrl(c,g,h){if(!(0,u.createValidAbsoluteUrl)(c,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${c}`);return}s(c+"#pdfjs.action=download",g)}downloadData(c,g,h){const S=URL.createObjectURL(new Blob([c],{type:h}));s(S,g)}openOrDownloadData(c,g,h){const C=(0,u.isPdfFile)(h)?"application/pdf":"";return this.downloadData(g,h,C),!1}download(c,g,h,S){const C=URL.createObjectURL(c);s(C,h)}}v=new WeakMap,I.DownloadManager=k},(H,I)=>{var v;Object.defineProperty(I,"__esModule",{value:!0}),I.WaitOnType=I.EventBus=I.AutomationEventBus=void 0,I.waitOnEventOrTimeout=u;const x={EVENT:"event",TIMEOUT:"timeout"};I.WaitOnType=x;function u({target:f,name:c,delay:g=0}){return new Promise(function(h,S){if(typeof f!="object"||!(c&&typeof c=="string")||!(Number.isInteger(g)&&g>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function C(e){f instanceof s?f._off(c,_):f.removeEventListener(c,_),i&&clearTimeout(i),h(e)}const _=C.bind(null,x.EVENT);f instanceof s?f._on(c,_):f.addEventListener(c,_);const y=C.bind(null,x.TIMEOUT),i=setTimeout(y,g)})}class s{constructor(){R(this,v,Object.create(null))}on(c,g,h=null){this._on(c,g,{external:!0,once:h==null?void 0:h.once})}off(c,g,h=null){this._off(c,g,{external:!0,once:h==null?void 0:h.once})}dispatch(c,g){const h=t(this,v)[c];if(!h||h.length===0)return;let S;for(const{listener:C,external:_,once:y}of h.slice(0)){if(y&&this._off(c,C),_){(S||(S=[])).push(C);continue}C(g)}if(S){for(const C of S)C(g);S=null}}_on(c,g,h=null){var C;((C=t(this,v))[c]||(C[c]=[])).push({listener:g,external:(h==null?void 0:h.external)===!0,once:(h==null?void 0:h.once)===!0})}_off(c,g,h=null){const S=t(this,v)[c];if(S){for(let C=0,_=S.length;C<_;C++)if(S[C].listener===g){S.splice(C,1);return}}}}v=new WeakMap,I.EventBus=s;class k extends s{dispatch(c,g){throw new Error("Not implemented: AutomationEventBus.dispatch")}}I.AutomationEventBus=k},(H,I,x)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.GenericL10n=void 0,x(11);var u=x(7);const s={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function k(f){return s[f==null?void 0:f.toLowerCase()]||f}class v{constructor(c){const{webL10n:g}=document;this._lang=c,this._ready=new Promise((h,S)=>{g.setLanguage(k(c),()=>{h(g)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(c,g=null,h=(0,u.getL10nFallback)(c,g)){return(await this._ready).get(c,g,h)}async translate(c){return(await this._ready).translate(c)}}I.GenericL10n=v},()=>{document.webL10n=function(H,I){var x={},u="",s="textContent",k="",v={},f="loading",c=!0;function g(){return I.querySelectorAll('link[type="application/l10n"]')}function h(){var P=I.querySelector('script[type="application/l10n"]');return P?JSON.parse(P.innerHTML):null}function S(P){return P?P.querySelectorAll("*[data-l10n-id]"):[]}function C(P){if(!P)return{};var $=P.getAttribute("data-l10n-id"),K=P.getAttribute("data-l10n-args"),G={};if(K)try{G=JSON.parse(K)}catch{console.warn("could not parse arguments for #"+$)}return{id:$,args:G}}function _(P,$,K){$=$||function(at){},K=K||function(){};var G=new XMLHttpRequest;G.open("GET",P,c),G.overrideMimeType&&G.overrideMimeType("text/plain; charset=utf-8"),G.onreadystatechange=function(){G.readyState==4&&(G.status==200||G.status===0?$(G.responseText):K())},G.onerror=K,G.ontimeout=K;try{G.send(null)}catch{K()}}function y(P,$,K,G){var B=P.replace(/[^\/]*$/,"")||"./";function at(wt){return wt.lastIndexOf("\\")<0?wt:wt.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function W(wt,Pt){var D={},n=/^\s*|\s*$/,d=/^\s*#|^\s*$/,a=/^\s*\[(.*)\]\s*$/,A=/^\s*@import\s+url\((.*)\)\s*$/i,T=/^([^=\s]*)\s*=\s*(.+)$/;function N(tt,mt,ft){var St=tt.replace(n,"").split(/[\r\n]+/),et="*",bt=$.split("-",1)[0],pt=!1,Lt="";function Ft(){for(;;){if(!St.length){ft();return}var Mt=St.shift();if(!d.test(Mt)){if(mt){if(Lt=a.exec(Mt),Lt){et=Lt[1].toLowerCase(),pt=et!=="*"&&et!==$&&et!==bt;continue}else if(pt)continue;if(Lt=A.exec(Mt),Lt){X(B+Lt[1],Ft);return}}var ht=Mt.match(T);ht&&ht.length==3&&(D[ht[1]]=at(ht[2]))}}}Ft()}function X(tt,mt){_(tt,function(ft){N(ft,!1,mt)},function(){console.warn(tt+" not found."),mt()})}N(wt,!0,function(){Pt(D)})}_(P,function(wt){u+=wt,W(wt,function(Pt){for(var D in Pt){var n,d,a=D.lastIndexOf(".");a>0?(n=D.substring(0,a),d=D.substring(a+1)):(n=D,d=s),x[n]||(x[n]={}),x[n][d]=Pt[D]}K&&K()})},G)}function i(P,$){P&&(P=P.toLowerCase()),$=$||function(){},e(),k=P;var K=g(),G=K.length;if(G===0){var B=h();if(B&&B.locales&&B.default_locale){if(console.log("using the embedded JSON directory, early way out"),x=B.locales[P],!x){var at=B.default_locale.toLowerCase();for(var W in B.locales)if(W=W.toLowerCase(),W===P){x=B.locales[P];break}else W===at&&(x=B.locales[at])}$()}else console.log("no resource to load, early way out");f="complete";return}var wt=null,Pt=0;wt=function(){Pt++,Pt>=G&&($(),f="complete")};function D(a){var A=a.href;this.load=function(T,N){y(A,T,N,function(){console.warn(A+" not found."),console.warn('"'+T+'" resource not found'),k="",N()})}}for(var n=0;n<G;n++){var d=new D(K[n]);d.load(P,wt)}}function e(){x={},u="",k=""}function E(P){var $={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function K(W,wt){return wt.indexOf(W)!==-1}function G(W,wt,Pt){return wt<=W&&W<=Pt}var B={0:function(W){return"other"},1:function(W){return G(W%100,3,10)?"few":W===0?"zero":G(W%100,11,99)?"many":W==2?"two":W==1?"one":"other"},2:function(W){return W!==0&&W%10===0?"many":W==2?"two":W==1?"one":"other"},3:function(W){return W==1?"one":"other"},4:function(W){return G(W,0,1)?"one":"other"},5:function(W){return G(W,0,2)&&W!=2?"one":"other"},6:function(W){return W===0?"zero":W%10==1&&W%100!=11?"one":"other"},7:function(W){return W==2?"two":W==1?"one":"other"},8:function(W){return G(W,3,6)?"few":G(W,7,10)?"many":W==2?"two":W==1?"one":"other"},9:function(W){return W===0||W!=1&&G(W%100,1,19)?"few":W==1?"one":"other"},10:function(W){return G(W%10,2,9)&&!G(W%100,11,19)?"few":W%10==1&&!G(W%100,11,19)?"one":"other"},11:function(W){return G(W%10,2,4)&&!G(W%100,12,14)?"few":W%10===0||G(W%10,5,9)||G(W%100,11,14)?"many":W%10==1&&W%100!=11?"one":"other"},12:function(W){return G(W,2,4)?"few":W==1?"one":"other"},13:function(W){return G(W%10,2,4)&&!G(W%100,12,14)?"few":W!=1&&G(W%10,0,1)||G(W%10,5,9)||G(W%100,12,14)?"many":W==1?"one":"other"},14:function(W){return G(W%100,3,4)?"few":W%100==2?"two":W%100==1?"one":"other"},15:function(W){return W===0||G(W%100,2,10)?"few":G(W%100,11,19)?"many":W==1?"one":"other"},16:function(W){return W%10==1&&W!=11?"one":"other"},17:function(W){return W==3?"few":W===0?"zero":W==6?"many":W==2?"two":W==1?"one":"other"},18:function(W){return W===0?"zero":G(W,0,2)&&W!==0&&W!=2?"one":"other"},19:function(W){return G(W,2,10)?"few":G(W,0,1)?"one":"other"},20:function(W){return(G(W%10,3,4)||W%10==9)&&!(G(W%100,10,19)||G(W%100,70,79)||G(W%100,90,99))?"few":W%1e6===0&&W!==0?"many":W%10==2&&!K(W%100,[12,72,92])?"two":W%10==1&&!K(W%100,[11,71,91])?"one":"other"},21:function(W){return W===0?"zero":W==1?"one":"other"},22:function(W){return G(W,0,1)||G(W,11,99)?"one":"other"},23:function(W){return G(W%10,1,2)||W%20===0?"one":"other"},24:function(W){return G(W,3,10)||G(W,13,19)?"few":K(W,[2,12])?"two":K(W,[1,11])?"one":"other"}},at=$[P.replace(/-.*$/,"")];return at in B?B[at]:(console.warn("plural form unknown for ["+P+"]"),function(){return"other"})}v.plural=function(P,$,K,G){var B=parseFloat($);if(isNaN(B)||G!=s)return P;v._pluralRules||(v._pluralRules=E(k));var at="["+v._pluralRules(B)+"]";return B===0&&K+"[zero]"in x?P=x[K+"[zero]"][G]:B==1&&K+"[one]"in x?P=x[K+"[one]"][G]:B==2&&K+"[two]"in x?P=x[K+"[two]"][G]:K+at in x?P=x[K+at][G]:K+"[other]"in x&&(P=x[K+"[other]"][G]),P};function b(P,$,K){var G=x[P];if(!G){if(console.warn("#"+P+" is undefined."),!K)return null;G=K}var B={};for(var at in G){var W=G[at];W=o(W,$,P,at),W=M(W,$,P),B[at]=W}return B}function o(P,$,K,G){var B=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,at=B.exec(P);if(!at||!at.length)return P;var W=at[1],wt=at[2],Pt;if($&&wt in $?Pt=$[wt]:wt in x&&(Pt=x[wt]),W in v){var D=v[W];P=D(P,Pt,K,G)}return P}function M(P,$,K){var G=/\{\{\s*(.+?)\s*\}\}/g;return P.replace(G,function(B,at){return $&&at in $?$[at]:at in x?x[at]:(console.log("argument {{"+at+"}} for #"+K+" is undefined."),B)})}function w(P){var $=C(P);if($.id){var K=b($.id,$.args);if(!K){console.warn("#"+$.id+" is undefined.");return}if(K[s]){if(j(P)===0)P[s]=K[s];else{for(var G=P.childNodes,B=!1,at=0,W=G.length;at<W;at++)G[at].nodeType===3&&/\S/.test(G[at].nodeValue)&&(B?G[at].nodeValue="":(G[at].nodeValue=K[s],B=!0));if(!B){var wt=I.createTextNode(K[s]);P.prepend(wt)}}delete K[s]}for(var Pt in K)P[Pt]=K[Pt]}}function j(P){if(P.children)return P.children.length;if(typeof P.childElementCount<"u")return P.childElementCount;for(var $=0,K=0;K<P.childNodes.length;K++)$+=P.nodeType===1?1:0;return $}function Z(P){P=P||I.documentElement;for(var $=S(P),K=$.length,G=0;G<K;G++)w($[G]);w(P)}return{get:function(P,$,K){var G=P.lastIndexOf("."),B=s;G>0&&(B=P.substring(G+1),P=P.substring(0,G));var at;K&&(at={},at[B]=K);var W=b(P,$,at);return W&&B in W?W[B]:"{{"+P+"}}"},getData:function(){return x},getText:function(){return u},getLanguage:function(){return k},setLanguage:function(P,$){i(P,function(){$&&$()})},getDirection:function(){var P=["ar","he","fa","ps","ur"],$=k.split("-",1)[0];return P.indexOf($)>=0?"rtl":"ltr"},translate:Z,getReadyState:function(){return f},ready:function(P){if(P)f=="complete"||f=="interactive"?H.setTimeout(function(){P()}):I.addEventListener&&I.addEventListener("localized",function $(){I.removeEventListener("localized",$),P()});else return}}}(window,document)},(H,I,x)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFHistory=void 0,I.isDestArraysEqual=S,I.isDestHashesEqual=h;var u=x(2),s=x(9);const k=1e3,v=50,f=1e3;function c(){return document.location.hash}class g{constructor({linkService:_,eventBus:y}){this.linkService=_,this.eventBus=y,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:_,resetHistory:y=!1,updateUrl:i=!1}){if(!_||typeof _!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const e=this._fingerprint!==""&&this._fingerprint!==_;this._fingerprint=_,this._updateUrl=i===!0,this._initialized=!0,this._bindEvents();const E=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=c(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(E,!0)||y){const{hash:o,page:M,rotation:w}=this._parseCurrentHash(!0);if(!o||e||y){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:o,page:M,rotation:w},!0);return}const b=E.destination;this._updateInternalState(b,E.uid,!0),b.rotation!==void 0&&(this._initialRotation=b.rotation),b.dest?(this._initialBookmark=JSON.stringify(b.dest),this._destination.page=null):b.hash?this._initialBookmark=b.hash:b.page&&(this._initialBookmark=`page=${b.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:_=null,explicitDest:y,pageNumber:i}){if(!this._initialized)return;if(_&&typeof _!="string"){console.error(`PDFHistory.push: "${_}" is not a valid namedDest parameter.`);return}else if(Array.isArray(y)){if(!this._isValidPage(i)&&(i!==null||this._destination)){console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${y}" is not a valid explicitDest parameter.`);return}const e=_||JSON.stringify(y);if(!e)return;let E=!1;if(this._destination&&(h(this._destination.hash,e)||S(this._destination.dest,y))){if(this._destination.page)return;E=!0}this._popStateInProgress&&!E||(this._pushOrReplaceState({dest:y,hash:e,page:i,rotation:this.linkService.rotation},E),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(_){var y;if(this._initialized){if(!this._isValidPage(_)){console.error(`PDFHistory.pushPage: "${_}" is not a valid page number.`);return}((y=this._destination)==null?void 0:y.page)!==_&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${_}`,page:_,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const _=window.history.state;this._isValidState(_)&&_.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const _=window.history.state;this._isValidState(_)&&_.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(_,y=!1){const i=y||!this._destination,e={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:_};this._updateInternalState(_,e.uid);let E;if(this._updateUrl&&(_!=null&&_.hash)){const b=document.location.href.split("#")[0];b.startsWith("file://")||(E=`${b}#${_.hash}`)}i?window.history.replaceState(e,"",E):window.history.pushState(e,"",E)}_tryPushCurrentPosition(_=!1){if(!this._position)return;let y=this._position;if(_&&(y=Object.assign(Object.create(null),this._position),y.temporary=!0),!this._destination){this._pushOrReplaceState(y);return}if(this._destination.temporary){this._pushOrReplaceState(y,!0);return}if(this._destination.hash===y.hash||!this._destination.page&&this._numPositionUpdates<=v)return;let i=!1;if(this._destination.page>=y.first&&this._destination.page<=y.page){if(this._destination.dest!==void 0||!this._destination.first)return;i=!0}this._pushOrReplaceState(y,i)}_isValidPage(_){return Number.isInteger(_)&&_>0&&_<=this.linkService.pagesCount}_isValidState(_,y=!1){if(!_)return!1;if(_.fingerprint!==this._fingerprint)if(y){if(typeof _.fingerprint!="string"||_.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if((i==null?void 0:i.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(_.uid)||_.uid<0||_.destination===null||typeof _.destination!="object")}_updateInternalState(_,y,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&(_!=null&&_.temporary)&&delete _.temporary,this._destination=_,this._uid=y,this._maxUid=Math.max(this._maxUid,y),this._numPositionUpdates=0}_parseCurrentHash(_=!1){const y=unescape(c()).substring(1),i=(0,u.parseQueryString)(y),e=i.get("nameddest")||"";let E=i.get("page")|0;return(!this._isValidPage(E)||_&&e.length>0)&&(E=null),{hash:y,page:E,rotation:this.linkService.rotation}}_updateViewarea({location:_}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:_.pdfOpenParams.substring(1),page:this.linkService.page,first:_.pageNumber,rotation:_.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},f))}_popState({state:_}){const y=c(),i=this._currentHash!==y;if(this._currentHash=y,!_){this._uid++;const{hash:E,page:b,rotation:o}=this._parseCurrentHash();this._pushOrReplaceState({hash:E,page:b,rotation:o},!0);return}if(!this._isValidState(_))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,(0,s.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:k}).then(()=>{this._blockHashChange--}));const e=_.destination;this._updateInternalState(e,_.uid,!0),(0,u.isValidRotation)(e.rotation)&&(this.linkService.rotation=e.rotation),e.dest?this.linkService.goToDestination(e.dest):e.hash?this.linkService.setHash(e.hash):e.page&&(this.linkService.page=e.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}I.PDFHistory=g;function h(C,_){return typeof C!="string"||typeof _!="string"?!1:C===_||(0,u.parseQueryString)(C).get("nameddest")===_}function S(C,_){function y(i,e){if(typeof i!=typeof e||Array.isArray(i)||Array.isArray(e))return!1;if(i!==null&&typeof i=="object"&&e!==null){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const E in i)if(!y(i[E],e[E]))return!1;return!0}return i===e||Number.isNaN(i)&&Number.isNaN(e)}if(!(Array.isArray(C)&&Array.isArray(_))||C.length!==_.length)return!1;for(let i=0,e=C.length;i<e;i++)if(!y(C[i],_[i]))return!1;return!0}},(H,I,x)=>{var b,o,M,w,j,Z,P,$,K,G,B,$e,W,Ui,Pt,Vi,n,Hi,a,ji,T,Wn,X,zn,mt,Wi;Object.defineProperty(I,"__esModule",{value:!0}),I.PDFPageView=void 0;var u=x(4),s=x(2),k=x(14),v=x(6),f=x(15),c=x(7),g=x(5),h=x(16),S=x(17),C=x(18),_=x(19),y=x(20);const i=f.compatibilityParams.maxCanvasPixels||16777216,e=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new g.SimpleLinkService}});class E{constructor(et){R(this,B);R(this,W);R(this,Pt);R(this,n);R(this,a);R(this,T);R(this,X);R(this,mt);R(this,b,u.AnnotationMode.ENABLE_FORMS);R(this,o,!1);R(this,M,null);R(this,w,null);R(this,j,null);R(this,Z,null);R(this,P,s.RenderingStates.INITIAL);R(this,$,s.TextLayerMode.ENABLE);R(this,K,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0});R(this,G,new WeakMap);var Ft;const bt=et.container,pt=et.defaultViewport;this.id=et.id,this.renderingId="page"+this.id,Y(this,M,et.layerProperties||e),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=et.scale||s.DEFAULT_SCALE,this.viewport=pt,this.pdfPageRotate=pt.rotation,this._optionalContentConfigPromise=et.optionalContentConfigPromise||null,Y(this,$,et.textLayerMode??s.TextLayerMode.ENABLE),Y(this,b,et.annotationMode??u.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=et.imageResourcesPath||"",this.isOffscreenCanvasSupported=et.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=et.maxCanvasPixels??i,this.pageColors=et.pageColors||null,this.eventBus=et.eventBus,this.renderingQueue=et.renderingQueue,this.l10n=et.l10n||c.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((Ft=this.renderingQueue)!=null&&Ft.hasViewer()),this._container=bt,et.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const Lt=document.createElement("div");if(Lt.className="page",Lt.setAttribute("data-page-number",this.id),Lt.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Mt=>{Lt.setAttribute("aria-label",Mt)}),this.div=Lt,V(this,B,$e).call(this),bt==null||bt.append(Lt),this._isStandalone){bt==null||bt.style.setProperty("--scale-factor",this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:Mt}=et;Mt&&Mt.then(ht=>{Mt===this._optionalContentConfigPromise&&(t(this,K).initialOptionalContent=ht.hasInitialVisibility)})}}get renderingState(){return t(this,P)}set renderingState(et){if(et!==t(this,P))switch(Y(this,P,et),t(this,w)&&(clearTimeout(t(this,w)),Y(this,w,null)),et){case s.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case s.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),Y(this,w,setTimeout(()=>{this.div.classList.add("loading"),Y(this,w,null)},0));break;case s.RenderingStates.INITIAL:case s.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(et){var pt,Lt,Ft;this._isStandalone&&(((pt=this.pageColors)==null?void 0:pt.foreground)==="CanvasText"||((Lt=this.pageColors)==null?void 0:Lt.background)==="Canvas")&&((Ft=this._container)==null||Ft.style.setProperty("--hcm-highligh-filter",et.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=et,this.pdfPageRotate=et.rotate;const bt=(this.rotation+this.pdfPageRotate)%360;this.viewport=et.getViewport({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:bt}),V(this,B,$e).call(this),this.reset()}destroy(){var et;this.reset(),(et=this.pdfPage)==null||et.cleanup()}get _textHighlighter(){return(0,u.shadow)(this,"_textHighlighter",new C.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:t(this,M).call(this).findController}))}_resetZoomLayer(et=!1){if(!this.zoomLayer)return;const bt=this.zoomLayer.firstChild;t(this,G).delete(bt),bt.width=0,bt.height=0,et&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:et=!1,keepAnnotationLayer:bt=!1,keepAnnotationEditorLayer:pt=!1,keepXfaLayer:Lt=!1,keepTextLayer:Ft=!1}={}){var Rt,Bt,Vt,Gt,zt;this.cancelRendering({keepAnnotationLayer:bt,keepAnnotationEditorLayer:pt,keepXfaLayer:Lt,keepTextLayer:Ft}),this.renderingState=s.RenderingStates.INITIAL;const Mt=this.div,ht=Mt.childNodes,rt=et&&this.zoomLayer||null,J=bt&&((Rt=this.annotationLayer)==null?void 0:Rt.div)||null,Q=pt&&((Bt=this.annotationEditorLayer)==null?void 0:Bt.div)||null,gt=Lt&&((Vt=this.xfaLayer)==null?void 0:Vt.div)||null,Tt=Ft&&((Gt=this.textLayer)==null?void 0:Gt.div)||null;for(let Kt=ht.length-1;Kt>=0;Kt--){const Xt=ht[Kt];switch(Xt){case rt:case J:case Q:case gt:case Tt:continue}Xt.remove()}Mt.removeAttribute("data-loaded"),J&&this.annotationLayer.hide(),Q&&this.annotationEditorLayer.hide(),gt&&this.xfaLayer.hide(),Tt&&this.textLayer.hide(),(zt=this.structTreeLayer)==null||zt.hide(),rt||(this.canvas&&(t(this,G).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:et=0,rotation:bt=null,optionalContentConfigPromise:pt=null,drawingDelay:Lt=-1}){var Mt;this.scale=et||this.scale,typeof bt=="number"&&(this.rotation=bt),pt instanceof Promise&&(this._optionalContentConfigPromise=pt,pt.then(ht=>{pt===this._optionalContentConfigPromise&&(t(this,K).initialOptionalContent=ht.hasInitialVisibility)})),t(this,K).directDrawing=!0;const Ft=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:Ft}),V(this,B,$e).call(this),this._isStandalone&&((Mt=this._container)==null||Mt.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let ht=!1;if(t(this,o)){if(this.maxCanvasPixels===0)ht=!0;else if(this.maxCanvasPixels>0){const{width:J,height:Q}=this.viewport,{sx:gt,sy:Tt}=this.outputScale;ht=(Math.floor(J)*gt|0)*(Math.floor(Q)*Tt|0)>this.maxCanvasPixels}}const rt=!ht&&Lt>=0&&Lt<1e3;if(rt||ht){if(rt&&this.renderingState!==s.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:Lt}),this.renderingState=s.RenderingStates.FINISHED,t(this,K).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!rt,hideTextLayer:rt}),rt)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:t(this,Z)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:et=!1,keepAnnotationEditorLayer:bt=!1,keepXfaLayer:pt=!1,keepTextLayer:Lt=!1,cancelExtraDelay:Ft=0}={}){var Mt;this.renderTask&&(this.renderTask.cancel(Ft),this.renderTask=null),this.resume=null,this.textLayer&&(!Lt||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!et||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!bt||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!pt||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(Mt=this._textHighlighter)==null||Mt.disable())}cssTransform({target:et,redrawAnnotationLayer:bt=!1,redrawAnnotationEditorLayer:pt=!1,redrawXfaLayer:Lt=!1,redrawTextLayer:Ft=!1,hideTextLayer:Mt=!1}){var rt;if(!et.hasAttribute("zooming")){et.setAttribute("zooming",!0);const{style:J}=et;J.width=J.height=""}const ht=t(this,G).get(et);if(this.viewport!==ht){const J=this.viewport.rotation-ht.rotation,Q=Math.abs(J);let gt=1,Tt=1;if(Q===90||Q===270){const{width:Rt,height:Bt}=this.viewport;gt=Bt/Rt,Tt=Rt/Bt}et.style.transform=`rotate(${J}deg) scale(${gt}, ${Tt})`}bt&&this.annotationLayer&&V(this,W,Ui).call(this),pt&&this.annotationEditorLayer&&V(this,Pt,Vi).call(this),Lt&&this.xfaLayer&&V(this,n,Hi).call(this),this.textLayer&&(Mt?(this.textLayer.hide(),(rt=this.structTreeLayer)==null||rt.hide()):Ft&&V(this,a,ji).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(et,bt){return this.viewport.convertToPdfPoint(et,bt)}async draw(){this.renderingState!==s.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:et,l10n:bt,pageColors:pt,pdfPage:Lt,viewport:Ft}=this;if(!Lt)throw this.renderingState=s.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=s.RenderingStates.RUNNING;const Mt=document.createElement("div");if(Mt.classList.add("canvasWrapper"),et.append(Mt),!this.textLayer&&t(this,$)!==s.TextLayerMode.DISABLE&&!Lt.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new S.TextAccessibilityManager),this.textLayer=new _.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:t(this,$)===s.TextLayerMode.ENABLE_PERMISSIONS}),et.append(this.textLayer.div)),!this.annotationLayer&&t(this,b)!==u.AnnotationMode.DISABLE){const{annotationStorage:m,downloadManager:L,enableScripting:ct,fieldObjectsPromise:st,hasJSActionsPromise:dt,linkService:_t}=t(this,M).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new v.AnnotationLayerBuilder({pageDiv:et,pdfPage:Lt,annotationStorage:m,imageResourcesPath:this.imageResourcesPath,renderForms:t(this,b)===u.AnnotationMode.ENABLE_FORMS,linkService:_t,downloadManager:L,l10n:bt,enableScripting:ct,hasJSActionsPromise:dt,fieldObjectsPromise:st,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const ht=m=>{if(Tt==null||Tt(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=s.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=s.RenderingStates.RUNNING,m()};return}m()},{width:rt,height:J}=Ft,Q=document.createElement("canvas");Q.setAttribute("role","presentation"),Q.hidden=!0;const gt=!!(pt!=null&&pt.background&&(pt!=null&&pt.foreground));let Tt=m=>{(!gt||m)&&(Q.hidden=!1,Tt=null)};Mt.append(Q),this.canvas=Q;const Rt=Q.getContext("2d",{alpha:!1}),Bt=this.outputScale=new s.OutputScale;if(this.maxCanvasPixels===0){const m=1/this.scale;Bt.sx*=m,Bt.sy*=m,Y(this,o,!0)}else if(this.maxCanvasPixels>0){const m=rt*J,L=Math.sqrt(this.maxCanvasPixels/m);Bt.sx>L||Bt.sy>L?(Bt.sx=L,Bt.sy=L,Y(this,o,!0)):Y(this,o,!1)}const Vt=(0,s.approximateFraction)(Bt.sx),Gt=(0,s.approximateFraction)(Bt.sy);Q.width=(0,s.roundToDivide)(rt*Bt.sx,Vt[0]),Q.height=(0,s.roundToDivide)(J*Bt.sy,Gt[0]);const{style:zt}=Q;zt.width=(0,s.roundToDivide)(rt,Vt[1])+"px",zt.height=(0,s.roundToDivide)(J,Gt[1])+"px",t(this,G).set(Q,Ft);const Kt=Bt.scaled?[Bt.sx,0,0,Bt.sy,0,0]:null,Xt={canvasContext:Rt,transform:Kt,viewport:Ft,annotationMode:t(this,b),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:pt},Jt=this.renderTask=this.pdfPage.render(Xt);Jt.onContinue=ht;const At=Jt.promise.then(async()=>{var m;if(Tt==null||Tt(!0),await V(this,mt,Wi).call(this,Jt),V(this,a,ji).call(this),this.annotationLayer&&await V(this,W,Ui).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:L}=t(this,M).call(this);if(!L)return;this.annotationEditorLayer=new k.AnnotationEditorLayerBuilder({uiManager:L,pageDiv:et,pdfPage:Lt,l10n:bt,accessibilityManager:this._accessibilityManager,annotationLayer:(m=this.annotationLayer)==null?void 0:m.annotationLayer})}V(this,Pt,Vi).call(this)},m=>(m instanceof u.RenderingCancelledException||Tt==null||Tt(!0),V(this,mt,Wi).call(this,Jt,m)));if(Lt.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&et.append(this.xfaLayer.div);else{const{annotationStorage:m,linkService:L}=t(this,M).call(this);this.xfaLayer=new y.XfaLayerBuilder({pageDiv:et,pdfPage:Lt,annotationStorage:m,linkService:L})}V(this,n,Hi).call(this)}return et.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),At}setPageLabel(et){this.pageLabel=typeof et=="string"?et:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:et,initialOptionalContent:bt,regularAnnotations:pt}=t(this,K);return et&&bt&&pt?this.canvas:null}}b=new WeakMap,o=new WeakMap,M=new WeakMap,w=new WeakMap,j=new WeakMap,Z=new WeakMap,P=new WeakMap,$=new WeakMap,K=new WeakMap,G=new WeakMap,B=new WeakSet,$e=function(){const{viewport:et}=this;if(this.pdfPage){if(t(this,j)===et.rotation)return;Y(this,j,et.rotation)}(0,u.setLayerDimensions)(this.div,et,!0,!1)},W=new WeakSet,Ui=async function(){let et=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(bt){console.error(`#renderAnnotationLayer: "${bt}".`),et=bt}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:et})}},Pt=new WeakSet,Vi=async function(){let et=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(bt){console.error(`#renderAnnotationEditorLayer: "${bt}".`),et=bt}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:et})}},n=new WeakSet,Hi=async function(){let et=null;try{const bt=await this.xfaLayer.render(this.viewport,"display");bt!=null&&bt.textDivs&&this._textHighlighter&&V(this,X,zn).call(this,bt.textDivs)}catch(bt){console.error(`#renderXfaLayer: "${bt}".`),et=bt}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:et})}},a=new WeakSet,ji=async function(){const{pdfPage:et,textLayer:bt,viewport:pt}=this;if(!bt)return;let Lt=null;try{if(!bt.renderingDone){const Ft=et.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});bt.setTextContentSource(Ft)}await bt.render(pt)}catch(Ft){if(Ft instanceof u.AbortException)return;console.error(`#renderTextLayer: "${Ft}".`),Lt=Ft}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:bt.numTextDivs,error:Lt}),V(this,T,Wn).call(this)},T=new WeakSet,Wn=async function(){var pt,Lt,Ft;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new h.StructTreeLayerBuilder);const et=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),bt=(pt=this.structTreeLayer)==null?void 0:pt.render(et);bt&&((Lt=this.canvas)==null||Lt.append(bt)),(Ft=this.structTreeLayer)==null||Ft.show()},X=new WeakSet,zn=async function(et){const bt=await this.pdfPage.getTextContent(),pt=[];for(const Lt of bt.items)pt.push(Lt.str);this._textHighlighter.setTextMapping(et,pt),this._textHighlighter.enable()},mt=new WeakSet,Wi=async function(et,bt=null){if(et===this.renderTask&&(this.renderTask=null),bt instanceof u.RenderingCancelledException){Y(this,Z,null);return}if(Y(this,Z,bt),this.renderingState=s.RenderingStates.FINISHED,this._resetZoomLayer(!0),t(this,K).regularAnnotations=!et.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:t(this,Z)}),bt)throw bt},I.PDFPageView=E},(H,I,x)=>{var v,f;Object.defineProperty(I,"__esModule",{value:!0}),I.AnnotationEditorLayerBuilder=void 0;var u=x(4),s=x(7);class k{constructor(g){R(this,v,null);R(this,f,void 0);this.pageDiv=g.pageDiv,this.pdfPage=g.pdfPage,this.accessibilityManager=g.accessibilityManager,this.l10n=g.l10n||s.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,Y(this,f,g.uiManager),Y(this,v,g.annotationLayer||null)}async render(g,h="display"){if(h!=="display"||this._cancelled)return;const S=g.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:S}),this.show();return}const C=this.div=document.createElement("div");C.className="annotationEditorLayer",C.tabIndex=0,C.hidden=!0,C.dir=t(this,f).direction,this.pageDiv.append(C),this.annotationEditorLayer=new u.AnnotationEditorLayer({uiManager:t(this,f),div:C,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:S,annotationLayer:t(this,v)});const _={viewport:S,div:C,annotations:null,intent:h};this.annotationEditorLayer.render(_),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}v=new WeakMap,f=new WeakMap,I.AnnotationEditorLayerBuilder=k},(H,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.compatibilityParams=I.OptionKind=I.AppOptions=void 0;const x=Object.create(null);I.compatibilityParams=x;{const f=navigator.userAgent||"",c=navigator.platform||"",g=navigator.maxTouchPoints||1,h=/Android/.test(f),S=/\b(iPad|iPhone|iPod)(?=;)/.test(f)||c==="MacIntel"&&g>1;(function(){(S||h)&&(x.maxCanvasPixels=5242880)})()}const u={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};I.OptionKind=u;const s={annotationEditorMode:{value:0,kind:u.VIEWER+u.PREFERENCE},annotationMode:{value:2,kind:u.VIEWER+u.PREFERENCE},cursorToolOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},defaultZoomDelay:{value:400,kind:u.VIEWER+u.PREFERENCE},defaultZoomValue:{value:"",kind:u.VIEWER+u.PREFERENCE},disableHistory:{value:!1,kind:u.VIEWER},disablePageLabels:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePermissions:{value:!1,kind:u.VIEWER+u.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableScripting:{value:!0,kind:u.VIEWER+u.PREFERENCE},enableStampEditor:{value:!0,kind:u.VIEWER+u.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:u.VIEWER},externalLinkTarget:{value:0,kind:u.VIEWER+u.PREFERENCE},historyUpdateUrl:{value:!1,kind:u.VIEWER+u.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:u.VIEWER+u.PREFERENCE},imageResourcesPath:{value:"./images/",kind:u.VIEWER},maxCanvasPixels:{value:16777216,kind:u.VIEWER},forcePageColors:{value:!1,kind:u.VIEWER+u.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:u.VIEWER+u.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:u.VIEWER+u.PREFERENCE},pdfBugEnabled:{value:!1,kind:u.VIEWER+u.PREFERENCE},printResolution:{value:150,kind:u.VIEWER},sidebarViewOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},scrollModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},spreadModeOnLoad:{value:-1,kind:u.VIEWER+u.PREFERENCE},textLayerMode:{value:1,kind:u.VIEWER+u.PREFERENCE},viewerCssTheme:{value:0,kind:u.VIEWER+u.PREFERENCE},viewOnLoad:{value:0,kind:u.VIEWER+u.PREFERENCE},cMapPacked:{value:!0,kind:u.API},cMapUrl:{value:"../web/cmaps/",kind:u.API},disableAutoFetch:{value:!1,kind:u.API+u.PREFERENCE},disableFontFace:{value:!1,kind:u.API+u.PREFERENCE},disableRange:{value:!1,kind:u.API+u.PREFERENCE},disableStream:{value:!1,kind:u.API+u.PREFERENCE},docBaseUrl:{value:"",kind:u.API},enableXfa:{value:!0,kind:u.API+u.PREFERENCE},fontExtraProperties:{value:!1,kind:u.API},isEvalSupported:{value:!0,kind:u.API},isOffscreenCanvasSupported:{value:!0,kind:u.API},maxImageSize:{value:-1,kind:u.API},pdfBug:{value:!1,kind:u.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:u.API},verbosity:{value:1,kind:u.API},workerPort:{value:null,kind:u.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:u.WORKER}};s.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:u.VIEWER},s.disablePreferences={value:!1,kind:u.VIEWER},s.locale={value:navigator.language||"en-US",kind:u.VIEWER},s.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:u.VIEWER};const k=Object.create(null);class v{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(c){const g=k[c];if(g!==void 0)return g;const h=s[c];if(h!==void 0)return x[c]??h.value}static getAll(c=null){const g=Object.create(null);for(const h in s){const S=s[h];if(c){if(!(c&S.kind))continue;if(c===u.PREFERENCE){const _=S.value,y=typeof _;if(y==="boolean"||y==="string"||y==="number"&&Number.isInteger(_)){g[h]=_;continue}throw new Error(`Invalid type for preference: ${h}`)}}const C=k[h];g[h]=C!==void 0?C:x[h]??S.value}return g}static set(c,g){k[c]=g}static setAll(c){for(const g in c)k[g]=c[g]}static remove(c){delete k[c]}}I.AppOptions=v,v._hasUserOptions=function(){return Object.keys(k).length>0}},(H,I,x)=>{var f,c,zi,h,$i;Object.defineProperty(I,"__esModule",{value:!0}),I.StructTreeLayerBuilder=void 0;var u=x(2);const s={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},k=/^H(\d+)$/;class v{constructor(){R(this,c);R(this,h);R(this,f,void 0)}get renderingDone(){return t(this,f)!==void 0}render(_){if(t(this,f)!==void 0)return t(this,f);const y=V(this,h,$i).call(this,_);return y==null||y.classList.add("structTree"),Y(this,f,y)}hide(){t(this,f)&&!t(this,f).hidden&&(t(this,f).hidden=!0)}show(){var _;(_=t(this,f))!=null&&_.hidden&&(t(this,f).hidden=!1)}}f=new WeakMap,c=new WeakSet,zi=function(_,y){const{alt:i,id:e,lang:E}=_;i!==void 0&&y.setAttribute("aria-label",(0,u.removeNullCharacters)(i)),e!==void 0&&y.setAttribute("aria-owns",e),E!==void 0&&y.setAttribute("lang",(0,u.removeNullCharacters)(E,!0))},h=new WeakSet,$i=function(_){if(!_)return null;const y=document.createElement("span");if("role"in _){const{role:i}=_,e=i.match(k);e?(y.setAttribute("role","heading"),y.setAttribute("aria-level",e[1])):s[i]&&y.setAttribute("role",s[i])}if(V(this,c,zi).call(this,_,y),_.children)if(_.children.length===1&&"id"in _.children[0])V(this,c,zi).call(this,_.children[0],y);else for(const i of _.children)y.append(V(this,h,$i).call(this,i));return y},I.StructTreeLayerBuilder=v},(H,I,x)=>{var k,v,f,c,g,Ge,S,Gi;Object.defineProperty(I,"__esModule",{value:!0}),I.TextAccessibilityManager=void 0;var u=x(2);const _=class _{constructor(){R(this,S);R(this,k,!1);R(this,v,null);R(this,f,new Map);R(this,c,new Map)}setTextMapping(i){Y(this,v,i)}enable(){if(t(this,k))throw new Error("TextAccessibilityManager is already enabled.");if(!t(this,v))throw new Error("Text divs and strings have not been set.");if(Y(this,k,!0),Y(this,v,t(this,v).slice()),t(this,v).sort(V(_,g,Ge)),t(this,f).size>0){const i=t(this,v);for(const[e,E]of t(this,f)){if(!document.getElementById(e)){t(this,f).delete(e);continue}V(this,S,Gi).call(this,e,i[E])}}for(const[i,e]of t(this,c))this.addPointerInTextLayer(i,e);t(this,c).clear()}disable(){t(this,k)&&(t(this,c).clear(),Y(this,v,null),Y(this,k,!1))}removePointerInTextLayer(i){if(!t(this,k)){t(this,c).delete(i);return}const e=t(this,v);if(!e||e.length===0)return;const{id:E}=i,b=t(this,f).get(E);if(b===void 0)return;const o=e[b];t(this,f).delete(E);let M=o.getAttribute("aria-owns");M!=null&&M.includes(E)&&(M=M.split(" ").filter(w=>w!==E).join(" "),M?o.setAttribute("aria-owns",M):(o.removeAttribute("aria-owns"),o.setAttribute("role","presentation")))}addPointerInTextLayer(i,e){const{id:E}=i;if(!E)return null;if(!t(this,k))return t(this,c).set(i,e),null;e&&this.removePointerInTextLayer(i);const b=t(this,v);if(!b||b.length===0)return null;const o=(0,u.binarySearchFirstItem)(b,Z=>{var P;return V(P=_,g,Ge).call(P,i,Z)<0}),M=Math.max(0,o-1),w=b[M];V(this,S,Gi).call(this,E,w),t(this,f).set(E,M);const j=w.parentNode;return j!=null&&j.classList.contains("markedContent")?j.id:null}moveElementInDOM(i,e,E,b){const o=this.addPointerInTextLayer(E,b);if(!i.hasChildNodes())return i.append(e),o;const M=Array.from(i.childNodes).filter(Z=>Z!==e);if(M.length===0)return o;const w=E||e,j=(0,u.binarySearchFirstItem)(M,Z=>{var P;return V(P=_,g,Ge).call(P,w,Z)<0});return j===0?M[0].before(e):M[j-1].after(e),o}};k=new WeakMap,v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakSet,Ge=function(i,e){const E=i.getBoundingClientRect(),b=e.getBoundingClientRect();if(E.width===0&&E.height===0)return 1;if(b.width===0&&b.height===0)return-1;const o=E.y,M=E.y+E.height,w=E.y+E.height/2,j=b.y,Z=b.y+b.height,P=b.y+b.height/2;if(w<=j&&P>=M)return-1;if(P<=o&&w>=Z)return 1;const $=E.x+E.width/2,K=b.x+b.width/2;return $-K},S=new WeakSet,Gi=function(i,e){const E=e.getAttribute("aria-owns");E!=null&&E.includes(i)||e.setAttribute("aria-owns",E?`${E} ${i}`:i),e.removeAttribute("role")},R(_,g);let s=_;I.TextAccessibilityManager=s},(H,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.TextHighlighter=void 0;class x{constructor({findController:s,eventBus:k,pageIndex:v}){this.findController=s,this.matches=[],this.eventBus=k,this.pageIdx=v,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(s,k){this.textDivs=s,this.textContentItemsStr=k}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=s=>{(s.pageIndex===this.pageIdx||s.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(s,k){if(!s)return[];const{textContentItemsStr:v}=this;let f=0,c=0;const g=v.length-1,h=[];for(let S=0,C=s.length;S<C;S++){let _=s[S];for(;f!==g&&_>=c+v[f].length;)c+=v[f].length,f++;f===v.length&&console.error("Could not find a matching mapping");const y={begin:{divIdx:f,offset:_-c}};for(_+=k[S];f!==g&&_>c+v[f].length;)c+=v[f].length,f++;y.end={divIdx:f,offset:_-c},h.push(y)}return h}_renderMatches(s){if(s.length===0)return;const{findController:k,pageIdx:v}=this,{textContentItemsStr:f,textDivs:c}=this,g=v===k.selected.pageIdx,h=k.selected.matchIdx,S=k.state.highlightAll;let C=null;const _={divIdx:-1,offset:void 0};function y(M,w){const j=M.divIdx;return c[j].textContent="",i(j,0,M.offset,w)}function i(M,w,j,Z){let P=c[M];if(P.nodeType===Node.TEXT_NODE){const G=document.createElement("span");P.before(G),G.append(P),c[M]=G,P=G}const $=f[M].substring(w,j),K=document.createTextNode($);if(Z){const G=document.createElement("span");return G.className=`${Z} appended`,G.append(K),P.append(G),Z.includes("selected")?G.offsetLeft:0}return P.append(K),0}let e=h,E=e+1;if(S)e=0,E=s.length;else if(!g)return;let b=-1,o=-1;for(let M=e;M<E;M++){const w=s[M],j=w.begin;if(j.divIdx===b&&j.offset===o)continue;b=j.divIdx,o=j.offset;const Z=w.end,P=g&&M===h,$=P?" selected":"";let K=0;if(!C||j.divIdx!==C.divIdx?(C!==null&&i(C.divIdx,C.offset,_.offset),y(j)):i(C.divIdx,C.offset,j.offset),j.divIdx===Z.divIdx)K=i(j.divIdx,j.offset,Z.offset,"highlight"+$);else{K=i(j.divIdx,j.offset,_.offset,"highlight begin"+$);for(let G=j.divIdx+1,B=Z.divIdx;G<B;G++)c[G].className="highlight middle"+$;y(Z,"highlight end"+$)}C=Z,P&&k.scrollMatchIntoView({element:c[j.divIdx],selectedLeft:K,pageIndex:v,matchIndex:h})}C&&i(C.divIdx,C.offset,_.offset)}_updateMatches(s=!1){if(!this.enabled&&!s)return;const{findController:k,matches:v,pageIdx:f}=this,{textContentItemsStr:c,textDivs:g}=this;let h=-1;for(const _ of v){const y=Math.max(h,_.begin.divIdx);for(let i=y,e=_.end.divIdx;i<=e;i++){const E=g[i];E.textContent=c[i],E.className=""}h=_.end.divIdx+1}if(!(k!=null&&k.highlightMatches)||s)return;const S=k.pageMatches[f]||null,C=k.pageMatchesLength[f]||null;this.matches=this._convertMatches(S,C),this._renderMatches(this.matches)}}I.TextHighlighter=x},(H,I,x)=>{var v,f,c,g,h,$n,C,Gn;Object.defineProperty(I,"__esModule",{value:!0}),I.TextLayerBuilder=void 0;var u=x(4),s=x(2);class k{constructor({highlighter:i=null,accessibilityManager:e=null,isOffscreenCanvasSupported:E=!0,enablePermissions:b=!1}){R(this,h);R(this,C);R(this,v,!1);R(this,f,0);R(this,c,0);R(this,g,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=i,this.accessibilityManager=e,this.isOffscreenCanvasSupported=E,Y(this,v,b===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(i){var b,o,M;if(!t(this,g))throw new Error('No "textContentSource" parameter specified.');const e=i.scale*(globalThis.devicePixelRatio||1),{rotation:E}=i;if(this.renderingDone){const w=E!==t(this,f),j=e!==t(this,c);(w||j)&&(this.hide(),(0,u.updateTextLayer)({container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:j,mustRotate:w}),Y(this,c,e),Y(this,f,E)),this.show();return}this.cancel(),(b=this.highlighter)==null||b.setTextMapping(this.textDivs,this.textContentItemsStr),(o=this.accessibilityManager)==null||o.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,u.renderTextLayer)({textContentSource:t(this,g),container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,V(this,h,$n).call(this),Y(this,c,e),Y(this,f,E),this.show(),(M=this.accessibilityManager)==null||M.enable()}hide(){var i;this.div.hidden||((i=this.highlighter)==null||i.disable(),this.div.hidden=!0)}show(){var i;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(i=this.highlighter)==null||i.enable())}cancel(){var i,e;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(i=this.highlighter)==null||i.disable(),(e=this.accessibilityManager)==null||e.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(i){this.cancel(),Y(this,g,i)}}v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakSet,$n=function(){this.renderingDone=!0;const i=document.createElement("div");i.className="endOfContent",this.div.append(i),V(this,C,Gn).call(this)},C=new WeakSet,Gn=function(){const{div:i}=this;i.addEventListener("mousedown",e=>{const E=i.querySelector(".endOfContent");if(!E)return;let b=e.target!==i;if(b&&(b=getComputedStyle(E).getPropertyValue("-moz-user-select")!=="none"),b){const o=i.getBoundingClientRect(),M=Math.max(0,(e.pageY-o.top)/o.height);E.style.top=(M*100).toFixed(2)+"%"}E.classList.add("active")}),i.addEventListener("mouseup",()=>{const e=i.querySelector(".endOfContent");e&&(e.style.top="",e.classList.remove("active"))}),i.addEventListener("copy",e=>{if(!t(this,v)){const E=document.getSelection();e.clipboardData.setData("text/plain",(0,s.removeNullCharacters)((0,u.normalizeUnicode)(E.toString())))}e.preventDefault(),e.stopPropagation()})},I.TextLayerBuilder=k},(H,I,x)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.XfaLayerBuilder=void 0;var u=x(4);class s{constructor({pageDiv:v,pdfPage:f,annotationStorage:c=null,linkService:g,xfaHtml:h=null}){this.pageDiv=v,this.pdfPage=f,this.annotationStorage=c,this.linkService=g,this.xfaHtml=h,this.div=null,this._cancelled=!1}async render(v,f="display"){if(f==="print"){const h={viewport:v.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:f},S=document.createElement("div");return this.pageDiv.append(S),h.div=S,u.XfaLayer.render(h)}const c=await this.pdfPage.getXfa();if(this._cancelled||!c)return{textDivs:[]};const g={viewport:v.clone({dontFlip:!0}),div:this.div,xfaHtml:c,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:f};return this.div?u.XfaLayer.update(g):(this.div=document.createElement("div"),this.pageDiv.append(this.div),g.div=this.div,u.XfaLayer.render(g))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}I.XfaLayerBuilder=s},(H,I,x)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFScriptingManager=void 0;var u=x(22),s=x(23);class k extends s.PDFScriptingManager{constructor(f){f.externalServices||window.addEventListener("updatefromsandbox",c=>{f.eventBus.dispatch("updatefromsandbox",{source:window,detail:c.detail})}),f.externalServices||(f.externalServices={createScripting:({sandboxBundleSrc:c})=>new u.GenericScripting(c)}),f.docProperties||(f.docProperties=c=>(0,u.docProperties)(c)),super(f)}}I.PDFScriptingManager=k},(H,I,x)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.GenericScripting=void 0,I.docProperties=s;var u=x(4);async function s(v){const f="",c=f.split("#")[0];let{info:g,metadata:h,contentDispositionFilename:S,contentLength:C}=await v.getMetadata();if(!C){const{length:_}=await v.getDownloadInfo();C=_}return{...g,baseURL:c,filesize:C,filename:S||(0,u.getPdfFilenameFromUrl)(f),metadata:h==null?void 0:h.getRaw(),authors:h==null?void 0:h.get("dc:creator"),numPages:v.numPages,URL:f}}class k{constructor(f){this._ready=(0,u.loadScript)(f,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(f){(await this._ready).create(f)}async dispatchEventInSandbox(f){const c=await this._ready;setTimeout(()=>c.dispatchEvent(f),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}I.GenericScripting=k},(H,I,x)=>{var v,f,c,g,h,S,C,_,y,i,e,E,Xn,o,Xe,w,Xi,Z,qn,$,Te;Object.defineProperty(I,"__esModule",{value:!0}),I.PDFScriptingManager=void 0;var u=x(2),s=x(4);class k{constructor({eventBus:B,sandboxBundleSrc:at=null,externalServices:W=null,docProperties:wt=null}){R(this,E);R(this,o);R(this,w);R(this,Z);R(this,$);R(this,v,null);R(this,f,null);R(this,c,null);R(this,g,null);R(this,h,null);R(this,S,null);R(this,C,null);R(this,_,!1);R(this,y,null);R(this,i,null);R(this,e,null);Y(this,g,B),Y(this,y,at),Y(this,h,W),Y(this,c,wt)}setViewer(B){Y(this,C,B)}async setDocument(B){var Pt;if(t(this,S)&&await V(this,$,Te).call(this),Y(this,S,B),!B)return;const[at,W,wt]=await Promise.all([B.getFieldObjects(),B.getCalculationOrderIds(),B.getJSActions()]);if(!at&&!wt){await V(this,$,Te).call(this);return}if(B===t(this,S)){try{Y(this,i,V(this,Z,qn).call(this))}catch(D){console.error(`setDocument: "${D.message}".`),await V(this,$,Te).call(this);return}this._internalEvents.set("updatefromsandbox",D=>{(D==null?void 0:D.source)===window&&V(this,E,Xn).call(this,D.detail)}),this._internalEvents.set("dispatcheventinsandbox",D=>{var n;(n=t(this,i))==null||n.dispatchEventInSandbox(D.detail)}),this._internalEvents.set("pagechanging",({pageNumber:D,previous:n})=>{D!==n&&(V(this,w,Xi).call(this,n),V(this,o,Xe).call(this,D))}),this._internalEvents.set("pagerendered",({pageNumber:D})=>{this._pageOpenPending.has(D)&&D===t(this,C).currentPageNumber&&V(this,o,Xe).call(this,D)}),this._internalEvents.set("pagesdestroy",async()=>{var D,n;await V(this,w,Xi).call(this,t(this,C).currentPageNumber),await((D=t(this,i))==null?void 0:D.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(n=t(this,v))==null||n.resolve()});for(const[D,n]of this._internalEvents)t(this,g)._on(D,n);try{const D=await t(this,c).call(this,B);if(B!==t(this,S))return;await t(this,i).createSandbox({objects:at,calculationOrder:W,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...D,actions:wt}}),t(this,g).dispatch("sandboxcreated",{source:this})}catch(D){console.error(`setDocument: "${D.message}".`),await V(this,$,Te).call(this);return}await((Pt=t(this,i))==null?void 0:Pt.dispatchEventInSandbox({id:"doc",name:"Open"})),await V(this,o,Xe).call(this,t(this,C).currentPageNumber,!0),Promise.resolve().then(()=>{B===t(this,S)&&Y(this,_,!0)})}}async dispatchWillSave(){var B;return(B=t(this,i))==null?void 0:B.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var B;return(B=t(this,i))==null?void 0:B.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var B;if(t(this,i)){await((B=t(this,e))==null?void 0:B.promise),Y(this,e,new s.PromiseCapability);try{await t(this,i).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(at){throw t(this,e).resolve(),Y(this,e,null),at}await t(this,e).promise}}async dispatchDidPrint(){var B;return(B=t(this,i))==null?void 0:B.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var B;return((B=t(this,f))==null?void 0:B.promise)||null}get ready(){return t(this,_)}get _internalEvents(){return(0,s.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,s.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,s.shadow)(this,"_visitedPages",new Map)}}v=new WeakMap,f=new WeakMap,c=new WeakMap,g=new WeakMap,h=new WeakMap,S=new WeakMap,C=new WeakMap,_=new WeakMap,y=new WeakMap,i=new WeakMap,e=new WeakMap,E=new WeakSet,Xn=async function(B){var a,A;const at=t(this,C),W=at.isInPresentationMode||at.isChangingPresentationMode,{id:wt,siblings:Pt,command:D,value:n}=B;if(!wt){switch(D){case"clear":console.clear();break;case"error":console.error(n);break;case"layout":if(!W){const T=(0,u.apiPageLayoutToViewerModes)(n);at.spreadMode=T.spreadMode}break;case"page-num":at.currentPageNumber=n+1;break;case"print":await at.pagesPromise,t(this,g).dispatch("print",{source:this});break;case"println":console.log(n);break;case"zoom":W||(at.currentScaleValue=n);break;case"SaveAs":t(this,g).dispatch("download",{source:this});break;case"FirstPage":at.currentPageNumber=1;break;case"LastPage":at.currentPageNumber=at.pagesCount;break;case"NextPage":at.nextPage();break;case"PrevPage":at.previousPage();break;case"ZoomViewIn":W||at.increaseScale();break;case"ZoomViewOut":W||at.decreaseScale();break;case"WillPrintFinished":(a=t(this,e))==null||a.resolve(),Y(this,e,null);break}return}if(W&&B.focus)return;delete B.id,delete B.siblings;const d=Pt?[wt,...Pt]:[wt];for(const T of d){const N=document.querySelector(`[data-element-id="${T}"]`);N?N.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:B})):(A=t(this,S))==null||A.annotationStorage.setValue(T,B)}},o=new WeakSet,Xe=async function(B,at=!1){const W=t(this,S),wt=this._visitedPages;if(at&&Y(this,v,new s.PromiseCapability),!t(this,v))return;const Pt=t(this,C).getPageView(B-1);if((Pt==null?void 0:Pt.renderingState)!==u.RenderingStates.FINISHED){this._pageOpenPending.add(B);return}this._pageOpenPending.delete(B);const D=(async()=>{var d,a;const n=await(wt.has(B)?null:(d=Pt.pdfPage)==null?void 0:d.getJSActions());W===t(this,S)&&await((a=t(this,i))==null?void 0:a.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:B,actions:n}))})();wt.set(B,D)},w=new WeakSet,Xi=async function(B){var Pt;const at=t(this,S),W=this._visitedPages;if(!t(this,v)||this._pageOpenPending.has(B))return;const wt=W.get(B);wt&&(W.set(B,null),await wt,at===t(this,S)&&await((Pt=t(this,i))==null?void 0:Pt.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:B})))},Z=new WeakSet,qn=function(){if(Y(this,f,new s.PromiseCapability),t(this,i))throw new Error("#initScripting: Scripting already exists.");return t(this,h).createScripting({sandboxBundleSrc:t(this,y)})},$=new WeakSet,Te=async function(){var B,at,W;if(!t(this,i)){Y(this,S,null),(B=t(this,f))==null||B.resolve();return}t(this,v)&&(await Promise.race([t(this,v).promise,new Promise(wt=>{setTimeout(wt,1e3)})]).catch(()=>{}),Y(this,v,null)),Y(this,S,null);try{await t(this,i).destroySandbox()}catch{}(at=t(this,e))==null||at.reject(new Error("Scripting destroyed.")),Y(this,e,null);for(const[wt,Pt]of this._internalEvents)t(this,g)._off(wt,Pt);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),Y(this,i,null),Y(this,_,!1),(W=t(this,f))==null||W.resolve()},I.PDFScriptingManager=k},(H,I,x)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFSinglePageViewer=void 0;var u=x(2),s=x(25);class k extends s.PDFViewer{_resetView(){super._resetView(),this._scrollMode=u.ScrollMode.PAGE,this._spreadMode=u.SpreadMode.NONE}set scrollMode(f){}_updateScrollMode(){}set spreadMode(f){}_updateSpreadMode(){}}I.PDFSinglePageViewer=k},(H,I,x)=>{var y,i,e,qi,b,o,M,w,j,Z,P,$,K,G,B,at,W,wt,Pt,D,n,d,Yn,A,Kn,N,Qn,tt,Jn,ft,xe,et,qe,pt,Zn,Ft,Yi,ht,ts,J,oe,gt,Ki,Rt,es,Vt,is,zt,Qi,Xt,ns;Object.defineProperty(I,"__esModule",{value:!0}),I.PagesCountLimit=I.PDFViewer=I.PDFPageViewBuffer=void 0;var u=x(4),s=x(2),k=x(7),v=x(13),f=x(26),c=x(5);const g=10,h={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};I.PagesCountLimit=h;function S(At){return Object.values(u.AnnotationEditorType).includes(At)&&At!==u.AnnotationEditorType.DISABLE}class C{constructor(m){R(this,e);R(this,y,new Set);R(this,i,0);Y(this,i,m)}push(m){const L=t(this,y);L.has(m)&&L.delete(m),L.add(m),L.size>t(this,i)&&V(this,e,qi).call(this)}resize(m,L=null){Y(this,i,m);const ct=t(this,y);if(L){const st=ct.size;let dt=1;for(const _t of ct)if(L.has(_t.id)&&(ct.delete(_t),ct.add(_t)),++dt>st)break}for(;ct.size>t(this,i);)V(this,e,qi).call(this)}has(m){return t(this,y).has(m)}[Symbol.iterator](){return t(this,y).keys()}}y=new WeakMap,i=new WeakMap,e=new WeakSet,qi=function(){const m=t(this,y).keys().next().value;m==null||m.destroy(),t(this,y).delete(m)},I.PDFPageViewBuffer=C;class _{constructor(m){R(this,d);R(this,A);R(this,N);R(this,tt);R(this,ft);R(this,et);R(this,pt);R(this,Ft);R(this,ht);R(this,J);R(this,gt);R(this,Rt);R(this,Vt);R(this,zt);R(this,Xt);R(this,b,null);R(this,o,null);R(this,M,u.AnnotationEditorType.NONE);R(this,w,null);R(this,j,u.AnnotationMode.ENABLE_FORMS);R(this,Z,null);R(this,P,null);R(this,$,!1);R(this,K,!1);R(this,G,null);R(this,B,!1);R(this,at,0);R(this,W,new ResizeObserver(V(this,Xt,ns).bind(this)));R(this,wt,null);R(this,Pt,null);R(this,D,null);R(this,n,s.TextLayerMode.ENABLE);var ct,st;const L="3.11.174";if(u.version!==L)throw new Error(`The API version "${u.version}" does not match the Viewer version "${L}".`);if(this.container=m.container,this.viewer=m.viewer||m.container.firstElementChild,((ct=this.container)==null?void 0:ct.tagName)!=="DIV"||((st=this.viewer)==null?void 0:st.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");t(this,W).observe(this.container),this.eventBus=m.eventBus,this.linkService=m.linkService||new c.SimpleLinkService,this.downloadManager=m.downloadManager||null,this.findController=m.findController||null,Y(this,o,m.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=dt=>this._getVisiblePages().ids.has(dt)),this._scriptingManager=m.scriptingManager||null,Y(this,n,m.textLayerMode??s.TextLayerMode.ENABLE),Y(this,j,m.annotationMode??u.AnnotationMode.ENABLE_FORMS),Y(this,M,m.annotationEditorMode??u.AnnotationEditorType.NONE),this.imageResourcesPath=m.imageResourcesPath||"",this.enablePrintAutoRotate=m.enablePrintAutoRotate||!1,this.removePageBorders=m.removePageBorders||!1,m.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),m.maxCanvasPixels=0),this.isOffscreenCanvasSupported=m.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=m.maxCanvasPixels,this.l10n=m.l10n||k.NullL10n,Y(this,$,m.enablePermissions||!1),this.pageColors=m.pageColors||null,this.defaultRenderingQueue=!m.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new f.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=m.renderingQueue,this.scroll=(0,s.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=s.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),V(this,zt,Qi).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:dt,pdfPage:_t})=>{const U=this._pages[dt-1];t(this,b).has(U)||_t==null||_t.cleanup()})}get pagesCount(){return this._pages.length}getPageView(m){return this._pages[m]}getCachedPageViews(){return new Set(t(this,b))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(m=>m==null?void 0:m.pdfPage)}get renderForms(){return t(this,j)===u.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(m){if(!Number.isInteger(m))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(m,!0)||console.error(`currentPageNumber: "${m}" is not a valid page.`))}_setCurrentPageNumber(m,L=!1){var st;if(this._currentPageNumber===m)return L&&V(this,gt,Ki).call(this),!0;if(!(0<m&&m<=this.pagesCount))return!1;const ct=this._currentPageNumber;return this._currentPageNumber=m,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:m,pageLabel:((st=this._pageLabels)==null?void 0:st[m-1])??null,previous:ct}),L&&V(this,gt,Ki).call(this),!0}get currentPageLabel(){var m;return((m=this._pageLabels)==null?void 0:m[this._currentPageNumber-1])??null}set currentPageLabel(m){if(!this.pdfDocument)return;let L=m|0;if(this._pageLabels){const ct=this._pageLabels.indexOf(m);ct>=0&&(L=ct+1)}this._setCurrentPageNumber(L,!0)||console.error(`currentPageLabel: "${m}" is not a valid page.`)}get currentScale(){return this._currentScale!==s.UNKNOWN_SCALE?this._currentScale:s.DEFAULT_SCALE}set currentScale(m){if(isNaN(m))throw new Error("Invalid numeric scale.");this.pdfDocument&&V(this,J,oe).call(this,m,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(m){this.pdfDocument&&V(this,J,oe).call(this,m,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(m){if(!(0,s.isValidRotation)(m))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(m%=360,m<0&&(m+=360),this._pagesRotation===m))return;this._pagesRotation=m;const L=this._currentPageNumber;this.refresh(!0,{rotation:m}),this._currentScaleValue&&V(this,J,oe).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:m,pageNumber:L}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const m=[],L=[];for(let ct=1,st=this.pdfDocument.numPages;ct<=st;++ct){if(t(this,B))return null;L.length=0;const dt=await this.pdfDocument.getPage(ct),{items:_t}=await dt.getTextContent();for(const U of _t)U.str&&L.push(U.str),U.hasEOL&&L.push(`
`);m.push((0,s.removeNullCharacters)(L.join("")))}return m.join(`
`)}setDocument(m){var _t,U;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(_t=this.findController)==null||_t.setDocument(null),(U=this._scriptingManager)==null||U.setDocument(null),t(this,w)&&(t(this,w).destroy(),Y(this,w,null))),this.pdfDocument=m,!m)return;const L=m.numPages,ct=m.getPage(1),st=m.getOptionalContentConfig(),dt=t(this,$)?m.getPermissions():Promise.resolve();if(L>h.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ot=this._scrollMode=s.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ot})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:L})},()=>{}),this._onBeforeDraw=ot=>{const xt=this._pages[ot.pageNumber-1];xt&&t(this,b).push(xt)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ot=>{ot.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ot.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,t(this,Pt)&&(document.removeEventListener("visibilitychange",t(this,Pt)),Y(this,Pt,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([ct,dt]).then(([ot,xt])=>{var r,O;if(m!==this.pdfDocument)return;this._firstPageCapability.resolve(ot),this._optionalContentConfigPromise=st;const{annotationEditorMode:Et,annotationMode:Dt,textLayerMode:Ot}=V(this,A,Kn).call(this,xt);if(Ot!==s.TextLayerMode.DISABLE){const z=Y(this,G,document.createElement("div"));z.id="hiddenCopyElement",this.viewer.before(z)}if(Et!==u.AnnotationEditorType.DISABLE){const z=Et;m.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):S(z)?(Y(this,w,new u.AnnotationEditorUIManager(this.container,this.viewer,t(this,o),this.eventBus,m,this.pageColors)),z!==u.AnnotationEditorType.NONE&&t(this,w).updateMode(z)):console.error(`Invalid AnnotationEditor mode: ${z}`)}const Wt=V(this,d,Yn).bind(this),Ct=this._scrollMode===s.ScrollMode.PAGE?null:this.viewer,qt=this.currentScale,Ut=ot.getViewport({scale:qt*u.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Ut.scale),(((r=this.pageColors)==null?void 0:r.foreground)==="CanvasText"||((O=this.pageColors)==null?void 0:O.background)==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",m.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let z=1;z<=L;++z){const nt=new v.PDFPageView({container:Ct,eventBus:this.eventBus,id:z,scale:qt,defaultViewport:Ut.clone(),optionalContentConfigPromise:st,renderingQueue:this.renderingQueue,textLayerMode:Ot,annotationMode:Dt,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:Wt});this._pages.push(nt)}const q=this._pages[0];q&&(q.setPdfPage(ot),this.linkService.cachePageRef(1,ot.ref)),this._scrollMode===s.ScrollMode.PAGE?V(this,ft,xe).call(this):this._spreadMode!==s.SpreadMode.NONE&&this._updateSpreadMode(),V(this,N,Qn).call(this).then(async()=>{var nt,ut;if((nt=this.findController)==null||nt.setDocument(m),(ut=this._scriptingManager)==null||ut.setDocument(m),t(this,G)&&(Y(this,P,V(this,tt,Jn).bind(this,Ot)),document.addEventListener("copy",t(this,P))),t(this,w)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:t(this,M)}),m.loadingParams.disableAutoFetch||L>h.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let z=L-1;if(z<=0){this._pagesCapability.resolve();return}for(let vt=2;vt<=L;++vt){const kt=m.getPage(vt).then(Nt=>{const It=this._pages[vt-1];It.pdfPage||It.setPdfPage(Nt),this.linkService.cachePageRef(vt,Nt.ref),--z===0&&this._pagesCapability.resolve()},Nt=>{console.error(`Unable to get page ${vt} to initialize viewer`,Nt),--z===0&&this._pagesCapability.resolve()});vt%h.PAUSE_EAGER_PAGE_INIT===0&&await kt}}),this.eventBus.dispatch("pagesinit",{source:this}),m.getMetadata().then(({info:z})=>{m===this.pdfDocument&&z.Language&&(this.viewer.lang=z.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ot=>{console.error("Unable to initialize viewer",ot),this._pagesCapability.reject(ot)})}setPageLabels(m){var L;if(this.pdfDocument){m?Array.isArray(m)&&this.pdfDocument.numPages===m.length?this._pageLabels=m:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let ct=0,st=this._pages.length;ct<st;ct++)this._pages[ct].setPageLabel(((L=this._pageLabels)==null?void 0:L[ct])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=s.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,Y(this,b,new C(g)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new u.PromiseCapability,this._onePageRenderedCapability=new u.PromiseCapability,this._pagesCapability=new u.PromiseCapability,this._scrollMode=s.ScrollMode.VERTICAL,this._previousScrollMode=s.ScrollMode.UNKNOWN,this._spreadMode=s.SpreadMode.NONE,Y(this,wt,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),t(this,Pt)&&(document.removeEventListener("visibilitychange",t(this,Pt)),Y(this,Pt,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),t(this,G)&&(document.removeEventListener("copy",t(this,P)),Y(this,P,null),t(this,G).remove(),Y(this,G,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(m){if(!this._pageLabels)return null;const L=this._pageLabels.indexOf(m);return L<0?null:L+1}scrollPageIntoView({pageNumber:m,destArray:L=null,allowNegativeOffset:ct=!1,ignoreDestinationZoom:st=!1}){if(!this.pdfDocument)return;const dt=Number.isInteger(m)&&this._pages[m-1];if(!dt){console.error(`scrollPageIntoView: "${m}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!L){this._setCurrentPageNumber(m,!0);return}let _t=0,U=0,ot=0,xt=0,Et,Dt;const Ot=dt.rotation%180!==0,Wt=(Ot?dt.height:dt.width)/dt.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS,Ct=(Ot?dt.width:dt.height)/dt.scale/u.PixelsPerInch.PDF_TO_CSS_UNITS;let qt=0;switch(L[1].name){case"XYZ":_t=L[2],U=L[3],qt=L[4],_t=_t!==null?_t:0,U=U!==null?U:Ct;break;case"Fit":case"FitB":qt="page-fit";break;case"FitH":case"FitBH":U=L[2],qt="page-width",U===null&&this._location?(_t=this._location.left,U=this._location.top):(typeof U!="number"||U<0)&&(U=Ct);break;case"FitV":case"FitBV":_t=L[2],ot=Wt,xt=Ct,qt="page-height";break;case"FitR":_t=L[2],U=L[3],ot=L[4]-_t,xt=L[5]-U;let O=s.SCROLLBAR_PADDING,z=s.VERTICAL_PADDING;this.removePageBorders&&(O=z=0),Et=(this.container.clientWidth-O)/ot/u.PixelsPerInch.PDF_TO_CSS_UNITS,Dt=(this.container.clientHeight-z)/xt/u.PixelsPerInch.PDF_TO_CSS_UNITS,qt=Math.min(Math.abs(Et),Math.abs(Dt));break;default:console.error(`scrollPageIntoView: "${L[1].name}" is not a valid destination type.`);return}if(st||(qt&&qt!==this._currentScale?this.currentScaleValue=qt:this._currentScale===s.UNKNOWN_SCALE&&(this.currentScaleValue=s.DEFAULT_SCALE_VALUE)),qt==="page-fit"&&!L[4]){V(this,et,qe).call(this,dt);return}const Ut=[dt.viewport.convertToViewportPoint(_t,U),dt.viewport.convertToViewportPoint(_t+ot,U+xt)];let q=Math.min(Ut[0][0],Ut[1][0]),r=Math.min(Ut[0][1],Ut[1][1]);ct||(q=Math.max(q,0),r=Math.max(r,0)),V(this,et,qe).call(this,dt,{left:q,top:r})}_updateLocation(m){const L=this._currentScale,ct=this._currentScaleValue,st=parseFloat(ct)===L?Math.round(L*1e4)/100:ct,dt=m.id,_t=this._pages[dt-1],U=this.container,ot=_t.getPagePoint(U.scrollLeft-m.x,U.scrollTop-m.y),xt=Math.round(ot[0]),Et=Math.round(ot[1]);let Dt=`#page=${dt}`;this.isInPresentationMode||(Dt+=`&zoom=${st},${xt},${Et}`),this._location={pageNumber:dt,scale:st,top:Et,left:xt,rotation:this._pagesRotation,pdfOpenParams:Dt}}update(){const m=this._getVisiblePages(),L=m.views,ct=L.length;if(ct===0)return;const st=Math.max(g,2*ct+1);t(this,b).resize(st,m.ids),this.renderingQueue.renderHighestPriority(m);const dt=this._spreadMode===s.SpreadMode.NONE&&(this._scrollMode===s.ScrollMode.PAGE||this._scrollMode===s.ScrollMode.VERTICAL),_t=this._currentPageNumber;let U=!1;for(const ot of L){if(ot.percent<100)break;if(ot.id===_t&&dt){U=!0;break}}this._setCurrentPageNumber(U?_t:L[0].id),this._updateLocation(m.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(m){return this.container.contains(m)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===s.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===s.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const m=this._scrollMode===s.ScrollMode.PAGE?t(this,wt).pages:this._pages,L=this._scrollMode===s.ScrollMode.HORIZONTAL,ct=L&&this._isContainerRtl;return(0,s.getVisibleElements)({scrollEl:this.container,views:m,sortByVisibility:!0,horizontal:L,rtl:ct})}cleanup(){for(const m of this._pages)m.renderingState!==s.RenderingStates.FINISHED&&m.reset()}_cancelRendering(){for(const m of this._pages)m.cancelRendering()}forceRendering(m){const L=m||this._getVisiblePages(),ct=V(this,Vt,is).call(this,L),st=this._spreadMode!==s.SpreadMode.NONE&&this._scrollMode!==s.ScrollMode.HORIZONTAL,dt=this.renderingQueue.getHighestPriority(L,this._pages,ct,st);return dt?(V(this,Rt,es).call(this,dt).then(()=>{this.renderingQueue.renderView(dt)}),!0):!1}get hasEqualPageSizes(){const m=this._pages[0];for(let L=1,ct=this._pages.length;L<ct;++L){const st=this._pages[L];if(st.width!==m.width||st.height!==m.height)return!1}return!0}getPagesOverview(){let m;return this._pages.map(L=>{const ct=L.pdfPage.getViewport({scale:1}),st=(0,s.isPortraitOrientation)(ct);if(m===void 0)m=st;else if(this.enablePrintAutoRotate&&st!==m)return{width:ct.height,height:ct.width,rotation:(ct.rotation-90)%360};return{width:ct.width,height:ct.height,rotation:ct.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(m){if(!(m instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${m}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=m,this.refresh(!1,{optionalContentConfigPromise:m}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:m}))}get scrollMode(){return this._scrollMode}set scrollMode(m){if(this._scrollMode!==m){if(!(0,s.isValidScrollMode)(m))throw new Error(`Invalid scroll mode: ${m}`);this.pagesCount>h.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=m,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:m}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(m=null){const L=this._scrollMode,ct=this.viewer;ct.classList.toggle("scrollHorizontal",L===s.ScrollMode.HORIZONTAL),ct.classList.toggle("scrollWrapped",L===s.ScrollMode.WRAPPED),!(!this.pdfDocument||!m)&&(L===s.ScrollMode.PAGE?V(this,ft,xe).call(this):this._previousScrollMode===s.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&V(this,J,oe).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(m,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(m){if(this._spreadMode!==m){if(!(0,s.isValidSpreadMode)(m))throw new Error(`Invalid spread mode: ${m}`);this._spreadMode=m,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:m}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(m=null){if(!this.pdfDocument)return;const L=this.viewer,ct=this._pages;if(this._scrollMode===s.ScrollMode.PAGE)V(this,ft,xe).call(this);else if(L.textContent="",this._spreadMode===s.SpreadMode.NONE)for(const st of this._pages)L.append(st.div);else{const st=this._spreadMode-1;let dt=null;for(let _t=0,U=ct.length;_t<U;++_t)dt===null?(dt=document.createElement("div"),dt.className="spread",L.append(dt)):_t%2===st&&(dt=dt.cloneNode(!1),L.append(dt)),dt.append(ct[_t].div)}m&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&V(this,J,oe).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(m,!0),this.update())}_getPageAdvance(m,L=!1){switch(this._scrollMode){case s.ScrollMode.WRAPPED:{const{views:ct}=this._getVisiblePages(),st=new Map;for(const{id:dt,y:_t,percent:U,widthPercent:ot}of ct){if(U===0||ot<100)continue;let xt=st.get(_t);xt||st.set(_t,xt||(xt=[])),xt.push(dt)}for(const dt of st.values()){const _t=dt.indexOf(m);if(_t===-1)continue;const U=dt.length;if(U===1)break;if(L)for(let ot=_t-1,xt=0;ot>=xt;ot--){const Et=dt[ot],Dt=dt[ot+1]-1;if(Et<Dt)return m-Dt}else for(let ot=_t+1,xt=U;ot<xt;ot++){const Et=dt[ot],Dt=dt[ot-1]+1;if(Et>Dt)return Dt-m}if(L){const ot=dt[0];if(ot<m)return m-ot+1}else{const ot=dt[U-1];if(ot>m)return ot-m+1}break}break}case s.ScrollMode.HORIZONTAL:break;case s.ScrollMode.PAGE:case s.ScrollMode.VERTICAL:{if(this._spreadMode===s.SpreadMode.NONE)break;const ct=this._spreadMode-1;if(L&&m%2!==ct)break;if(!L&&m%2===ct)break;const{views:st}=this._getVisiblePages(),dt=L?m-1:m+1;for(const{id:_t,percent:U,widthPercent:ot}of st)if(_t===dt){if(U>0&&ot===100)return 2;break}break}}return 1}nextPage(){const m=this._currentPageNumber,L=this.pagesCount;if(m>=L)return!1;const ct=this._getPageAdvance(m,!1)||1;return this.currentPageNumber=Math.min(m+ct,L),!0}previousPage(){const m=this._currentPageNumber;if(m<=1)return!1;const L=this._getPageAdvance(m,!0)||1;return this.currentPageNumber=Math.max(m-L,1),!0}increaseScale({drawingDelay:m,scaleFactor:L,steps:ct}={}){if(!this.pdfDocument)return;let st=this._currentScale;if(L>1)st=Math.round(st*L*100)/100;else{ct??(ct=1);do st=Math.ceil((st*s.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--ct>0&&st<s.MAX_SCALE)}V(this,J,oe).call(this,Math.min(s.MAX_SCALE,st),{noScroll:!1,drawingDelay:m})}decreaseScale({drawingDelay:m,scaleFactor:L,steps:ct}={}){if(!this.pdfDocument)return;let st=this._currentScale;if(L>0&&L<1)st=Math.round(st*L*100)/100;else{ct??(ct=1);do st=Math.floor((st/s.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--ct>0&&st>s.MIN_SCALE)}V(this,J,oe).call(this,Math.max(s.MIN_SCALE,st),{noScroll:!1,drawingDelay:m})}get containerTopLeft(){return t(this,Z)||Y(this,Z,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return t(this,w)?t(this,M):u.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:m,editId:L=null}){if(!t(this,w))throw new Error("The AnnotationEditor is not enabled.");if(t(this,M)!==m){if(!S(m))throw new Error(`Invalid AnnotationEditor mode: ${m}`);this.pdfDocument&&(Y(this,M,m),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:m}),t(this,w).updateMode(m,L))}}set annotationEditorParams({type:m,value:L}){if(!t(this,w))throw new Error("The AnnotationEditor is not enabled.");t(this,w).updateParams(m,L)}refresh(m=!1,L=Object.create(null)){if(this.pdfDocument){for(const ct of this._pages)ct.update(L);t(this,D)!==null&&(clearTimeout(t(this,D)),Y(this,D,null)),m||this.update()}}}b=new WeakMap,o=new WeakMap,M=new WeakMap,w=new WeakMap,j=new WeakMap,Z=new WeakMap,P=new WeakMap,$=new WeakMap,K=new WeakMap,G=new WeakMap,B=new WeakMap,at=new WeakMap,W=new WeakMap,wt=new WeakMap,Pt=new WeakMap,D=new WeakMap,n=new WeakMap,d=new WeakSet,Yn=function(){const m=this;return{get annotationEditorUIManager(){return t(m,w)},get annotationStorage(){var L;return(L=m.pdfDocument)==null?void 0:L.annotationStorage},get downloadManager(){return m.downloadManager},get enableScripting(){return!!m._scriptingManager},get fieldObjectsPromise(){var L;return(L=m.pdfDocument)==null?void 0:L.getFieldObjects()},get findController(){return m.findController},get hasJSActionsPromise(){var L;return(L=m.pdfDocument)==null?void 0:L.hasJSActions()},get linkService(){return m.linkService}}},A=new WeakSet,Kn=function(m){const L={annotationEditorMode:t(this,M),annotationMode:t(this,j),textLayerMode:t(this,n)};return m&&(!m.includes(u.PermissionFlag.COPY)&&t(this,n)===s.TextLayerMode.ENABLE&&(L.textLayerMode=s.TextLayerMode.ENABLE_PERMISSIONS),m.includes(u.PermissionFlag.MODIFY_CONTENTS)||(L.annotationEditorMode=u.AnnotationEditorType.DISABLE),!m.includes(u.PermissionFlag.MODIFY_ANNOTATIONS)&&!m.includes(u.PermissionFlag.FILL_INTERACTIVE_FORMS)&&t(this,j)===u.AnnotationMode.ENABLE_FORMS&&(L.annotationMode=u.AnnotationMode.ENABLE)),L},N=new WeakSet,Qn=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const m=new Promise(L=>{Y(this,Pt,()=>{document.visibilityState==="hidden"&&(L(),document.removeEventListener("visibilitychange",t(this,Pt)),Y(this,Pt,null))}),document.addEventListener("visibilitychange",t(this,Pt))});return Promise.race([this._onePageRenderedCapability.promise,m])},tt=new WeakSet,Jn=function(m,L){const ct=document.getSelection(),{focusNode:st,anchorNode:dt}=ct;if(dt&&st&&ct.containsNode(t(this,G))){if(t(this,K)||m===s.TextLayerMode.ENABLE_PERMISSIONS){L.preventDefault(),L.stopPropagation();return}Y(this,K,!0);const _t=this.container.style.cursor;this.container.style.cursor="wait";const U=ot=>Y(this,B,ot.key==="Escape");window.addEventListener("keydown",U),this.getAllText().then(async ot=>{ot!==null&&await navigator.clipboard.writeText(ot)}).catch(ot=>{console.warn(`Something goes wrong when extracting the text: ${ot.message}`)}).finally(()=>{Y(this,K,!1),Y(this,B,!1),window.removeEventListener("keydown",U),this.container.style.cursor=_t}),L.preventDefault(),L.stopPropagation()}},ft=new WeakSet,xe=function(){if(this._scrollMode!==s.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const m=this._currentPageNumber,L=t(this,wt),ct=this.viewer;if(ct.textContent="",L.pages.length=0,this._spreadMode===s.SpreadMode.NONE&&!this.isInPresentationMode){const st=this._pages[m-1];ct.append(st.div),L.pages.push(st)}else{const st=new Set,dt=this._spreadMode-1;dt===-1?st.add(m-1):m%2!==dt?(st.add(m-1),st.add(m)):(st.add(m-2),st.add(m-1));const _t=document.createElement("div");if(_t.className="spread",this.isInPresentationMode){const U=document.createElement("div");U.className="dummyPage",_t.append(U)}for(const U of st){const ot=this._pages[U];ot&&(_t.append(ot.div),L.pages.push(ot))}ct.append(_t)}L.scrollDown=m>=L.previousPageNumber,L.previousPageNumber=m},et=new WeakSet,qe=function(m,L=null){const{div:ct,id:st}=m;if(this._currentPageNumber!==st&&this._setCurrentPageNumber(st),this._scrollMode===s.ScrollMode.PAGE&&(V(this,ft,xe).call(this),this.update()),!L&&!this.isInPresentationMode){const dt=ct.offsetLeft+ct.clientLeft,_t=dt+ct.clientWidth,{scrollLeft:U,clientWidth:ot}=this.container;(this._scrollMode===s.ScrollMode.HORIZONTAL||dt<U||_t>U+ot)&&(L={left:0,top:0})}(0,s.scrollIntoView)(ct,L),!this._currentScaleValue&&this._location&&(this._location=null)},pt=new WeakSet,Zn=function(m){return m===this._currentScale||Math.abs(m-this._currentScale)<1e-15},Ft=new WeakSet,Yi=function(m,L,{noScroll:ct=!1,preset:st=!1,drawingDelay:dt=-1}){if(this._currentScaleValue=L.toString(),V(this,pt,Zn).call(this,m)){st&&this.eventBus.dispatch("scalechanging",{source:this,scale:m,presetValue:L});return}this.viewer.style.setProperty("--scale-factor",m*u.PixelsPerInch.PDF_TO_CSS_UNITS);const _t=dt>=0&&dt<1e3;if(this.refresh(!0,{scale:m,drawingDelay:_t?dt:-1}),_t&&Y(this,D,setTimeout(()=>{Y(this,D,null),this.refresh()},dt)),this._currentScale=m,!ct){let U=this._currentPageNumber,ot;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(U=this._location.pageNumber,ot=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:U,destArray:ot,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:m,presetValue:st?L:void 0}),this.defaultRenderingQueue&&this.update()},ht=new WeakSet,ts=function(){return this._spreadMode!==s.SpreadMode.NONE&&this._scrollMode!==s.ScrollMode.HORIZONTAL?2:1},J=new WeakSet,oe=function(m,L){let ct=parseFloat(m);if(ct>0)L.preset=!1,V(this,Ft,Yi).call(this,ct,m,L);else{const st=this._pages[this._currentPageNumber-1];if(!st)return;let dt=s.SCROLLBAR_PADDING,_t=s.VERTICAL_PADDING;this.isInPresentationMode?(dt=_t=4,this._spreadMode!==s.SpreadMode.NONE&&(dt*=2)):this.removePageBorders?dt=_t=0:this._scrollMode===s.ScrollMode.HORIZONTAL&&([dt,_t]=[_t,dt]);const U=(this.container.clientWidth-dt)/st.width*st.scale/t(this,ht,ts),ot=(this.container.clientHeight-_t)/st.height*st.scale;switch(m){case"page-actual":ct=1;break;case"page-width":ct=U;break;case"page-height":ct=ot;break;case"page-fit":ct=Math.min(U,ot);break;case"auto":const xt=(0,s.isPortraitOrientation)(st)?U:Math.min(ot,U);ct=Math.min(s.MAX_AUTO_SCALE,xt);break;default:console.error(`#setScale: "${m}" is an unknown zoom value.`);return}L.preset=!0,V(this,Ft,Yi).call(this,ct,m,L)}},gt=new WeakSet,Ki=function(){const m=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&V(this,J,oe).call(this,this._currentScaleValue,{noScroll:!0}),V(this,et,qe).call(this,m)},Rt=new WeakSet,es=async function(m){var L,ct;if(m.pdfPage)return m.pdfPage;try{const st=await this.pdfDocument.getPage(m.id);return m.pdfPage||m.setPdfPage(st),(ct=(L=this.linkService)._cachedPageNumber)!=null&&ct.call(L,st.ref)||this.linkService.cachePageRef(m.id,st.ref),st}catch(st){return console.error("Unable to get page for page view",st),null}},Vt=new WeakSet,is=function(m){var L,ct;if(((L=m.first)==null?void 0:L.id)===1)return!0;if(((ct=m.last)==null?void 0:ct.id)===this.pagesCount)return!1;switch(this._scrollMode){case s.ScrollMode.PAGE:return t(this,wt).scrollDown;case s.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},zt=new WeakSet,Qi=function(m=this.container.clientHeight){m!==t(this,at)&&(Y(this,at,m),s.docStyle.setProperty("--viewer-container-height",`${m}px`))},Xt=new WeakSet,ns=function(m){for(const L of m)if(L.target===this.container){V(this,zt,Qi).call(this,Math.floor(L.borderBoxSize[0].blockSize)),Y(this,Z,null);break}},I.PDFViewer=_},(H,I,x)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFRenderingQueue=void 0;var u=x(4),s=x(2);const k=3e4;class v{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(c){this.pdfViewer=c}setThumbnailViewer(c){this.pdfThumbnailViewer=c}isHighestPriority(c){return this.highestPriorityPage===c.renderingId}renderHighestPriority(c){var g;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(c)&&(this.isThumbnailViewEnabled&&((g=this.pdfThumbnailViewer)!=null&&g.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),k)))}getHighestPriority(c,g,h,S=!1){const C=c.views,_=C.length;if(_===0)return null;for(let b=0;b<_;b++){const o=C[b].view;if(!this.isViewFinished(o))return o}const y=c.first.id,i=c.last.id;if(i-y+1>_){const b=c.ids;for(let o=1,M=i-y;o<M;o++){const w=h?y+o:i-o;if(b.has(w))continue;const j=g[w-1];if(!this.isViewFinished(j))return j}}let e=h?i:y-2,E=g[e];return E&&!this.isViewFinished(E)||S&&(e+=h?1:-1,E=g[e],E&&!this.isViewFinished(E))?E:null}isViewFinished(c){return c.renderingState===s.RenderingStates.FINISHED}renderView(c){switch(c.renderingState){case s.RenderingStates.FINISHED:return!1;case s.RenderingStates.PAUSED:this.highestPriorityPage=c.renderingId,c.resume();break;case s.RenderingStates.RUNNING:this.highestPriorityPage=c.renderingId;break;case s.RenderingStates.INITIAL:this.highestPriorityPage=c.renderingId,c.draw().finally(()=>{this.renderHighestPriority()}).catch(g=>{g instanceof u.RenderingCancelledException||console.error(`renderView: "${g}"`)});break}return!0}}I.PDFRenderingQueue=v}],p={};function F(H){var I=p[H];if(I!==void 0)return I.exports;var x=p[H]={exports:{}};return it[H](x,x.exports,F),x.exports}var lt={};return(()=>{var H=lt;Object.defineProperty(H,"__esModule",{value:!0}),Object.defineProperty(H,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return s.AnnotationLayerBuilder}}),Object.defineProperty(H,"DownloadManager",{enumerable:!0,get:function(){return k.DownloadManager}}),Object.defineProperty(H,"EventBus",{enumerable:!0,get:function(){return v.EventBus}}),Object.defineProperty(H,"FindState",{enumerable:!0,get:function(){return I.FindState}}),Object.defineProperty(H,"GenericL10n",{enumerable:!0,get:function(){return f.GenericL10n}}),Object.defineProperty(H,"LinkTarget",{enumerable:!0,get:function(){return x.LinkTarget}}),Object.defineProperty(H,"NullL10n",{enumerable:!0,get:function(){return c.NullL10n}}),Object.defineProperty(H,"PDFFindController",{enumerable:!0,get:function(){return I.PDFFindController}}),Object.defineProperty(H,"PDFHistory",{enumerable:!0,get:function(){return g.PDFHistory}}),Object.defineProperty(H,"PDFLinkService",{enumerable:!0,get:function(){return x.PDFLinkService}}),Object.defineProperty(H,"PDFPageView",{enumerable:!0,get:function(){return h.PDFPageView}}),Object.defineProperty(H,"PDFScriptingManager",{enumerable:!0,get:function(){return S.PDFScriptingManager}}),Object.defineProperty(H,"PDFSinglePageViewer",{enumerable:!0,get:function(){return C.PDFSinglePageViewer}}),Object.defineProperty(H,"PDFViewer",{enumerable:!0,get:function(){return _.PDFViewer}}),Object.defineProperty(H,"ProgressBar",{enumerable:!0,get:function(){return u.ProgressBar}}),Object.defineProperty(H,"RenderingStates",{enumerable:!0,get:function(){return u.RenderingStates}}),Object.defineProperty(H,"ScrollMode",{enumerable:!0,get:function(){return u.ScrollMode}}),Object.defineProperty(H,"SimpleLinkService",{enumerable:!0,get:function(){return x.SimpleLinkService}}),Object.defineProperty(H,"SpreadMode",{enumerable:!0,get:function(){return u.SpreadMode}}),Object.defineProperty(H,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return y.StructTreeLayerBuilder}}),Object.defineProperty(H,"TextLayerBuilder",{enumerable:!0,get:function(){return i.TextLayerBuilder}}),Object.defineProperty(H,"XfaLayerBuilder",{enumerable:!0,get:function(){return e.XfaLayerBuilder}}),Object.defineProperty(H,"parseQueryString",{enumerable:!0,get:function(){return u.parseQueryString}});var I=F(1),x=F(5),u=F(2),s=F(6),k=F(8),v=F(9),f=F(10),c=F(7),g=F(12),h=F(13),S=F(21),C=F(24),_=F(25),y=F(16),i=F(19),e=F(20)})(),lt})())})(pdf_viewer);var pdf_viewerExports=pdf_viewer.exports;function create_fragment$7(yt){let l,it,p,F,lt,H,I,x,u,s;return{c(){l=svg_element("svg"),it=svg_element("path"),p=svg_element("path"),F=svg_element("path"),lt=svg_element("circle"),H=svg_element("path"),I=svg_element("path"),x=svg_element("path"),u=svg_element("path"),s=svg_element("path"),this.h()},l(k){l=claim_svg_element(k,"svg",{xmlns:!0,width:!0,viewBox:!0,class:!0});var v=children(l);it=claim_svg_element(v,"path",{fill:!0,d:!0}),children(it).forEach(detach),p=claim_svg_element(v,"path",{fill:!0,d:!0}),children(p).forEach(detach),F=claim_svg_element(v,"path",{fill:!0,d:!0}),children(F).forEach(detach),lt=claim_svg_element(v,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),children(lt).forEach(detach),H=claim_svg_element(v,"path",{fill:!0,d:!0}),children(H).forEach(detach),I=claim_svg_element(v,"path",{fill:!0,d:!0}),children(I).forEach(detach),x=claim_svg_element(v,"path",{fill:!0,d:!0}),children(x).forEach(detach),u=claim_svg_element(v,"path",{fill:!0,d:!0}),children(u).forEach(detach),s=claim_svg_element(v,"path",{fill:!0,d:!0}),children(s).forEach(detach),v.forEach(detach),this.h()},h(){attr(it,"fill","#424242"),attr(it,"d","M9 11h30v3H9z"),attr(p,"fill","#616161"),attr(p,"d","M4 25h40v-7c0-2.2-1.8-4-4-4H8c-2.2 0-4 1.8-4 4z"),attr(F,"fill","#424242"),attr(F,"d","M8 36h32c2.2 0 4-1.8 4-4v-8H4v8c0 2.2 1.8 4 4 4"),attr(lt,"cx","40"),attr(lt,"cy","18"),attr(lt,"r","1"),attr(lt,"fill","#00e676"),attr(H,"fill","#90caf9"),attr(H,"d","M11 4h26v10H11z"),attr(I,"fill","#242424"),attr(I,"d","M37.5 31h-27c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h27c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5"),attr(x,"fill","#90caf9"),attr(x,"d","M11 31h26v11H11z"),attr(u,"fill","#42a5f5"),attr(u,"d","M11 29h26v2H11z"),attr(s,"fill","#1976d2"),attr(s,"d","M16 33h17v2H16zm0 4h13v2H16z"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"width","30"),attr(l,"viewBox","0 0 48 48"),attr(l,"class","svelte-1gefud1")},m(k,v){insert_hydration(k,l,v),append_hydration(l,it),append_hydration(l,p),append_hydration(l,F),append_hydration(l,lt),append_hydration(l,H),append_hydration(l,I),append_hydration(l,x),append_hydration(l,u),append_hydration(l,s)},p:noop,i:noop,o:noop,d(k){k&&detach(l)}}}class Print extends SvelteComponent{constructor(l){super(),init(this,l,null,create_fragment$7,safe_not_equal,{})}}function create_fragment$6(yt){let l,it,p,F;return{c(){l=svg_element("svg"),it=svg_element("g"),p=svg_element("path"),F=svg_element("path"),this.h()},l(lt){l=claim_svg_element(lt,"svg",{xmlns:!0,width:!0,viewBox:!0,class:!0});var H=children(l);it=claim_svg_element(H,"g",{fill:!0});var I=children(it);p=claim_svg_element(I,"path",{d:!0}),children(p).forEach(detach),F=claim_svg_element(I,"path",{d:!0}),children(F).forEach(detach),I.forEach(detach),H.forEach(detach),this.h()},h(){attr(p,"d","M24 37.1L13 24h22zM20 4h8v4h-8zm0 6h8v4h-8z"),attr(F,"d","M20 16h8v11h-8zM6 40h36v4H6z"),attr(it,"fill","#1565c0"),attr(l,"xmlns","http://www.w3.org/2000/svg"),attr(l,"width","30"),attr(l,"viewBox","0 0 48 48"),attr(l,"class","svelte-1gefud1")},m(lt,H){insert_hydration(lt,l,H),append_hydration(l,it),append_hydration(it,p),append_hydration(it,F)},p:noop,i:noop,o:noop,d(lt){lt&&detach(l)}}}class Download extends SvelteComponent{constructor(l){super(),init(this,l,null,create_fragment$6,safe_not_equal,{})}}function create_fragment$5(yt){let l,it,p,F,lt,H,I,x,u,s,k,v='<div id="viewer" class="pdfViewer"></div>',f,c,g;return F=new Print({}),x=new Download({}),{c(){l=element("div"),it=element("div"),p=element("button"),create_component(F.$$.fragment),lt=text(" Print"),H=space(),I=element("a"),create_component(x.$$.fragment),u=text(" Download"),s=space(),k=element("div"),k.innerHTML=v,this.h()},l(h){l=claim_element(h,"DIV",{class:!0});var S=children(l);it=claim_element(S,"DIV",{class:!0});var C=children(it);p=claim_element(C,"BUTTON",{class:!0});var _=children(p);claim_component(F.$$.fragment,_),lt=claim_text(_," Print"),_.forEach(detach),H=claim_space(C),I=claim_element(C,"A",{href:!0,download:!0});var y=children(I);claim_component(x.$$.fragment,y),u=claim_text(y," Download"),y.forEach(detach),C.forEach(detach),s=claim_space(S),k=claim_element(S,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),get_svelte_dataset(k)!=="svelte-1tqat9n"&&(k.innerHTML=v),S.forEach(detach),this.h()},h(){attr(p,"class","mr-2"),attr(I,"href",yt[0]),attr(I,"download",""),attr(it,"class","mb-[20px] font-mtavruli text-[18px]"),attr(k,"id","viewerContainer"),attr(k,"class","w-full max-md:h-screen max-md:w-[calc(100vw-20px)] svelte-snqjnk"),attr(l,"class","container svelte-snqjnk")},m(h,S){insert_hydration(h,l,S),append_hydration(l,it),append_hydration(it,p),mount_component(F,p,null),append_hydration(p,lt),append_hydration(it,H),append_hydration(it,I),mount_component(x,I,null),append_hydration(I,u),append_hydration(l,s),append_hydration(l,k),yt[3](k),f=!0,c||(g=listen(p,"click",yt[2]),c=!0)},p(h,[S]){(!f||S&1)&&attr(I,"href",h[0])},i(h){f||(transition_in(F.$$.fragment,h),transition_in(x.$$.fragment,h),f=!0)},o(h){transition_out(F.$$.fragment,h),transition_out(x.$$.fragment,h),f=!1},d(h){h&&detach(l),destroy_component(F),destroy_component(x),yt[3](null),c=!1,g()}}}const SANDBOX_BUNDLE_SRC="pdfjs-dist/build/pdf.sandbox.js";function instance$1(yt,l,it){let{url:p}=l;pdfExports.GlobalWorkerOptions.workerSrc=`${base}/pdf.worker.js`;let F,lt,H,I,x;async function u(v){var _;if(!v)return;let f=axios.get(p,{responseType:"arraybuffer"}).then(y=>y.data);globalThis.eventBus=lt=new pdf_viewerExports.EventBus;const c=new pdf_viewerExports.PDFLinkService({eventBus:lt}),g=new pdf_viewerExports.PDFFindController({eventBus:lt,linkService:c}),h=new pdf_viewerExports.PDFScriptingManager({eventBus:lt,sandboxBundleSrc:SANDBOX_BUNDLE_SRC});H=new pdf_viewerExports.PDFViewer({container:v,eventBus:lt,linkService:c,findController:g,scriptingManager:h,l10n:null,maxCanvasPixels:-1,annotationMode:pdfExports.AnnotationMode.DISABLE}),c.setViewer(H),h.setViewer(H),x=await pdfExports.getDocument({data:await f,disableRange:!0,disableStream:!0,disableAutoFetch:!0}).promise,H.setDocument(x),c.setDocument(x,null);let S=await((_=H.pdfDocument)==null?void 0:_.getPage(1));I=S.getViewport({scale:1});let C=v.clientWidth/I.width;window.addEventListener("resize",()=>{C=v.clientWidth/I.width,H.currentScale=C/1.5}),H.currentScale=C/1.5,await S.getTextContent()}function s(){let v=document.createElement("iframe");F.appendChild(v),v.onload=function(){var c;(c=v.contentWindow)==null||c.print();let f=function(){v.remove(),window.removeEventListener("focus",f)};window.addEventListener("focus",f)},v.hidden=!0,v.src=p}function k(v){binding_callbacks[v?"unshift":"push"](()=>{F=v,it(1,F)})}return yt.$$set=v=>{"url"in v&&it(0,p=v.url)},yt.$$.update=()=>{yt.$$.dirty&2&&u(F)},[p,F,s,k]}class PdfViewer extends SvelteComponent{constructor(l){super(),init(this,l,instance$1,create_fragment$5,safe_not_equal,{url:0})}}function create_fragment$4(yt){let l,it;return l=new PdfViewer({props:{url:"/tsmu/pdf2.pdf"}}),{c(){create_component(l.$$.fragment)},l(p){claim_component(l.$$.fragment,p)},m(p,F){mount_component(l,p,F),it=!0},p:noop,i(p){it||(transition_in(l.$$.fragment,p),it=!0)},o(p){transition_out(l.$$.fragment,p),it=!1},d(p){destroy_component(l,p)}}}class Pdf extends SvelteComponent{constructor(l){super(),init(this,l,null,create_fragment$4,safe_not_equal,{})}}function create_fragment$3(yt){let l,it=`<div style="text-align: unset;float: unset; margin: unset;padding-right: 10px;"><img class="max-w-full" src="/tsmu/storage/images/original/58398251841a104a0185.avif" style="width: 100%; height: 100%"/></div> <p></p> <h1>დეკანის გზავნილი</h1> <p></p> <p></p> <p><strong><span style="color: rgb(8, 82, 148); font-size: 18px">ძვირფასო მეგობრებო,</span><br/></strong></p> <p style="text-align: justify">თქვენ შესაძლებლობა გაქვთ, გაეცნოთ თბილისის სახელმწიფო სამედიცინო უნივერსიტეტის მედიცინის
		ფაკულტეტის ვებ-გვერდს.</p> <p style="text-align: justify">მაქვს პატივი, როგორც ფაკულტეტის დეკანს, შემოგთავაზოთ ფართო ინფორმაცია ჩვენი ფაკულტეტის შესახებ.</p> <p style="text-align: justify">გვესმის, რომ ჯანდაცვის თანამედროვე გამოწვევები ჩვენგან მეტ შემოქმედებითობას და ინტერდისციპლინური
		პრობლემების გადაწყვეტას მოითხოვს. ჩვენი უმთავრესი ამოცანაა – მოვამზადოთ კომპეტენტური და
		სრულფასოვანი ექიმები, ამასთანავე ჭეშმარიტების მაძიებელი მკვლევარები. ჩვენი ფაკულტეტი გულმოდგინედ
		არჩევს აპლიკანტებს და ხელს უწყობს მათი ინტელექტური შესაძლებლობების, პიროვნული თვისებების და
		მოტივაციის მაქსიმალურად გამოვლენაა როგორც დიპლომამდელი, ასევე დიპლომისშემდგომი განათლებისა და
		მთელი შემდგომი პროფესიული კარიერის განმავლობაში.</p> <p style="text-align: justify">ჩვენ დიდად ვაფასებთ და ვითვალისწინებთ მომავალ ექიმთა გულწრფელ სურვილს, დაავადებების პრევენციითა
		და მკურნალობით გააუმჯობესონ ადამიანთა ცხოვრების ხარისხი. ჩვენი სტუდენტები, ასევე, აფასებენ
		ფაკულტეტზე არსებულ კოლეგიალურ ატმოსფეროს, რაც ხელს უწყობს მაღალკვალიფიციური განათლების მიღებას
		და პროფესიული უნარების ჩამოყალიბება-განვითარებას.</p> <p style="text-align: justify">გაეცანით ჩვენს ვებ-გვერდს და სურვილის შემთხვევაში, დაგვიკავშირდით დამატებითი ინფორმაციის
		მისაღებად.</p> <p style="text-align: justify">თუ ჩვენთან სწავლას გადაწყვეტთ, დარწმუნდებით, რომ ეს თქვენს მიერ გაკეთებული საუკეთესო არჩევანი
		იქნება.</p> <p style="text-align: justify">ვიმედოვნებთ, რომ ერთიანი ძალისხმევით ჩვენ 21–ე საუკუნეში გავაუმჯობესებთ ჯანდაცვის სისტემას.</p> <p> </p> <p style="text-align: right"><strong><em><span style="color: rgb(8, 82, 148); font-size: 18px">პატივისცემით,<br/>ფაკულტეტის დეკანი</span></em></strong></p> <p style="text-align: right"><strong><em><span style="color: rgb(8, 82, 148); font-size: 18px">პროფესორი თინათინ ტყემალაძე</span></em></strong></p> <p><br/></p>`;return{c(){l=element("div"),l.innerHTML=it,this.h()},l(p){l=claim_element(p,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(l)!=="svelte-1p0g7ue"&&(l.innerHTML=it),this.h()},h(){attr(l,"class","w-full max-w-[1000px]")},m(p,F){insert_hydration(p,l,F)},p:noop,i:noop,o:noop,d(p){p&&detach(l)}}}class Dekani extends SvelteComponent{constructor(l){super(),init(this,l,null,create_fragment$3,safe_not_equal,{})}}function create_fragment$2(yt){let l,it='<p>პარასიმპატიკური ბიჭები და სიმპატიკური გოგოები</p> <video src="/tsmu/grad.mp4" controls="" class="my-[30px] max-w-full"></video> <p class="my-[30px]">პარასიმპატიკური გოგოები და სიმპატიკური ბიჭები</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/wibs4T1pGHA?si=anhAdjU5cn0WwD_A" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>';return{c(){l=element("div"),l.innerHTML=it,this.h()},l(p){l=claim_element(p,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(l)!=="svelte-aau8mb"&&(l.innerHTML=it),this.h()},h(){attr(l,"class","flex flex-col justify-center")},m(p,F){insert_hydration(p,l,F)},p:noop,i:noop,o:noop,d(p){p&&detach(l)}}}class Grad extends SvelteComponent{constructor(l){super(),init(this,l,null,create_fragment$2,safe_not_equal,{})}}function get_each_context(yt,l,it){const p=yt.slice();return p[9]=l[it],p}function create_else_block(yt){let l,it=yt[9]+"",p,F,lt,H;function I(){return yt[6](yt[9])}return{c(){l=element("p"),p=text(it),F=space(),this.h()},l(x){l=claim_element(x,"P",{class:!0});var u=children(l);p=claim_text(u,it),F=claim_space(u),u.forEach(detach),this.h()},h(){attr(l,"class","tab hover:bg-[#c9f7fd] svelte-1ryb5tj")},m(x,u){insert_hydration(x,l,u),append_hydration(l,p),append_hydration(l,F),lt||(H=listen(l,"click",I),lt=!0)},p(x,u){yt=x},d(x){x&&detach(l),lt=!1,H()}}}function create_if_block_1(yt){let l,it,p=yt[9]+"",F,lt,H,I;return{c(){l=element("div"),it=element("p"),F=text(p),lt=space(),this.h()},l(x){l=claim_element(x,"DIV",{class:!0});var u=children(l);it=claim_element(u,"P",{class:!0});var s=children(it);F=claim_text(s,p),s.forEach(detach),lt=claim_space(u),u.forEach(detach),this.h()},h(){attr(it,"class","tab svelte-1ryb5tj"),attr(l,"class","active min-h-[45px] rounded-md svelte-1ryb5tj")},m(x,u){insert_hydration(x,l,u),append_hydration(l,it),append_hydration(it,F),yt[5](it),append_hydration(l,lt),H||(I=action_destroyer(setTop.call(null,it)),H=!0)},p:noop,d(x){x&&detach(l),yt[5](null),H=!1,I()}}}function create_each_block(yt){let l;function it(lt,H){return lt[9]==lt[3]?create_if_block_1:create_else_block}let p=it(yt),F=p(yt);return{c(){F.c(),l=empty()},l(lt){F.l(lt),l=empty()},m(lt,H){F.m(lt,H),insert_hydration(lt,l,H)},p(lt,H){p===(p=it(lt))&&F?F.p(lt,H):(F.d(1),F=p(lt),F&&(F.c(),F.m(l.parentNode,l)))},d(lt){lt&&detach(l),F.d(lt)}}}function create_if_block(yt){let l,it,p;var F=yt[4][yt[3]];function lt(H,I){return{}}return F&&(l=construct_svelte_component(F,lt())),{c(){l&&create_component(l.$$.fragment),it=empty()},l(H){l&&claim_component(l.$$.fragment,H),it=empty()},m(H,I){l&&mount_component(l,H,I),insert_hydration(H,it,I),p=!0},p(H,I){if(I&8&&F!==(F=H[4][H[3]])){if(l){group_outros();const x=l;transition_out(x.$$.fragment,1,0,()=>{destroy_component(x,1)}),check_outros()}F?(l=construct_svelte_component(F,lt()),create_component(l.$$.fragment),transition_in(l.$$.fragment,1),mount_component(l,it.parentNode,it)):l=null}},i(H){p||(l&&transition_in(l.$$.fragment,H),p=!0)},o(H){l&&transition_out(l.$$.fragment,H),p=!1},d(H){H&&detach(it),l&&destroy_component(l,H)}}}function create_fragment$1(yt){let l,it,p,F,lt,H,I,x,u;p=new Menu({props:{v2:!0}});let s=ensure_array_like(Object.keys(yt[4])),k=[];for(let f=0;f<s.length;f+=1)k[f]=create_each_block(get_each_context(yt,s,f));let v=yt[4][yt[3]]&&create_if_block(yt);return{c(){l=element("div"),it=space(),create_component(p.$$.fragment),F=space(),lt=element("div"),H=element("div");for(let f=0;f<k.length;f+=1)k[f].c();I=space(),x=element("div"),v&&v.c(),this.h()},l(f){l=claim_element(f,"DIV",{class:!0}),children(l).forEach(detach),it=claim_space(f),claim_component(p.$$.fragment,f),F=claim_space(f),lt=claim_element(f,"DIV",{class:!0});var c=children(lt);H=claim_element(c,"DIV",{class:!0});var g=children(H);for(let S=0;S<k.length;S+=1)k[S].l(g);g.forEach(detach),I=claim_space(c),x=claim_element(c,"DIV",{id:!0,class:!0});var h=children(x);v&&v.l(h),h.forEach(detach),c.forEach(detach),this.h()},h(){attr(l,"class","fixed left-0 top-0 h-[80px] w-full bg-primary"),attr(H,"class","tabs md:max-w-[300px] svelte-1ryb5tj"),attr(x,"id","content"),attr(x,"class","content flex w-full flex-grow justify-center"),attr(lt,"class","flex justify-center gap-[50px] p-[20px] pt-[100px] max-md:flex-col max-md:items-center")},m(f,c){insert_hydration(f,l,c),insert_hydration(f,it,c),mount_component(p,f,c),insert_hydration(f,F,c),insert_hydration(f,lt,c),append_hydration(lt,H);for(let g=0;g<k.length;g+=1)k[g]&&k[g].m(H,null);yt[7](H),append_hydration(lt,I),append_hydration(lt,x),v&&v.m(x,null),yt[8](x),u=!0},p(f,[c]){if(c&27){s=ensure_array_like(Object.keys(f[4]));let g;for(g=0;g<s.length;g+=1){const h=get_each_context(f,s,g);k[g]?k[g].p(h,c):(k[g]=create_each_block(h),k[g].c(),k[g].m(H,null))}for(;g<k.length;g+=1)k[g].d(1);k.length=s.length}f[4][f[3]]?v?(v.p(f,c),c&8&&transition_in(v,1)):(v=create_if_block(f),v.c(),transition_in(v,1),v.m(x,null)):v&&(group_outros(),transition_out(v,1,1,()=>{v=null}),check_outros())},i(f){u||(transition_in(p.$$.fragment,f),transition_in(v),u=!0)},o(f){transition_out(p.$$.fragment,f),transition_out(v),u=!1},d(f){f&&(detach(l),detach(it),detach(F),detach(lt)),destroy_component(p,f),destroy_each(k,f),yt[7](null),v&&v.d(),yt[8](null)}}}function setTop(yt){let l=window.scrollY;yt.addEventListener("click",()=>window.scrollTo({top:l,behavior:"smooth"}))}function instance(yt,l,it){let p,F,lt,H={"დეკანის გზავნილი":Dekani,"დიპლომირებული მედიკოსის ერთსაფეხურიანი საგანმანათლებლო პროგრამა":Pdf,Graduation:Grad},I="დეკანის გზავნილი";window.onscroll=v=>{let f=p.parentElement,c=lt.getBoundingClientRect();const g=parseInt(window.getComputedStyle(f).top),h=f.getBoundingClientRect().top;p.classList.toggle("is-sticky",h<=g),c.bottom-p.offsetHeight<20?p.classList.add("fixTop"):p.classList.remove("fixTop")},onDestroy(()=>{window.onscroll=null});function x(v){binding_callbacks[v?"unshift":"push"](()=>{p=v,it(0,p)})}const u=async v=>{it(3,I=v),await tick(),window.scrollTo({top:F.offsetTop-100,behavior:"smooth"})};function s(v){binding_callbacks[v?"unshift":"push"](()=>{lt=v,it(2,lt)})}function k(v){binding_callbacks[v?"unshift":"push"](()=>{F=v,it(1,F)})}return[p,F,lt,I,H,x,u,s,k]}class Main extends SvelteComponent{constructor(l){super(),init(this,l,instance,create_fragment$1,safe_not_equal,{})}}function create_fragment(yt){let l,it;return l=new Main({}),{c(){create_component(l.$$.fragment)},l(p){claim_component(l.$$.fragment,p)},m(p,F){mount_component(l,p,F),it=!0},p:noop,i(p){it||(transition_in(l.$$.fragment,p),it=!0)},o(p){transition_out(l.$$.fragment,p),it=!1},d(p){destroy_component(l,p)}}}class Page extends SvelteComponent{constructor(l){super(),init(this,l,null,create_fragment,safe_not_equal,{})}}export{Page as component};
